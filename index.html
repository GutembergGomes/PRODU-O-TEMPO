<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GGOMES-LOG - Sistema de Acompanhamento de Produção</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f0f0ff',
                            100: '#e1e0ff',
                            200: '#c7c5fe',
                            300: '#a7a4fd',
                            400: '#8c7af8',
                            500: '#7a63f1',
                            600: '#7250e6',
                            700: '#5D5CDE', // Nossa cor principal
                            800: '#4940b0',
                            900: '#373583',
                        },
                        secondary: {
                            50: '#f1fcf7',
                            100: '#dbf7e8',
                            200: '#b9edd4',
                            300: '#88dbb8',
                            400: '#52bf95',
                            500: '#35a57d',
                            600: '#258566',
                            700: '#206b54',
                            800: '#1d5645',
                            900: '#19473a',
                        },
                        accent: {
                            50: '#fff8eb',
                            100: '#ffecc6',
                            200: '#ffd886',
                            300: '#ffbc46',
                            400: '#ffa620',
                            500: '#fe8605',
                            600: '#e56506',
                            700: '#bd4708',
                            800: '#983a0f',
                            900: '#7c3010',
                        },
                        success: {
                            50: '#ecfdf5',
                            100: '#d1fae5',
                            200: '#a7f3d0',
                            300: '#6ee7b7',
                            400: '#34d399',
                            500: '#10b981',
                            600: '#059669',
                            700: '#047857',
                            800: '#065f46',
                            900: '#064e3b',
                        },
                        warning: {
                            50: '#fffbeb',
                            100: '#fef3c7',
                            200: '#fde68a',
                            300: '#fcd34d',
                            400: '#fbbf24',
                            500: '#f59e0b',
                            600: '#d97706',
                            700: '#b45309',
                            800: '#92400e',
                            900: '#78350f',
                        },
                        danger: {
                            50: '#fef2f2',
                            100: '#fee2e2',
                            200: '#fecaca',
                            300: '#fca5a5',
                            400: '#f87171',
                            500: '#ef4444',
                            600: '#dc2626',
                            700: '#b91c1c',
                            800: '#991b1b',
                            900: '#7f1d1d',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif']
                    },
                    boxShadow: {
                        'card': '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',
                        'card-hover': '0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)',
                        'inner-light': 'inset 0 2px 4px 0 rgba(0, 0, 0, 0.06)',
                        'inner-dark': 'inset 0 2px 4px 0 rgba(255, 255, 255, 0.06)'
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.3s ease-in-out',
                        'slide-in': 'slideIn 0.3s ease-out',
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'bounce-slow': 'bounce 2s infinite',
                        'spin-slow': 'spin 3s linear infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideIn: {
                            '0%': { transform: 'translateY(-10px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                    },
                    borderRadius: {
                        'xl': '0.75rem',
                        '2xl': '1rem',
                        '3xl': '1.5rem',
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            transition: background-color 0.3s, border-color 0.3s, color 0.3s;
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }
        
        .slide-in {
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            0% { transform: translateY(-10px); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }
        
        .rotate-on-hover:hover {
            transform: rotate(15deg);
            transition: transform 0.3s ease;
        }
        
        /* Estilizando a barra de rolagem */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(93, 92, 222, 0.5);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(93, 92, 222, 0.8);
        }
        
        /* Loader */
        .loader {
            border: 3px solid rgba(93, 92, 222, 0.1);
            border-radius: 50%;
            border-top: 3px solid #5D5CDE;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Toast notifications */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            animation: slideInRight 0.3s, fadeOut 0.5s 2.5s forwards;
            border-left: 4px solid;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        @keyframes slideInRight {
            0% { transform: translateX(100%); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes fadeOut {
            0% { opacity: 1; }
            100% { opacity: 0; visibility: hidden; }
        }
        
        .toast-success { border-color: #34D399; }
        .toast-error { border-color: #F87171; }
        .toast-warning { border-color: #FBBF24; }
        .toast-info { border-color: #60A5FA; }
        
        /* Auth Container Styles */
        .auth-container {
            background-color: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(5px);
        }

        /* Progress Bar */
        .progress-bar {
            height: 8px;
            border-radius: 4px;
            transition: width 0.6s ease;
        }

        /* Active Tabs */
        .tab-active {
            border-bottom: 2px solid;
            color: #5D5CDE;
        }
        .dark .tab-active {
            color: #a7a4fd;
        }
        
        /* Glassmorphism cards */
        .glass-card {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }
        
        .dark .glass-card {
            background: rgba(17, 24, 39, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        
        /* Improved form inputs */
        .form-input:focus {
            border-color: #5D5CDE;
            box-shadow: 0 0 0 3px rgba(93, 92, 222, 0.25);
        }
        
        /* Animated icons */
        .icon-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        
        /* Weather icon animations */
        .icon-rain {
            animation: rain 1.5s infinite ease-in-out;
        }
        
        @keyframes rain {
            0% { transform: translateY(0) }
            50% { transform: translateY(3px) }
            100% { transform: translateY(0) }
        }
        
        .icon-sun {
            animation: rotate 10s infinite linear;
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        /* Tooltip styles */
        .tooltip {
            position: relative;
            display: inline-block;
        }
        
        .tooltip .tooltip-text {
            visibility: hidden;
            width: 120px;
            background-color: rgba(0, 0, 0, 0.8);
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -60px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .tooltip .tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: rgba(0, 0, 0, 0.8) transparent transparent transparent;
        }
        
        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
        
        /* Print styles */
        @media print {
            body {
                background: white;
                color: black;
            }
            
            .no-print {
                display: none !important;
            }
            
            .print-only {
                display: block !important;
            }
            
            .card, .bg-white, .dark\:bg-gray-800 {
                background: white !important;
                color: black !important;
                border: 1px solid #eaeaea !important;
                box-shadow: none !important;
            }
            
            td, th {
                color: black !important;
            }
        }
        
        /* Mobile optimizations */
        @media (max-width: 640px) {
            .mobile-card {
                padding: 0.75rem !important;
            }
            
            .mobile-text-sm {
                font-size: 0.875rem !important;
            }
            
            .mobile-compact-tabs .tab {
                padding: 0.5rem 0.75rem !important;
            }
        }
    </style>
    
    <!-- Detectar modo escuro -->
    <script>
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });
    </script>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-100 min-h-screen">
    <!-- Authentication Container with improved UI -->
    <div id="auth-container" class="fixed inset-0 auth-container flex items-center justify-center z-50 fade-in">
        <div class="bg-white dark:bg-gray-800 p-8 rounded-xl shadow-xl w-full max-w-md transform transition-all duration-300">
            <div class="text-center mb-6">
                <div class="flex justify-center mb-4">
                    <div class="relative">
                        <i class="fas fa-tractor text-4xl text-primary-600 dark:text-primary-400"></i>
                        <span class="absolute top-0 right-0 h-3 w-3 rounded-full bg-green-400 animate-pulse"></span>
                    </div>
                </div>
                <h2 class="text-2xl font-bold text-primary-700 dark:text-primary-300">GGOMES-LOG</h2>
                <p class="text-gray-600 dark:text-gray-400">Sistema de Acompanhamento de Produção</p>
            </div>
            
            <!-- Login Form with improved styling -->
            <div id="login-form" class="space-y-4">
                <div class="group">
                    <label for="login-email" class="block mb-1 text-gray-700 dark:text-gray-300 font-medium">Email</label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-envelope text-gray-400 group-focus-within:text-primary-500 transition-colors"></i>
                        </div>
                        <input type="email" id="login-email" class="form-input w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200" placeholder="seu@email.com" required>
                    </div>
                </div>
                <div class="group">
                    <label for="login-password" class="block mb-1 text-gray-700 dark:text-gray-300 font-medium">Senha</label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-lock text-gray-400 group-focus-within:text-primary-500 transition-colors"></i>
                        </div>
                        <input type="password" id="login-password" class="form-input w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200" placeholder="********" required>
                        <div class="absolute inset-y-0 right-0 pr-3 flex items-center">
                            <button type="button" id="toggle-password" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <button id="btn-login" class="w-full bg-primary-600 hover:bg-primary-700 text-white px-4 py-3 rounded-lg transition duration-200 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-opacity-50 font-medium">
                    <i class="fas fa-sign-in-alt mr-2"></i> Entrar
                </button>
                
                <!-- Mensagem sobre criação de usuários -->
                <div class="text-center text-sm text-gray-600 dark:text-gray-400 mt-4">
                    <p>Novos usuários devem ser cadastrados por um administrador</p>
                </div>
            </div>
            
            <!-- Auth loader with improved animation -->
            <div id="auth-loader" class="flex flex-col items-center justify-center py-6 hidden">
                <div class="loader mb-4 w-12 h-12 border-4"></div>
                <span class="text-gray-600 dark:text-gray-400 animate-pulse">Autenticando...</span>
            </div>
        </div>
    </div>
    
    <!-- Toast notifications container -->
    <div id="toast-container"></div>
    
    <!-- Main container -->
    <div id="app-container" class="flex flex-col h-screen hidden">
        <!-- Header with improved responsive design -->
        <header class="bg-white dark:bg-gray-800 shadow-md px-4 py-2 sticky top-0 z-50">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-3">
                    <div class="text-primary-700 dark:text-primary-300 p-2 bg-primary-100 dark:bg-primary-900/40 rounded-lg">
                        <i class="fas fa-tractor text-2xl"></i>
                    </div>
                    <h1 class="text-xl md:text-2xl font-bold text-primary-700 dark:text-primary-300 truncate">GGOMES-LOG</h1>
                </div>
                
                <div class="flex items-center space-x-1 md:space-x-4">
                    <!-- Weather widget -->
                    <div id="weather-widget" class="hidden md:flex items-center mr-2 bg-blue-50 dark:bg-blue-900/20 px-3 py-1 rounded-full">
                        <i id="weather-icon" class="fas fa-cloud-sun text-blue-500 mr-2"></i>
                        <span id="weather-temp" class="text-sm font-medium">--°C</span>
                    </div>
                    
                    <!-- Current date display -->
                    <div class="hidden md:flex items-center mr-2 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full">
                        <i class="far fa-calendar-alt text-gray-500 dark:text-gray-400 mr-2"></i>
                        <span id="current-date" class="text-sm font-medium"></span>
                    </div>
                    
                    <div class="text-sm text-gray-600 dark:text-gray-400 hidden md:block">
                        <span id="user-role-badge" class="px-2 py-1 rounded text-xs font-medium"></span>
                        <span id="user-name">Usuário</span>
                    </div>
                    
                    <button id="toggle-theme" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition tooltip">
                        <i class="fas fa-sun text-yellow-500 dark:hidden"></i>
                        <i class="fas fa-moon text-blue-300 hidden dark:block"></i>
                        <span class="tooltip-text">Alternar tema</span>
                    </button>
                    
                    <button id="btn-export-data" class="bg-secondary-600 hover:bg-secondary-700 text-white px-3 py-2 rounded-lg flex items-center transition transform hover:scale-105 tooltip">
                        <i class="fas fa-download"></i>
                        <span class="hidden md:inline ml-2">Exportar</span>
                        <span class="tooltip-text">Exportar Dados</span>
                    </button>
                    
                    <button id="btn-notifications" class="relative p-2 text-gray-500 hover:text-primary-600 dark:text-gray-400 dark:hover:text-primary-400 tooltip">
                        <i class="fas fa-bell"></i>
                        <span id="notification-badge" class="absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full">0</span>
                        <span class="tooltip-text">Notificações</span>
                    </button>
                    
                    <button id="btn-logout" class="bg-red-600 hover:bg-red-700 text-white p-2 rounded-lg transition transform hover:scale-105 tooltip">
                        <i class="fas fa-sign-out-alt"></i>
                        <span class="tooltip-text">Sair</span>
                    </button>
                </div>
            </div>
            
            <!-- Mobile search bar -->
            <div class="mt-2 relative lg:hidden">
                <input id="mobile-search" type="text" placeholder="Buscar..." class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                <div class="absolute inset-y-0 right-0 flex items-center pr-3">
                    <i class="fas fa-search text-gray-400"></i>
                </div>
            </div>
        </header>
        
        <!-- Main Content with improved layout -->
        <main class="flex-1 flex flex-col md:flex-row overflow-hidden">
            <!-- Sidebar Navigation with improved design -->
            <aside class="w-full md:w-64 bg-white dark:bg-gray-800 shadow-md md:h-full overflow-hidden">
                <!-- User profile summary at top of sidebar -->
                <div class="p-4 border-b border-gray-200 dark:border-gray-700 hidden md:block">
                    <div class="flex items-center space-x-3">
                        <div class="bg-primary-100 dark:bg-primary-900 p-2 rounded-full">
                            <i class="fas fa-user text-primary-600 dark:text-primary-400"></i>
                        </div>
                        <div>
                            <p id="sidebar-user-name" class="font-medium text-gray-800 dark:text-gray-200 text-sm truncate">Usuário</p>
                            <p id="sidebar-user-role" class="text-xs text-gray-500 dark:text-gray-400">Perfil</p>
                        </div>
                    </div>
                </div>
                
                <!-- Desktop search in sidebar -->
                <div class="p-4 border-b border-gray-200 dark:border-gray-700 hidden lg:block">
                    <div class="relative">
                        <input id="sidebar-search" type="text" placeholder="Buscar..." class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                        <div class="absolute inset-y-0 right-0 flex items-center pr-3">
                            <i class="fas fa-search text-gray-400"></i>
                        </div>
                    </div>
                </div>
                
                <nav class="flex md:flex-col p-1 md:p-0 space-x-1 md:space-x-0 md:space-y-0 overflow-x-auto md:overflow-x-visible">
                    <div class="p-2">
                        <h3 class="text-xs uppercase font-semibold text-gray-500 dark:text-gray-400 px-3 mb-2">Principal</h3>
                        <a href="#dashboard" class="sidebar-link active flex items-center space-x-2 px-3 py-3 rounded-lg bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300 transition-all">
                            <i class="fas fa-chart-line w-5 text-center"></i>
                            <span>Dashboard</span>
                        </a>
                        <a href="#colhedoras" class="sidebar-link flex items-center space-x-2 px-3 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all">
                            <i class="fas fa-tractor w-5 text-center"></i>
                            <span>Colhedoras</span>
                        </a>
                        <a href="#producao" class="sidebar-link flex items-center space-x-2 px-3 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all">
                            <i class="fas fa-cube w-5 text-center"></i>
                            <span>Registrar Produção</span>
                        </a>
                    </div>
                    
                    <div class="p-2">
                        <h3 class="text-xs uppercase font-semibold text-gray-500 dark:text-gray-400 px-3 mb-2">Monitoramento</h3>
                        <a href="#registros" class="sidebar-link flex items-center space-x-2 px-3 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all">
                            <i class="fas fa-list w-5 text-center"></i>
                            <span>Histórico</span>
                        </a>
                        <a href="#caminhoes" class="sidebar-link flex items-center space-x-2 px-3 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all">
                            <i class="fas fa-truck w-5 text-center"></i>
                            <span>Caminhões</span>
                        </a>
                        <a href="#mapa" class="sidebar-link flex items-center space-x-2 px-3 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all">
                            <i class="fas fa-map-marked-alt w-5 text-center"></i>
                            <span>Mapa</span>
                            <span class="ml-auto bg-green-500 text-white text-xs px-1.5 py-0.5 rounded-full">Novo</span>
                        </a>
                    </div>
                    
                    <div class="p-2">
                        <h3 class="text-xs uppercase font-semibold text-gray-500 dark:text-gray-400 px-3 mb-2">Sistema</h3>
                        <a href="#configuracoes" class="sidebar-link flex items-center space-x-2 px-3 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all">
                            <i class="fas fa-cog w-5 text-center"></i>
                            <span>Configurações</span>
                        </a>
                        <a href="#usuarios" class="sidebar-link admin-only flex items-center space-x-2 px-3 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all">
                            <i class="fas fa-users w-5 text-center"></i>
                            <span>Usuários</span>
                        </a>
                        <a href="#ajuda" class="sidebar-link flex items-center space-x-2 px-3 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all">
                            <i class="fas fa-question-circle w-5 text-center"></i>
                            <span>Ajuda</span>
                        </a>
                    </div>
                </nav>
            </aside>
            
            <!-- Content Area -->
            <div class="flex-1 overflow-auto p-4 bg-gray-50 dark:bg-gray-900">
                <!-- Dashboard Content -->
                <div id="content-dashboard" class="content fade-in">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
                        <h2 class="text-2xl font-bold mb-2 md:mb-0 text-gray-800 dark:text-gray-100 flex items-center">
                            <i class="fas fa-chart-line mr-3 text-primary-600 dark:text-primary-400"></i>
                            Dashboard
                        </h2>
                        
                        <!-- Quick Stats Bar -->
                        <div class="flex flex-wrap gap-2">
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm px-3 py-1.5 flex items-center">
                                <i class="fas fa-weight-hanging text-green-500 mr-2"></i>
                                <span id="quick-total-colhido" class="font-semibold">0 T</span>
                            </div>
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm px-3 py-1.5 flex items-center">
                                <i class="fas fa-ruler-combined text-blue-500 mr-2"></i>
                                <span id="quick-area-total" class="font-semibold">0 ha</span>
                            </div>
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm px-3 py-1.5 flex items-center">
                                <i class="fas fa-tractor text-purple-500 mr-2"></i>
                                <span id="quick-colhedoras" class="font-semibold">0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Filtros de período com design melhorado -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-4 mb-6">
                        <div class="flex flex-col md:flex-row justify-between items-center space-y-2 md:space-y-0">
                            <h3 class="text-lg font-semibold text-gray-800 dark:text-white flex items-center">
                                <i class="fas fa-calendar-alt mr-2 text-primary-500"></i>
                                Visão Geral
                            </h3>
                            <div class="flex items-center space-x-2">
                                <label for="dashboard-period" class="text-sm text-gray-600 dark:text-gray-400">Período:</label>
                                <select id="dashboard-period" class="bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-sm px-3 py-1.5 focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                                    <option value="7">Últimos 7 dias</option>
                                    <option value="30" selected>Últimos 30 dias</option>
                                    <option value="90">Últimos 3 meses</option>
                                    <option value="180">Últimos 6 meses</option>
                                    <option value="365">Último ano</option>
                                </select>
                                <button id="refresh-dashboard" class="bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300 p-2 rounded hover:bg-primary-200 dark:hover:bg-primary-800 transition transform hover:scale-105">
                                    <i class="fas fa-sync-alt"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Cards de estatísticas principais com design melhorado -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-5 card-hover transform transition-all duration-300">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 dark:text-gray-400 text-sm font-medium">Total Colhido</p>
                                    <h3 id="dash-total-colhido" class="text-3xl font-bold text-gray-800 dark:text-white mt-1">0 T</h3>
                                </div>
                                <div class="bg-primary-100 dark:bg-primary-900 p-3 rounded-full">
                                    <i class="fas fa-weight-hanging text-xl text-primary-600 dark:text-primary-400"></i>
                                </div>
                            </div>
                            <div class="mt-3">
                                <div class="flex items-center">
                                    <span id="dash-total-trend" class="text-sm font-medium flex items-center">
                                        <i class="fas fa-arrow-up mr-1 text-green-500"></i>
                                        <span>0% vs. período anterior</span>
                                    </span>
                                </div>
                                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mt-2">
                                    <div id="dash-total-progress" class="bg-primary-600 h-1.5 rounded-full" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-5 card-hover transform transition-all duration-300">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 dark:text-gray-400 text-sm font-medium">Área Total</p>
                                    <h3 id="dash-area-total" class="text-3xl font-bold text-gray-800 dark:text-white mt-1">0 ha</h3>
                                </div>
                                <div class="bg-secondary-100 dark:bg-secondary-900 p-3 rounded-full">
                                    <i class="fas fa-ruler-combined text-xl text-secondary-600 dark:text-secondary-400"></i>
                                </div>
                            </div>
                            <div class="mt-3">
                                <div class="flex items-center">
                                    <span id="dash-area-trend" class="text-sm font-medium flex items-center">
                                        <i class="fas fa-arrow-up mr-1 text-green-500"></i>
                                        <span>0% vs. período anterior</span>
                                    </span>
                                </div>
                                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mt-2">
                                    <div id="dash-area-progress" class="bg-secondary-600 h-1.5 rounded-full" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-5 card-hover transform transition-all duration-300">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 dark:text-gray-400 text-sm font-medium">Produtividade Média</p>
                                    <h3 id="dash-produtividade" class="text-3xl font-bold text-gray-800 dark:text-white mt-1">0 T/ha</h3>
                                </div>
                                <div class="bg-accent-100 dark:bg-accent-900 p-3 rounded-full">
                                    <i class="fas fa-chart-line text-xl text-accent-600 dark:text-accent-400"></i>
                                </div>
                            </div>
                            <div class="mt-3">
                                <div class="flex items-center">
                                    <span id="dash-produtividade-trend" class="text-sm font-medium flex items-center">
                                        <i class="fas fa-arrow-up mr-1 text-green-500"></i>
                                        <span>0% vs. período anterior</span>
                                    </span>
                                </div>
                                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mt-2">
                                    <div id="dash-produtividade-progress" class="bg-accent-600 h-1.5 rounded-full" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-5 card-hover transform transition-all duration-300">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 dark:text-gray-400 text-sm font-medium">Rendimento Médio</p>
                                    <h3 id="dash-rendimento" class="text-3xl font-bold text-gray-800 dark:text-white mt-1">0 T/h</h3>
                                </div>
                                <div class="bg-primary-100 dark:bg-primary-900 p-3 rounded-full">
                                    <i class="fas fa-clock text-xl text-primary-600 dark:text-primary-400"></i>
                                </div>
                            </div>
                            <div class="mt-3">
                                <div class="flex items-center">
                                    <span id="dash-rendimento-trend" class="text-sm font-medium flex items-center">
                                        <i class="fas fa-arrow-up mr-1 text-green-500"></i>
                                        <span>0% vs. período anterior</span>
                                    </span>
                                </div>
                                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mt-2">
                                    <div id="dash-rendimento-progress" class="bg-primary-600 h-1.5 rounded-full" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Gráficos principais com design melhorado -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                        <!-- Gráfico de produção ao longo do tempo -->
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-4 transform transition-all duration-300 hover:shadow-lg">
                            <h3 class="text-lg font-semibold mb-3 text-gray-800 dark:text-white flex items-center">
                                <i class="fas fa-chart-line mr-2 text-primary-500"></i>
                                Produção ao Longo do Tempo
                            </h3>
                            <div class="h-72 w-full">
                                <canvas id="chart-producao-tempo"></canvas>
                            </div>
                        </div>
                        
                        <!-- Gráfico de distribuição por cultura -->
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-4 transform transition-all duration-300 hover:shadow-lg">
                            <h3 class="text-lg font-semibold mb-3 text-gray-800 dark:text-white flex items-center">
                                <i class="fas fa-chart-pie mr-2 text-primary-500"></i>
                                Distribuição por Cultura
                            </h3>
                            <div class="h-72 w-full">
                                <canvas id="chart-culturas"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Seção de Desempenho com design melhorado -->
                    <div class="mb-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-gray-800 dark:text-white flex items-center">
                                <i class="fas fa-trophy mr-2 text-yellow-500"></i>
                                Análise de Desempenho
                            </h3>
                            <div class="flex items-center bg-gray-100 dark:bg-gray-700 rounded-lg p-1 mobile-compact-tabs">
                                <button class="dashboard-tab tab-active px-4 py-1.5 text-sm rounded-md transition-all" data-tab="colhedoras">Colhedoras</button>
                                <button class="dashboard-tab px-4 py-1.5 text-sm rounded-md transition-all" data-tab="culturas">Culturas</button>
                            </div>
                        </div>
                        
                        <!-- Conteúdo de tabs -->
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md">
                            <!-- Tab de Colhedoras -->
                            <div id="tab-colhedoras" class="dashboard-tab-content p-4">
                                <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
                                    <!-- Melhor produtividade -->
                                    <div class="bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/20 rounded-lg p-4 transform transition-all duration-300 hover:shadow-md">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <h4 class="text-sm font-medium text-green-800 dark:text-green-400">Melhor Produtividade</h4>
                                                <p id="best-productivity-colhedora" class="text-xl font-bold text-gray-800 dark:text-white mt-1">-</p>
                                                <p id="best-productivity-value" class="text-sm text-green-700 dark:text-green-400 font-medium">0 T/ha</p>
                                            </div>
                                            <div class="bg-green-200 dark:bg-green-700 p-2 rounded-full">
                                                <i class="fas fa-award text-green-600 dark:text-green-300"></i>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Maior volume -->
                                    <div class="bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/20 rounded-lg p-4 transform transition-all duration-300 hover:shadow-md">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <h4 class="text-sm font-medium text-blue-800 dark:text-blue-400">Maior Volume</h4>
                                                <p id="best-volume-colhedora" class="text-xl font-bold text-gray-800 dark:text-white mt-1">-</p>
                                                <p id="best-volume-value" class="text-sm text-blue-700 dark:text-blue-400 font-medium">0 T</p>
                                            </div>
                                            <div class="bg-blue-200 dark:bg-blue-700 p-2 rounded-full">
                                                <i class="fas fa-weight-hanging text-blue-600 dark:text-blue-300"></i>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Melhor rendimento -->
                                    <div class="bg-gradient-to-r from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/20 rounded-lg p-4 transform transition-all duration-300 hover:shadow-md">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <h4 class="text-sm font-medium text-purple-800 dark:text-purple-400">Melhor Rendimento</h4>
                                                <p id="best-yield-colhedora" class="text-xl font-bold text-gray-800 dark:text-white mt-1">-</p>
                                                <p id="best-yield-value" class="text-sm text-purple-700 dark:text-purple-400 font-medium">0 T/h</p>
                                            </div>
                                            <div class="bg-purple-200 dark:bg-purple-700 p-2 rounded-full">
                                                <i class="fas fa-bolt text-purple-600 dark:text-purple-300"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Gráfico de comparação de colhedoras -->
                                <div class="mt-4 h-72">
                                    <canvas id="chart-colhedoras-comparacao"></canvas>
                                </div>
                            </div>
                            
                            <!-- Tab de Culturas -->
                            <div id="tab-culturas" class="dashboard-tab-content p-4 hidden">
                                <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
                                    <!-- Cultura mais produtiva -->
                                    <div class="bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/20 rounded-lg p-4 transform transition-all duration-300 hover:shadow-md">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <h4 class="text-sm font-medium text-green-800 dark:text-green-400">Cultura Mais Produtiva</h4>
                                                <p id="best-productivity-cultura" class="text-xl font-bold text-gray-800 dark:text-white mt-1">-</p>
                                                <p id="best-productivity-cultura-value" class="text-sm text-green-700 dark:text-green-400 font-medium">0 T/ha</p>
                                            </div>
                                            <div class="bg-green-200 dark:bg-green-700 p-2 rounded-full">
                                                <i class="fas fa-seedling text-green-600 dark:text-green-300"></i>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Cultura com maior volume -->
                                    <div class="bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/20 rounded-lg p-4 transform transition-all duration-300 hover:shadow-md">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <h4 class="text-sm font-medium text-blue-800 dark:text-blue-400">Maior Volume</h4>
                                                <p id="best-volume-cultura" class="text-xl font-bold text-gray-800 dark:text-white mt-1">-</p>
                                                <p id="best-volume-cultura-value" class="text-sm text-blue-700 dark:text-blue-400 font-medium">0 T</p>
                                            </div>
                                            <div class="bg-blue-200 dark:bg-blue-700 p-2 rounded-full">
                                                <i class="fas fa-weight-hanging text-blue-600 dark:text-blue-300"></i>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Cultura com maior área -->
                                    <div class="bg-gradient-to-r from-yellow-50 to-yellow-100 dark:from-yellow-900/30 dark:to-yellow-800/20 rounded-lg p-4 transform transition-all duration-300 hover:shadow-md">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <h4 class="text-sm font-medium text-yellow-800 dark:text-yellow-400">Maior Área</h4>
                                                <p id="best-area-cultura" class="text-xl font-bold text-gray-800 dark:text-white mt-1">-</p>
                                                <p id="best-area-cultura-value" class="text-sm text-yellow-700 dark:text-yellow-400 font-medium">0 ha</p>
                                            </div>
                                            <div class="bg-yellow-200 dark:bg-yellow-700 p-2 rounded-full">
                                                <i class="fas fa-ruler-combined text-yellow-600 dark:text-yellow-300"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Gráfico de comparação de culturas -->
                                <div class="mt-4 h-72">
                                    <canvas id="chart-culturas-comparacao"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Estatísticas de Caminhões com design melhorado -->
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold mb-4 text-gray-800 dark:text-white flex items-center">
                            <i class="fas fa-truck mr-2 text-primary-600 dark:text-primary-400"></i>
                            Estatísticas de Caminhões
                        </h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-5 card-hover transform transition-all duration-300">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-gray-500 dark:text-gray-400 text-sm font-medium">Tempo Médio de Campo</p>
                                        <h3 id="dash-tempo-campo" class="text-3xl font-bold text-gray-800 dark:text-white mt-1">0 min</h3>
                                    </div>
                                    <div class="bg-green-100 dark:bg-green-900 p-3 rounded-full">
                                        <i class="fas fa-tractor text-xl text-green-600 dark:text-green-400"></i>
                                    </div>
                                </div>
                                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mt-3">
                                    <div id="dash-tempo-campo-progress" class="bg-green-600 h-1.5 rounded-full" style="width: 45%"></div>
                                </div>
                            </div>
                            
                            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-5 card-hover transform transition-all duration-300">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-gray-500 dark:text-gray-400 text-sm font-medium">Tempo Médio de Pátio</p>
                                        <h3 id="dash-tempo-patio" class="text-3xl font-bold text-gray-800 dark:text-white mt-1">0 min</h3>
                                    </div>
                                    <div class="bg-blue-100 dark:bg-blue-900 p-3 rounded-full">
                                        <i class="fas fa-warehouse text-xl text-blue-600 dark:text-blue-400"></i>
                                    </div>
                                </div>
                                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mt-3">
                                    <div id="dash-tempo-patio-progress" class="bg-blue-600 h-1.5 rounded-full" style="width: 30%"></div>
                                </div>
                            </div>
                            
                            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-5 card-hover transform transition-all duration-300">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-gray-500 dark:text-gray-400 text-sm font-medium">Registros de Caminhões</p>
                                        <h3 id="dash-total-caminhoes" class="text-3xl font-bold text-gray-800 dark:text-white mt-1">0</h3>
                                    </div>
                                    <div class="bg-yellow-100 dark:bg-yellow-900 p-3 rounded-full">
                                        <i class="fas fa-truck text-xl text-yellow-600 dark:text-yellow-400"></i>
                                    </div>
                                </div>
                                <div class="flex items-center mt-2">
                                    <span id="dash-caminhoes-trend" class="text-sm font-medium flex items-center">
                                        <i class="fas fa-arrow-up mr-1 text-green-500"></i>
                                        <span>0% vs. período anterior</span>
                                    </span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Gráfico de tempos de caminhões -->
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-4 mt-4 transform transition-all duration-300 hover:shadow-lg">
                            <h4 class="text-base font-semibold mb-3 text-gray-800 dark:text-white flex items-center">
                                <i class="fas fa-chart-bar mr-2 text-primary-500"></i>
                                Análise de Tempos de Caminhões
                            </h4>
                            <div class="h-72">
                                <canvas id="chart-caminhoes-tempo"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Nova seção: Previsão do Tempo e Alertas -->
                    <div class="mb-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Previsão do Tempo -->
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 transform transition-all duration-300 hover:shadow-lg">
                            <h3 class="text-xl font-semibold mb-4 text-gray-800 dark:text-white flex items-center">
                                <i class="fas fa-cloud-sun mr-2 text-blue-500 dark:text-blue-400"></i>
                                Previsão do Tempo
                            </h3>
                            
                            <div class="flex flex-wrap gap-4">
                                <!-- Tempo Atual -->
                                <div class="bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/20 p-4 rounded-lg flex-grow">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="text-sm text-blue-800 dark:text-blue-300">Hoje</p>
                                            <p class="text-2xl font-bold text-gray-800 dark:text-white mt-1">28°C</p>
                                            <p class="text-sm text-blue-700 dark:text-blue-400">Parcialmente nublado</p>
                                        </div>
                                        <div class="text-5xl text-blue-500 dark:text-blue-400">
                                            <i class="fas fa-cloud-sun icon-sun"></i>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Próximos Dias -->
                                <div class="flex flex-wrap gap-2 justify-around flex-grow">
                                    <div class="text-center p-2">
                                        <p class="text-xs text-gray-600 dark:text-gray-400">Amanhã</p>
                                        <i class="fas fa-sun text-2xl text-yellow-500 mt-1 mb-1"></i>
                                        <p class="text-sm font-bold">30°C</p>
                                    </div>
                                    <div class="text-center p-2">
                                        <p class="text-xs text-gray-600 dark:text-gray-400">Quarta</p>
                                        <i class="fas fa-cloud-rain text-2xl text-blue-500 mt-1 mb-1 icon-rain"></i>
                                        <p class="text-sm font-bold">24°C</p>
                                    </div>
                                    <div class="text-center p-2">
                                        <p class="text-xs text-gray-600 dark:text-gray-400">Quinta</p>
                                        <i class="fas fa-cloud text-2xl text-gray-500 mt-1 mb-1"></i>
                                        <p class="text-sm font-bold">26°C</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Informações de clima para agricultura -->
                            <div class="mt-4 border-t border-gray-200 dark:border-gray-700 pt-3">
                                <div class="grid grid-cols-3 gap-2 text-center">
                                    <div>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">Umidade</p>
                                        <p class="font-medium">65%</p>
                                    </div>
                                    <div>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">Vento</p>
                                        <p class="font-medium">12 km/h</p>
                                    </div>
                                    <div>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">Chuva (7d)</p>
                                        <p class="font-medium">15mm</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Alertas e Notificações -->
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 transform transition-all duration-300 hover:shadow-lg">
                            <h3 class="text-xl font-semibold mb-4 text-gray-800 dark:text-white flex items-center">
                                <i class="fas fa-bell mr-2 text-yellow-500"></i>
                                Alertas e Lembretes
                            </h3>
                            
                            <div class="space-y-3">
                                <div class="bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded-lg border-l-4 border-yellow-500">
                                    <div class="flex items-start">
                                        <i class="fas fa-exclamation-circle text-yellow-500 mt-0.5 mr-2"></i>
                                        <div>
                                            <p class="font-medium text-yellow-800 dark:text-yellow-300">Manutenção Programada</p>
                                            <p class="text-sm text-yellow-700 dark:text-yellow-400">Colhedora 001 - Troca de óleo em 2 dias</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border-l-4 border-blue-500">
                                    <div class="flex items-start">
                                        <i class="fas fa-cloud-rain text-blue-500 mt-0.5 mr-2"></i>
                                        <div>
                                            <p class="font-medium text-blue-800 dark:text-blue-300">Alerta de Clima</p>
                                            <p class="text-sm text-blue-700 dark:text-blue-400">Previsão de chuva para quarta-feira (15mm)</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-green-50 dark:bg-green-900/20 p-3 rounded-lg border-l-4 border-green-500">
                                    <div class="flex items-start">
                                        <i class="fas fa-seedling text-green-500 mt-0.5 mr-2"></i>
                                        <div>
                                            <p class="font-medium text-green-800 dark:text-green-300">Meta de Colheita</p>
                                            <p class="text-sm text-green-700 dark:text-green-400">75% da meta mensal alcançada (3750T/5000T)</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Botão para adicionar lembrete -->
                            <button class="mt-4 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg w-full flex items-center justify-center hover:bg-gray-200 dark:hover:bg-gray-600 transition">
                                <i class="fas fa-plus mr-2"></i>
                                Adicionar Lembrete
                            </button>
                        </div>
                    </div>
                    
                    <!-- Resumo do Dashboard com design melhorado -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-6">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800 dark:text-white flex items-center">
                            <i class="fas fa-info-circle mr-2 text-primary-600 dark:text-primary-400"></i>
                            Resumo da Atividade
                        </h3>
                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                            Bem-vindo ao dashboard do GGOMES-LOG. Aqui você encontrará um resumo das atividades 
                            de produção e poderá acompanhar as principais métricas do sistema.
                        </p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                                <h4 class="font-semibold text-gray-700 dark:text-gray-300 mb-2 flex items-center">
                                    <i class="fas fa-tractor text-primary-500 mr-2"></i>
                                    Colhedoras Registradas
                                </h4>
                                <div class="flex items-end">
                                    <p id="qtd-colhedoras" class="text-2xl font-bold text-primary-700 dark:text-primary-300">0</p>
                                    <p class="text-sm text-gray-500 dark:text-gray-400 ml-2 mb-1">unidades</p>
                                </div>
                            </div>
                            <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                                <h4 class="font-semibold text-gray-700 dark:text-gray-300 mb-2 flex items-center">
                                    <i class="fas fa-clipboard-list text-secondary-500 mr-2"></i>
                                    Registros de Produção
                                </h4>
                                <div class="flex items-end">
                                    <p id="qtd-registros" class="text-2xl font-bold text-secondary-700 dark:text-secondary-300">0</p>
                                    <p class="text-sm text-gray-500 dark:text-gray-400 ml-2 mb-1">registros</p>
                                </div>
                            </div>
                            <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                                <h4 class="font-semibold text-gray-700 dark:text-gray-300 mb-2 flex items-center">
                                    <i class="fas fa-users text-accent-500 mr-2"></i>
                                    Usuários Ativos
                                </h4>
                                <div class="flex items-end">
                                    <p id="qtd-usuarios" class="text-2xl font-bold text-accent-700 dark:text-accent-300">1</p>
                                    <p class="text-sm text-gray-500 dark:text-gray-400 ml-2 mb-1">usuários</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Colhedoras Content -->
                <div id="content-colhedoras" class="content hidden fade-in">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
                        <h2 class="text-2xl font-bold mb-2 md:mb-0 text-gray-800 dark:text-gray-100 flex items-center">
                            <i class="fas fa-tractor mr-3 text-primary-600 dark:text-primary-400"></i>
                            Colhedoras
                        </h2>
                        <button id="btn-add-colhedora" class="bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg flex items-center transition transform hover:scale-105">
                            <i class="fas fa-plus mr-2"></i>
                            Nova Colhedora
                        </button>
                    </div>
                    
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-4 mb-6">
                        <h3 class="text-lg font-semibold mb-4 text-gray-800 dark:text-white flex items-center">
                            <i class="fas fa-list mr-2 text-primary-500"></i>
                            Lista de Colhedoras
                        </h3>
                        
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                <thead class="bg-gray-50 dark:bg-gray-700">
                                    <tr>
                                        <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                            ID / Modelo
                                        </th>
                                        <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                            Marca
                                        </th>
                                        <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                            Ano
                                        </th>
                                        <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                            Ações
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="tabela-colhedoras-lista" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                    <!-- Lista de colhedoras será inserida aqui via JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-4 mb-6">
                        <h3 class="text-lg font-semibold mb-4 text-gray-800 dark:text-white flex items-center">
                            <i class="fas fa-plus-circle mr-2 text-primary-500"></i>
                            Adicionar/Editar Colhedora
                        </h3>
                        
                        <form id="form-colhedora" class="space-y-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label for="colhedora-id" class="block mb-1 text-gray-700 dark:text-gray-300 font-medium">ID da Colhedora*</label>
                                    <input type="text" id="colhedora-id" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent" required>
                                </div>
                                <div>
                                    <label for="colhedora-modelo" class="block mb-1 text-gray-700 dark:text-gray-300 font-medium">Modelo*</label>
                                    <input type="text" id="colhedora-modelo" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent" required>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label for="colhedora-marca" class="block mb-1 text-gray-700 dark:text-gray-300 font-medium">Marca</label>
                                    <input type="text" id="colhedora-marca" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                                </div>
                                <div>
                                    <label for="colhedora-ano" class="block mb-1 text-gray-700 dark:text-gray-300 font-medium">Ano</label>
                                    <input type="number" id="colhedora-ano" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                                </div>
                            </div>
                            
                            <div>
                                <label for="colhedora-observacoes" class="block mb-1 text-gray-700 dark:text-gray-300 font-medium">Observações</label>
                                <textarea id="colhedora-observacoes" rows="3" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"></textarea>
                            </div>
                            
                            <div class="flex justify-end space-x-3">
                                <button type="reset" class="px-4 py-2 bg-gray-300 hover:bg-gray-400 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg transition">
                                    <i class="fas fa-times mr-2"></i> Cancelar
                                </button>
                                <button type="submit" class="px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition">
                                    <i class="fas fa-save mr-2"></i> Salvar Colhedora
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <!-- Registros Content -->
                <div id="content-registros" class="content hidden fade-in">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
                        <h2 class="text-2xl font-bold mb-2 md:mb-0 text-gray-800 dark:text-gray-100 flex items-center">
                            <i class="fas fa-list mr-3 text-primary-600 dark:text-primary-400"></i>
                            Histórico de Registros
                        </h2>
                    </div>
                    
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-4 mb-6">
                        <h3 class="text-lg font-semibold mb-4 text-gray-800 dark:text-white flex items-center">
                            <i class="fas fa-filter mr-2 text-primary-500"></i>
                            Filtros
                        </h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                            <div>
                                <label for="filtro-colhedora" class="block mb-1 text-gray-700 dark:text-gray-300 text-sm font-medium">Colhedora</label>
                                <select id="filtro-colhedora" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                                    <option value="">Todas</option>
                                    <!-- Será preenchido via JavaScript -->
                                </select>
                            </div>
                            <div>
                                <label for="filtro-cultura" class="block mb-1 text-gray-700 dark:text-gray-300 text-sm font-medium">Cultura</label>
                                <select id="filtro-cultura" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                                    <option value="">Todas</option>
                                    <!-- Será preenchido via JavaScript -->
                                </select>
                            </div>
                            <div>
                                <label for="filtro-data-inicio" class="block mb-1 text-gray-700 dark:text-gray-300 text-sm font-medium">Data Início</label>
                                <input type="date" id="filtro-data-inicio" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                            </div>
                            <div>
                                <label for="filtro-data-fim" class="block mb-1 text-gray-700 dark:text-gray-300 text-sm font-medium">Data Fim</label>
                                <input type="date" id="filtro-data-fim" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                            </div>
                        </div>
                        
                        <div class="flex justify-end mt-4">
                            <button id="btn-limpar-filtros" class="px-4 py-2 bg-gray-300 hover:bg-gray-400 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg transition mr-2">
                                <i class="fas fa-eraser mr-2"></i> Limpar
                            </button>
                            <button id="btn-aplicar-filtros" class="px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition">
                                <i class="fas fa-filter mr-2"></i> Aplicar Filtros
                            </button>
                        </div>
                    </div>
                    
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-4 mb-6">
                        <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-4">
                            <h3 class="text-lg font-semibold text-gray-800 dark:text-white flex items-center">
                                <i class="fas fa-history mr-2 text-primary-500"></i>
                                Histórico de Produção
                            </h3>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                <span id="registros-contagem">0</span> registros encontrados
                            </p>
                        </div>
                        
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                <thead class="bg-gray-50 dark:bg-gray-700">
                                    <tr>
                                        <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                            Data
                                        </th>
                                        <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                            Colhedora
                                        </th>
                                        <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                            Cultura
                                        </th>
                                        <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                            Quantidade (T)
                                        </th>
                                        <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                            Área (ha)
                                        </th>
                                        <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                            Horas
                                        </th>
                                        <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                            T/ha
                                        </th>
                                        <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                            T/h
                                        </th>
                                        <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                            Ações
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="tabela-registros" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                    <!-- Será preenchido via JavaScript -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="flex justify-between items-center mt-4">
                            <div>
                                <p id="paginacao-info" class="text-sm text-gray-600 dark:text-gray-400">
                                    Página 1 de 1
                                </p>
                            </div>
                            <div class="flex space-x-2">
                                <button id="btn-pagina-anterior" class="px-3 py-1 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded transition" disabled>
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <button id="btn-proxima-pagina" class="px-3 py-1 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded transition" disabled>
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Producao Content -->
                <div id="content-producao" class="content hidden fade-in">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
                        <h2 class="text-2xl font-bold mb-2 md:mb-0 text-gray-800 dark:text-gray-100 flex items-center">
                            <i class="fas fa-cube mr-3 text-primary-600 dark:text-primary-400"></i>
                            Registrar Produção
                        </h2>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                        <div class="lg:col-span-2">
                            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-4 mb-6">
                                <h3 class="text-lg font-semibold mb-4 text-gray-800 dark:text-white flex items-center">
                                    <i class="fas fa-plus-circle mr-2 text-primary-500"></i>
                                    Novo Registro
                                </h3>
                                
                                <form id="form-registro" class="space-y-4">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label for="registro-data" class="block mb-1 text-gray-700 dark:text-gray-300 font-medium">Data*</label>
                                            <input type="date" id="registro-data" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent" required>
                                        </div>
                                        <div>
                                            <label for="registro-colhedora" class="block mb-1 text-gray-700 dark:text-gray-300 font-medium">Colhedora*</label>
                                            <select id="registro-colhedora" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent" required>
                                                <option value="">Selecione uma colhedora</option>
                                                <!-- Será preenchido via JavaScript -->
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div>
                                            <label for="registro-cultura" class="block mb-1 text-gray-700 dark:text-gray-300 font-medium">Cultura*</label>
                                            <input type="text" id="registro-cultura" list="lista-culturas" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent" required>
                                            <datalist id="lista-culturas">
                                                <!-- Será preenchido via JavaScript -->
                                            </datalist>
                                        </div>
                                        <div>
                                            <label for="registro-quantidade" class="block mb-1 text-gray-700 dark:text-gray-300 font-medium">Quantidade (T)*</label>
                                            <input type="number" id="registro-quantidade" min="0" step="0.01" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent" required>
                                        </div>
                                        <div>
                                            <label for="registro-area" class="block mb-1 text-gray-700 dark:text-gray-300 font-medium">Área (ha)*</label>
                                            <input type="number" id="registro-area" min="0" step="0.01" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent" required>
                                        </div>
                                    </div>
                                    
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label for="registro-horas" class="block mb-1 text-gray-700 dark:text-gray-300 font-medium">Horas Trabalhadas</label>
                                            <input type="number" id="registro-horas" min="0" step="0.1" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                                        </div>
                                        <div>
                                            <label for="registro-combustivel" class="block mb-1 text-gray-700 dark:text-gray-300 font-medium">Combustível (L)</label>
                                            <input type="number" id="registro-combustivel" min="0" step="0.1" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <label for="registro-observacoes" class="block mb-1 text-gray-700 dark:text-gray-300 font-medium">Observações</label>
                                        <textarea id="registro-observacoes" rows="3" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"></textarea>
                                    </div>
                                    
                                    <div class="flex justify-end space-x-3">
                                        <button type="reset" class="px-4 py-2 bg-gray-300 hover:bg-gray-400 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg transition">
                                            <i class="fas fa-times mr-2"></i> Limpar
                                        </button>
                                        <button type="submit" class="px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition">
                                            <i class="fas fa-save mr-2"></i> Salvar Registro
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        
                        <div>
                            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-4 mb-6">
                                <h3 class="text-lg font-semibold mb-4 text-gray-800 dark:text-white flex items-center">
                                    <i class="fas fa-chart-pie mr-2 text-primary-500"></i>
                                    Resumo de Produção
                                </h3>
                                
                                <div class="space-y-3">
                                    <div class="p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                        <p class="text-sm text-gray-500 dark:text-gray-400">Total Colhido</p>
                                        <p id="total-colhido" class="text-2xl font-bold text-gray-800 dark:text-white">0 T</p>
                                    </div>
                                    <div class="p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                        <p class="text-sm text-gray-500 dark:text-gray-400">Área Total</p>
                                        <p id="area-total" class="text-2xl font-bold text-gray-800 dark:text-white">0 ha</p>
                                    </div>
                                    <div class="p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                        <p class="text-sm text-gray-500 dark:text-gray-400">Produtividade Média</p>
                                        <p id="produtividade-media" class="text-2xl font-bold text-gray-800 dark:text-white">0 T/ha</p>
                                    </div>
                                    <div class="p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                        <p class="text-sm text-gray-500 dark:text-gray-400">Rendimento Médio</p>
                                        <p id="rendimento-medio" class="text-2xl font-bold text-gray-800 dark:text-white">0 T/h</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-4">
                                <h3 class="text-lg font-semibold mb-4 text-gray-800 dark:text-white flex items-center">
                                    <i class="fas fa-tractor mr-2 text-primary-500"></i>
                                    Estatísticas por Colhedora
                                </h3>
                                
                                <div class="overflow-x-auto max-h-96 overflow-y-auto">
                                    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                        <thead class="bg-gray-50 dark:bg-gray-700 sticky top-0">
                                            <tr>
                                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                                    Colhedora
                                                </th>
                                                <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                                    Total (T)
                                                </th>
                                                <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                                    Área (ha)
                                                </th>
                                                <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                                    T/ha
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody id="tabela-colhedoras" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                            <!-- Será preenchido via JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Caminhoes Content -->
                <div id="content-caminhoes" class="content hidden fade-in">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
                        <h2 class="text-2xl font-bold mb-2 md:mb-0 text-gray-800 dark:text-gray-100 flex items-center">
                            <i class="fas fa-truck mr-3 text-primary-600 dark:text-primary-400"></i>
                            Caminhões
                        </h2>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                        <div class="lg:col-span-1">
                            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-4 mb-6">
                                <h3 class="text-lg font-semibold mb-4 text-gray-800 dark:text-white flex items-center">
                                    <i class="fas fa-plus-circle mr-2 text-primary-500"></i>
                                    Registrar Caminhão
                                </h3>
                                
                                <form id="form-caminhao" class="space-y-4">
                                    <div>
                                        <label for="caminhao-data" class="block mb-1 text-gray-700 dark:text-gray-300 font-medium">Data*</label>
                                        <input type="date" id="caminhao-data" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent" required>
                                    </div>
                                    <div>
                                        <label for="caminhao-id" class="block mb-1 text-gray-700 dark:text-gray-300 font-medium">ID do Caminhão*</label>
                                        <input type="text" id="caminhao-id" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent" required>
                                    </div>
                                    <div>
                                        <label for="caminhao-tempo-campo" class="block mb-1 text-gray-700 dark:text-gray-300 font-medium">Tempo de Campo (min)*</label>
                                        <input type="number" id="caminhao-tempo-campo" min="0" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent" required>
                                    </div>
                                    <div>
                                        <label for="caminhao-tempo-patio" class="block mb-1 text-gray-700 dark:text-gray-300 font-medium">Tempo de Pátio (min)*</label>
                                        <input type="number" id="caminhao-tempo-patio" min="0" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent" required>
                                    </div>
                                    <div>
                                        <label for="caminhao-observacoes" class="block mb-1 text-gray-700 dark:text-gray-300 font-medium">Observações</label>
                                        <textarea id="caminhao-observacoes" rows="3" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"></textarea>
                                    </div>
                                    
                                    <div class="flex justify-end space-x-3">
                                        <button type="reset" class="px-4 py-2 bg-gray-300 hover:bg-gray-400 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg transition">
                                            <i class="fas fa-times mr-2"></i> Limpar
                                        </button>
                                        <button type="submit" class="px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition">
                                            <i class="fas fa-save mr-2"></i> Salvar
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        
                        <div class="lg:col-span-2">
                            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-4 mb-6">
                                <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-4">
                                    <h3 class="text-lg font-semibold text-gray-800 dark:text-white flex items-center">
                                        <i class="fas fa-chart-bar mr-2 text-primary-500"></i>
                                        Estatísticas
                                    </h3>
                                    <div class="flex items-center space-x-2">
                                        <label for="data-filtro-caminhoes" class="text-sm text-gray-600 dark:text-gray-400">Filtrar por data:</label>
                                        <input type="date" id="data-filtro-caminhoes" class="bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-sm px-3 py-1.5 focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                                        <button id="btn-filtrar-caminhoes" class="bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300 p-1.5 rounded hover:bg-primary-200 dark:hover:bg-primary-800 transition">
                                            <i class="fas fa-filter"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                                    <div class="p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                        <p class="text-sm text-gray-500 dark:text-gray-400">Tempo Médio de Campo</p>
                                        <p id="media-campo" class="text-2xl font-bold text-gray-800 dark:text-white">0 min</p>
                                    </div>
                                    <div class="p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                        <p class="text-sm text-gray-500 dark:text-gray-400">Tempo Médio de Pátio</p>
                                        <p id="media-patio" class="text-2xl font-bold text-gray-800 dark:text-white">0 min</p>
                                    </div>
                                    <div class="p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                        <p class="text-sm text-gray-500 dark:text-gray-400">Total de Registros</p>
                                        <p id="total-registros-caminhoes" class="text-2xl font-bold text-gray-800 dark:text-white">0</p>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div class="md:col-span-1">
                                        <h4 class="font-medium text-gray-800 dark:text-white mb-2 border-b border-gray-200 dark:border-gray-700 pb-1">
                                            Tempo Total Médio
                                        </h4>
                                        <p id="tempo-total-medio" class="text-xl font-bold text-primary-600 dark:text-primary-400">0 min</p>
                                    </div>
                                    <div class="md:col-span-2">
                                        <h4 class="font-medium text-gray-800 dark:text-white mb-2 border-b border-gray-200 dark:border-gray-700 pb-1">
                                            Médias por Caminhão
                                        </h4>
                                        <div class="overflow-x-auto">
                                            <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                                <thead class="bg-gray-50 dark:bg-gray-700">
                                                    <tr>
                                                        <th scope="col" class="px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                                            Caminhão
                                                        </th>
                                                        <th scope="col" class="px-4 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                                            Campo
                                                        </th>
                                                        <th scope="col" class="px-4 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                                            Pátio
                                                        </th>
                                                        <th scope="col" class="px-4 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                                            Total
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody id="tabela-medias-caminhoes" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                                    <!-- Será preenchido via JavaScript -->
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-4">
                                <h3 class="text-lg font-semibold mb-4 text-gray-800 dark:text-white flex items-center">
                                    <i class="fas fa-history mr-2 text-primary-500"></i>
                                    Histórico de Caminhões
                                </h3>
                                
                                <div class="overflow-x-auto">
                                    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                        <thead class="bg-gray-50 dark:bg-gray-700">
                                            <tr>
                                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                                    Data
                                                </th>
                                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                                    Caminhão
                                                </th>
                                                <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                                    Campo (min)
                                                </th>
                                                <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                                    Pátio (min)
                                                </th>
                                                <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                                    Total (min)
                                                </th>
                                                <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                                    Ações
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody id="tabela-historico-caminhoes" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                            <!-- Será preenchido via JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Configuracoes Content -->
                <div id="content-configuracoes" class="content hidden fade-in">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
                        <h2 class="text-2xl font-bold mb-2 md:mb-0 text-gray-800 dark:text-gray-100 flex items-center">
                            <i class="fas fa-cog mr-3 text-primary-600 dark:text-primary-400"></i>
                            Configurações
                        </h2>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-4">
                            <h3 class="text-lg font-semibold mb-4 text-gray-800 dark:text-white flex items-center">
                                <i class="fas fa-sliders-h mr-2 text-primary-500"></i>
                                Configurações Gerais
                            </h3>
                            
                            <form id="form-config-geral" class="space-y-4">
                                <div>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="config-tema-escuro" class="w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500">
                                        <span class="ml-2 text-gray-700 dark:text-gray-300">Usar tema escuro</span>
                                    </label>
                                </div>
                                
                                <div>
                                    <label for="config-registros-pagina" class="block mb-1 text-gray-700 dark:text-gray-300 font-medium">Registros por página</label>
                                    <select id="config-registros-pagina" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                                        <option value="10">10</option>
                                        <option value="25">25</option>
                                        <option value="50">50</option>
                                        <option value="100">100</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label for="config-formato-data" class="block mb-1 text-gray-700 dark:text-gray-300 font-medium">Formato de data</label>
                                    <select id="config-formato-data" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                                        <option value="dd/MM/yyyy">DD/MM/AAAA</option>
                                        <option value="MM/dd/yyyy">MM/DD/AAAA</option>
                                        <option value="yyyy-MM-dd">AAAA-MM-DD</option>
                                    </select>
                                </div>
                                
                                <div class="flex justify-end">
                                    <button type="submit" class="px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition">
                                        <i class="fas fa-save mr-2"></i> Salvar Configurações
                                    </button>
                                </div>
                            </form>
                        </div>
                        
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-4">
                            <h3 class="text-lg font-semibold mb-4 text-gray-800 dark:text-white flex items-center">
                                <i class="fas fa-database mr-2 text-primary-500"></i>
                                Gerenciamento de Dados
                            </h3>
                            
                            <form id="form-config-dados" class="space-y-4">
                                <div class="p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
                                    <h4 class="text-base font-medium text-blue-800 dark:text-blue-300 mb-2">Exportar Dados</h4>
                                    <p class="text-sm text-blue-600 dark:text-blue-400 mb-3">
                                        Faça backup de todos os seus dados do sistema em arquivos externos.
                                    </p>
                                    <div class="flex space-x-2">
                                        <button type="button" id="btn-exportar-json" class="px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition flex-1 flex items-center justify-center">
                                            <i class="fas fa-download mr-2"></i> Exportar JSON
                                        </button>
                                        <button type="button" id="btn-exportar-pdf" class="px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition flex-1 flex items-center justify-center">
                                            <i class="fas fa-file-pdf mr-2"></i> Relatório PDF
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg">
                                    <h4 class="text-base font-medium text-yellow-800 dark:text-yellow-300 mb-2">Importar Dados</h4>
                                    <p class="text-sm text-yellow-600 dark:text-yellow-400 mb-3">
                                        Restaure dados a partir de um arquivo de backup JSON.
                                    </p>
                                    <div class="flex items-center space-x-2">
                                        <input type="file" id="input-importar-json" accept=".json" class="hidden">
                                        <button type="button" id="btn-selecionar-arquivo" class="px-3 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg transition flex-1 flex items-center justify-center">
                                            <i class="fas fa-upload mr-2"></i> Selecionar Arquivo
                                        </button>
                                        <button type="button" id="btn-importar-json" class="px-3 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg transition flex-1 flex items-center justify-center" disabled>
                                            <i class="fas fa-file-import mr-2"></i> Importar
                                        </button>
                                    </div>
                                    <p id="arquivo-selecionado" class="text-xs text-gray-500 dark:text-gray-400 mt-2">
                                        Nenhum arquivo selecionado
                                    </p>
                                </div>
                                
                                <div class="p-4 bg-red-50 dark:bg-red-900/20 rounded-lg">
                                    <h4 class="text-base font-medium text-red-800 dark:text-red-300 mb-2">Limpar Dados</h4>
                                    <p class="text-sm text-red-600 dark:text-red-400 mb-3">
                                        Cuidado! Esta ação removerá todos os dados do sistema.
                                    </p>
                                    <button type="button" id="btn-limpar-dados" class="px-3 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition flex items-center justify-center">
                                        <i class="fas fa-trash-alt mr-2"></i> Limpar Todos os Dados
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- Usuarios Content -->
                <div id="content-usuarios" class="content hidden fade-in">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
                        <h2 class="text-2xl font-bold mb-2 md:mb-0 text-gray-800 dark:text-gray-100 flex items-center">
                            <i class="fas fa-users mr-3 text-primary-600 dark:text-primary-400"></i>
                            Gerenciamento de Usuários
                        </h2>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                        <div class="lg:col-span-2">
                            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-4">
                                <h3 class="text-lg font-semibold mb-4 text-gray-800 dark:text-white flex items-center">
                                    <i class="fas fa-user-friends mr-2 text-primary-500"></i>
                                    Lista de Usuários
                                </h3>
                                
                                <div class="overflow-x-auto">
                                    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                        <thead class="bg-gray-50 dark:bg-gray-700">
                                            <tr>
                                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                                    Nome
                                                </th>
                                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                                    Email
                                                </th>
                                                <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                                    Tipo
                                                </th>
                                                <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                                    Ações
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody id="tabela-usuarios" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                            <!-- Será preenchido via JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        
                        <div class="lg:col-span-1">
                            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-4">
                                <h3 class="text-lg font-semibold mb-4 text-gray-800 dark:text-white flex items-center">
                                    <i class="fas fa-user-plus mr-2 text-primary-500"></i>
                                    Adicionar Usuário
                                </h3>
                                
                                <form id="form-usuario" class="space-y-4">
                                    <div>
                                        <label for="nome-usuario" class="block mb-1 text-gray-700 dark:text-gray-300 font-medium">Nome*</label>
                                        <input type="text" id="nome-usuario" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent" required>
                                    </div>
                                    <div>
                                        <label for="email-usuario" class="block mb-1 text-gray-700 dark:text-gray-300 font-medium">Email*</label>
                                        <input type="email" id="email-usuario" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent" required>
                                    </div>
                                    <div>
                                        <label for="senha-usuario" class="block mb-1 text-gray-700 dark:text-gray-300 font-medium">Senha*</label>
                                        <input type="password" id="senha-usuario" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent" required>
                                    </div>
                                    <div>
                                        <label class="block mb-1 text-gray-700 dark:text-gray-300 font-medium">Tipo de Usuário*</label>
                                        <div class="flex space-x-4">
                                            <label class="flex items-center">
                                                <input type="radio" name="tipo-usuario" value="usuario" class="w-4 h-4 text-primary-600 border-gray-300 focus:ring-primary-500" checked>
                                                <span class="ml-2 text-gray-700 dark:text-gray-300">Usuário</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="radio" name="tipo-usuario" value="admin" class="w-4 h-4 text-primary-600 border-gray-300 focus:ring-primary-500">
                                                <span class="ml-2 text-gray-700 dark:text-gray-300">Administrador</span>
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <button type="submit" class="w-full bg-primary-600 hover:bg-primary-700 text-white px-4 py-3 rounded-lg transition">
                                        <i class="fas fa-user-plus mr-2"></i> Adicionar Usuário
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Ajuda Content -->
                <div id="content-ajuda" class="content hidden fade-in">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
                        <h2 class="text-2xl font-bold mb-2 md:mb-0 text-gray-800 dark:text-gray-100 flex items-center">
                            <i class="fas fa-question-circle mr-3 text-primary-600 dark:text-primary-400"></i>
                            Ajuda
                        </h2>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-4">
                            <h3 class="text-lg font-semibold mb-4 text-gray-800 dark:text-white flex items-center">
                                <i class="fas fa-book mr-2 text-primary-500"></i>
                                Guia do Usuário
                            </h3>
                            
                            <div class="space-y-4">
                                <div class="p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                    <h4 class="font-medium text-gray-800 dark:text-white mb-2">Navegação Básica</h4>
                                    <p class="text-gray-600 dark:text-gray-400 text-sm">
                                        O sistema possui um menu lateral com as principais funções. Clique nas opções para navegar entre as páginas.
                                    </p>
                                </div>
                                
                                <div class="p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                    <h4 class="font-medium text-gray-800 dark:text-white mb-2">Dashboard</h4>
                                    <p class="text-gray-600 dark:text-gray-400 text-sm">
                                        No Dashboard você encontra um resumo das atividades de produção, gráficos de acompanhamento e estatísticas gerais.
                                    </p>
                                </div>
                                
                                <div class="p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                    <h4 class="font-medium text-gray-800 dark:text-white mb-2">Registro de Produção</h4>
                                    <p class="text-gray-600 dark:text-gray-400 text-sm">
                                        Para registrar a produção, acesse o menu "Registrar Produção", preencha os dados do formulário e clique em "Salvar Registro".
                                    </p>
                                </div>
                                
                                <div class="p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                    <h4 class="font-medium text-gray-800 dark:text-white mb-2">Histórico e Relatórios</h4>
                                    <p class="text-gray-600 dark:text-gray-400 text-sm">
                                        Na opção "Histórico" você pode visualizar todos os registros de produção, aplicar filtros e exportar relatórios.
                                    </p>
                                </div>
                            </div>
                            
                            <button class="mt-4 w-full bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg transition flex items-center justify-center">
                                <i class="fas fa-download mr-2"></i> Baixar Manual Completo
                            </button>
                        </div>
                        
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-4">
                            <h3 class="text-lg font-semibold mb-4 text-gray-800 dark:text-white flex items-center">
                                <i class="fas fa-headset mr-2 text-primary-500"></i>
                                Suporte Técnico
                            </h3>
                            
                            <div class="space-y-4">
                                <div class="p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
                                    <h4 class="font-medium text-blue-800 dark:text-blue-300 mb-2">Contato por Email</h4>
                                    <p class="text-blue-600 dark:text-blue-400 text-sm mb-2">
                                        Envie suas dúvidas ou sugestões para nossa equipe de suporte.
                                    </p>
                                    <a href="mailto:suporte@ggomes.com" class="text-blue-700 dark:text-blue-300 flex items-center">
                                        <i class="fas fa-envelope mr-2"></i>
                                        suporte@ggomes.com
                                    </a>
                                </div>
                                
                                <div class="p-4 bg-green-50 dark:bg-green-900/20 rounded-lg">
                                    <h4 class="font-medium text-green-800 dark:text-green-300 mb-2">WhatsApp</h4>
                                    <p class="text-green-600 dark:text-green-400 text-sm mb-2">
                                        Suporte rápido via WhatsApp, disponível em horário comercial.
                                    </p>
                                    <a href="#" class="text-green-700 dark:text-green-300 flex items-center">
                                        <i class="fab fa-whatsapp mr-2"></i>
                                        https://wa.me/qr/LYOCAWNAYOUWJ1
                                    </a>
                                </div>
                                
                                <div class="p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg">
                                    <h4 class="font-medium text-purple-800 dark:text-purple-300 mb-2">Tutoriais em Vídeo</h4>
                                    <p class="text-purple-600 dark:text-purple-400 text-sm">
                                        Acesse nossa biblioteca de vídeos tutoriais para aprender a utilizar o sistema.
                                    </p>
                                    <button class="mt-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition w-full flex items-center justify-center">
                                        <i class="fas fa-play-circle mr-2"></i>
                                        Assistir Tutoriais
                                    </button>
                                </div>
                            </div>
                            
                            <button id="btn-help-tutorial" class="mt-4 w-full bg-accent-500 hover:bg-accent-600 text-white px-4 py-2 rounded-lg transition flex items-center justify-center">
                                <i class="fas fa-question-circle mr-2"></i> Iniciar Tutorial Interativo
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Mapa Content -->
                <div id="content-mapa" class="content hidden fade-in">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
                        <h2 class="text-2xl font-bold mb-2 md:mb-0 text-gray-800 dark:text-gray-100 flex items-center">
                            <i class="fas fa-map-marked-alt mr-3 text-primary-600 dark:text-primary-400"></i>
                            Mapa de Operações
                        </h2>
                    </div>
                    
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-4 mb-6">
                        <div class="flex flex-col md:flex-row justify-between items-center space-y-2 md:space-y-0 mb-4">
                            <h3 class="text-lg font-semibold text-gray-800 dark:text-white">
                                Visão Geográfica
                            </h3>
                            <div class="flex items-center space-x-2">
                                <select id="map-view-type" class="bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-sm px-3 py-1.5">
                                    <option value="satellite">Satélite</option>
                                    <option value="terrain">Terreno</option>
                                    <option value="roadmap">Mapa</option>
                                </select>
                                <button id="btn-refresh-map" class="bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300 p-2 rounded hover:bg-primary-200 dark:hover:bg-primary-800 transition transform hover:scale-105">
                                    <i class="fas fa-sync-alt"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Mapa placeholder - Seria substituído por uma integração real de mapa -->
                        <div class="h-96 rounded-lg overflow-hidden relative">
                            <div class="absolute inset-0 bg-gray-200 dark:bg-gray-700 flex items-center justify-center">
                                <div class="text-center">
                                    <i class="fas fa-map-marked-alt text-5xl mb-4 text-gray-400 dark:text-gray-500"></i>
                                    <p class="text-gray-500 dark:text-gray-400">Mapa de operações seria exibido aqui</p>
                                    <p class="text-sm text-gray-500 dark:text-gray-400 mt-2">Integração com Google Maps ou outra API de mapas</p>
                                </div>
                            </div>
                            <div class="absolute top-4 right-4 z-10">
                                <div class="bg-white dark:bg-gray-800 shadow rounded-lg p-2 space-y-2">
                                    <button class="w-8 h-8 flex items-center justify-center rounded hover:bg-gray-100 dark:hover:bg-gray-700">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                    <button class="w-8 h-8 flex items-center justify-center rounded hover:bg-gray-100 dark:hover:bg-gray-700">
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <button class="w-8 h-8 flex items-center justify-center rounded hover:bg-gray-100 dark:hover:bg-gray-700">
                                        <i class="fas fa-location-arrow"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                        <!-- Lista de áreas -->
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-5">
                            <h3 class="font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
                                <i class="fas fa-map-pin text-red-500 mr-2"></i> 
                                Áreas de Colheita
                            </h3>
                            
                            <div class="space-y-3 max-h-60 overflow-y-auto">
                                <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="font-medium">Área Sul - Soja</p>
                                            <p class="text-sm text-gray-500 dark:text-gray-400">250 hectares</p>
                                        </div>
                                        <div>
                                            <span class="bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 text-xs px-2 py-1 rounded-full">Ativa</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="font-medium">Área Norte - Milho</p>
                                            <p class="text-sm text-gray-500 dark:text-gray-400">180 hectares</p>
                                        </div>
                                        <div>
                                            <span class="bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400 text-xs px-2 py-1 rounded-full">Pendente</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="font-medium">Área Oeste - Trigo</p>
                                            <p class="text-sm text-gray-500 dark:text-gray-400">120 hectares</p>
                                        </div>
                                        <div>
                                            <span class="bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400 text-xs px-2 py-1 rounded-full">Planejada</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <button class="mt-4 bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg w-full flex items-center justify-center transition transform hover:scale-105">
                                <i class="fas fa-plus-circle mr-2"></i>
                                Adicionar Nova Área
                            </button>
                        </div>
                        
                        <!-- Localização de colhedoras -->
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-5">
                            <h3 class="font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
                                <i class="fas fa-tractor text-primary-500 mr-2"></i> 
                                Colhedoras Ativas
                            </h3>
                            
                            <div class="space-y-3 max-h-60 overflow-y-auto">
                                <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="font-medium">Colhedora 001</p>
                                            <p class="text-sm text-gray-500 dark:text-gray-400">Área Sul - Em atividade</p>
                                        </div>
                                        <div>
                                            <span class="inline-block h-3 w-3 bg-green-500 rounded-full"></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="font-medium">Colhedora 002</p>
                                            <p class="text-sm text-gray-500 dark:text-gray-400">Área Sul - Em pausa</p>
                                        </div>
                                        <div>
                                            <span class="inline-block h-3 w-3 bg-yellow-500 rounded-full"></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="font-medium">Colhedora 003</p>
                                            <p class="text-sm text-gray-500 dark:text-gray-400">Em manutenção</p>
                                        </div>
                                        <div>
                                            <span class="inline-block h-3 w-3 bg-red-500 rounded-full"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mt-4 bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg">
                                <div class="flex items-start">
                                    <i class="fas fa-info-circle text-blue-500 mt-0.5 mr-2"></i>
                                    <div>
                                        <p class="text-sm text-blue-700 dark:text-blue-400">Localização em tempo real requer instalação do GPS nas colhedoras</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Análise de área -->
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-5">
                            <h3 class="font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
                                <i class="fas fa-chart-area text-accent-500 mr-2"></i> 
                                Análise de Cobertura
                            </h3>
                            
                            <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-3">
                                <h4 class="font-medium text-gray-800 dark:text-gray-200 mb-2">Área Sul - Progresso</h4>
                                <div class="flex items-center mb-1 justify-between">
                                    <span class="text-sm text-gray-600 dark:text-gray-400">Progresso:</span>
                                    <span class="text-sm font-medium">75%</span>
                                </div>
                                <div class="w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2">
                                    <div class="bg-green-500 h-2 rounded-full" style="width: 75%"></div>
                                </div>
                                <div class="mt-2 flex justify-between text-xs text-gray-500 dark:text-gray-400">
                                    <span>Área coberta: 187.5 ha</span>
                                    <span>Restante: 62.5 ha</span>
                                </div>
                            </div>
                            
                            <!-- Estatísticas de eficiência -->
                            <div class="grid grid-cols-2 gap-2 mb-3">
                                <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-lg text-center">
                                    <p class="text-sm text-gray-500 dark:text-gray-400">Rendimento Médio</p>
                                    <p class="font-bold text-lg text-primary-700 dark:text-primary-300">8.5 ha/h</p>
                                </div>
                                <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-lg text-center">
                                    <p class="text-sm text-gray-500 dark:text-gray-400">Tempo Estimado</p>
                                    <p class="font-bold text-lg text-primary-700 dark:text-primary-300">7.4 h</p>
                                </div>
                            </div>
                            
                            <button class="mt-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg w-full flex items-center justify-center hover:bg-gray-200 dark:hover:bg-gray-600 transition">
                                <i class="fas fa-file-download mr-2"></i>
                                Exportar Relatório
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Notifications Panel -->
    <div id="notifications-panel" class="fixed inset-y-0 right-0 w-80 bg-white dark:bg-gray-800 shadow-xl transform translate-x-full transition-transform duration-300 ease-in-out z-50">
        <div class="flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700">
            <h3 class="font-semibold text-lg">Notificações</h3>
            <button id="close-notifications" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="overflow-y-auto h-full pb-20">
            <div class="p-4">
                <div class="mb-4">
                    <h4 class="text-xs uppercase font-semibold text-gray-500 dark:text-gray-400 mb-2">Hoje</h4>
                    <div class="space-y-3 notificacoes-hoje">
                        <div class="bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg">
                            <div class="flex">
                                <div class="flex-shrink-0 mr-3">
                                    <div class="h-9 w-9 rounded-full bg-blue-100 dark:bg-blue-800 flex items-center justify-center">
                                        <i class="fas fa-clipboard-check text-blue-600 dark:text-blue-400"></i>
                                    </div>
                                </div>
                                <div>
                                    <p class="text-sm font-medium text-gray-800 dark:text-gray-200">Colheita Completa</p>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Área Sul - Setor 3 finalizado</p>
                                    <p class="text-xs text-gray-400 dark:text-gray-500 mt-1">10 minutos atrás</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded-lg">
                            <div class="flex">
                                <div class="flex-shrink-0 mr-3">
                                    <div class="h-9 w-9 rounded-full bg-yellow-100 dark:bg-yellow-800 flex items-center justify-center">
                                        <i class="fas fa-exclamation-triangle text-yellow-600 dark:text-yellow-400"></i>
                                    </div>
                                </div>
                                <div>
                                    <p class="text-sm font-medium text-gray-800 dark:text-gray-200">Alerta de Manutenção</p>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Colhedora 001 - Próximo ao limite de horas</p>
                                    <p class="text-xs text-gray-400 dark:text-gray-500 mt-1">2 horas atrás</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h4 class="text-xs uppercase font-semibold text-gray-500 dark:text-gray-400 mb-2">Anteriores</h4>
                    <div class="space-y-3 notificacoes-anteriores">
                        <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">
                            <div class="flex">
                                <div class="flex-shrink-0 mr-3">
                                    <div class="h-9 w-9 rounded-full bg-gray-200 dark:bg-gray-600 flex items-center justify-center">
                                        <i class="fas fa-user text-gray-600 dark:text-gray-400"></i>
                                    </div>
                                </div>
                                <div>
                                    <p class="text-sm font-medium text-gray-800 dark:text-gray-200">Novo Usuário</p>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">João Silva foi adicionado como usuário</p>
                                    <p class="text-xs text-gray-400 dark:text-gray-500 mt-1">Ontem</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-green-50 dark:bg-green-900/20 p-3 rounded-lg">
                            <div class="flex">
                                <div class="flex-shrink-0 mr-3">
                                    <div class="h-9 w-9 rounded-full bg-green-100 dark:bg-green-800 flex items-center justify-center">
                                        <i class="fas fa-chart-line text-green-600 dark:text-green-400"></i>
                                    </div>
                                </div>
                                <div>
                                    <p class="text-sm font-medium text-gray-800 dark:text-gray-200">Meta Alcançada</p>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Meta semanal de produção atingida</p>
                                    <p class="text-xs text-gray-400 dark:text-gray-500 mt-1">2 dias atrás</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800">
            <button class="w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-medium py-2 px-4 rounded-lg transition">
                Marcar todas como lidas
            </button>
        </div>
    </div>
    
    <!-- Ajuda overlay (Nova funcionalidade) -->
    <div id="help-overlay" class="fixed inset-0 bg-black bg-opacity-70 z-50 hidden flex items-center justify-center">
        <div class="bg-white dark:bg-gray-800 rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-gray-800 dark:text-white">Ajuda Rápida</h3>
                <button id="close-help" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="space-y-6">
                <div>
                    <h4 class="text-lg font-semibold mb-2 text-gray-800 dark:text-white">Navegação Básica</h4>
                    <ul class="space-y-2 text-gray-600 dark:text-gray-400">
                        <li class="flex items-start">
                            <i class="fas fa-chart-line text-primary-500 mt-1 mr-3"></i>
                            <span><b>Dashboard:</b> Visualize métricas gerais e gráficos com indicadores de produção.</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-tractor text-primary-500 mt-1 mr-3"></i>
                            <span><b>Colhedoras:</b> Gerencie o cadastro de colhedoras e veja estatísticas por equipamento.</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-cube text-primary-500 mt-1 mr-3"></i>
                            <span><b>Registrar Produção:</b> Adicione novos registros de produção e visualize resumos.</span>
                        </li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="text-lg font-semibold mb-2 text-gray-800 dark:text-white">Dicas Rápidas</h4>
                    <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg space-y-3">
                        <p class="flex items-start">
                            <i class="fas fa-lightbulb text-yellow-500 mt-1 mr-3"></i>
                            <span>Use o botão de exportação para baixar relatórios em PDF ou dados em formato JSON.</span>
                        </p>
                        <p class="flex items-start">
                            <i class="fas fa-lightbulb text-yellow-500 mt-1 mr-3"></i>
                            <span>Alterne entre tema claro e escuro com o botão na barra de navegação.</span>
                        </p>
                        <p class="flex items-start">
                            <i class="fas fa-lightbulb text-yellow-500 mt-1 mr-3"></i>
                            <span>Para visualizar dados históricos, use os filtros disponíveis na página de Registros.</span>
                        </p>
                    </div>
                </div>
                
                <div>
                    <h4 class="text-lg font-semibold mb-2 text-gray-800 dark:text-white">Precisa de mais ajuda?</h4>
                    <p class="text-gray-600 dark:text-gray-400 mb-4">Entre em contato com o suporte técnico para assistência adicional.</p>
                    <div class="flex space-x-3">
                        <button class="bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg transition flex-1 flex items-center justify-center">
                            <i class="fas fa-envelope mr-2"></i>
                            Email de Suporte
                        </button>
                        <button class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition flex-1 flex items-center justify-center">
                            <i class="fab fa-whatsapp mr-2"></i>
                            WhatsApp
                        </button>
                    </div>
                </div>
                
                <!-- Tutorial interativo -->
                <div class="mt-4 border-t border-gray-200 dark:border-gray-700 pt-4">
                    <button id="start-tutorial" class="w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg transition flex items-center justify-center">
                        <i class="fas fa-play-circle mr-2"></i>
                        Iniciar Tutorial Interativo
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal de Confirmação para Limpar Dados -->
    <div id="modal-limpar-dados" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center p-4 z-50">
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md p-6 transform transition-all duration-300 scale-100">
            <div class="mb-6">
                <div class="flex items-center justify-center mb-4 text-red-500">
                    <i class="fas fa-exclamation-circle text-5xl"></i>
                </div>
                <h2 class="text-xl font-semibold mb-2 text-gray-800 dark:text-gray-100 text-center">Atenção!</h2>
                <p class="text-gray-600 dark:text-gray-300 text-center mb-2">Você está prestes a apagar <strong>todos os dados</strong> do sistema.</p>
                <p class="text-gray-600 dark:text-gray-300 text-center font-bold">Esta ação é irreversível!</p>
            </div>
            
            <!-- Confirmação por digitação -->
            <div class="mb-4">
                <label for="confirmacao-texto" class="block mb-1 text-gray-700 dark:text-gray-300 text-sm">Digite "CONFIRMAR" para continuar:</label>
                <input type="text" id="confirmacao-texto" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white text-base focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent">
            </div>
            
            <div class="flex justify-center space-x-4">
                <button type="button" id="btn-cancelar-limpar" class="px-4 py-3 bg-gray-300 hover:bg-gray-400 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg transition flex-1 font-medium">
                    Cancelar
                </button>
                <button type="button" id="btn-confirmar-limpar" class="px-4 py-3 bg-red-600 opacity-50 cursor-not-allowed text-white rounded-lg transition flex-1 flex items-center justify-center font-medium" disabled>
                    <i class="fas fa-trash-alt mr-2"></i>
                    Limpar Tudo
                </button>
            </div>
        </div>
    </div>
    
    <!-- Modal de Exclusão de Usuário -->
    <div id="modal-excluir-usuario" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md p-6 transform transition-all scale-100">
                <div class="mb-6">
                    <div class="flex items-center justify-center mb-4 text-red-500">
                        <i class="fas fa-user-times text-5xl"></i>
                    </div>
                    <h2 class="text-xl font-semibold mb-2 text-gray-800 dark:text-gray-100 text-center">Excluir Usuário</h2>
                    <p class="text-gray-600 dark:text-gray-300 text-center">Tem certeza que deseja excluir este usuário? Esta ação não pode ser desfeita.</p>
                </div>
                
                <input type="hidden" id="usuario-excluir-id">
                
                <div class="flex justify-center space-x-4">
                    <button type="button" id="btn-cancelar-excluir-usuario" class="px-4 py-3 bg-gray-300 hover:bg-gray-400 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg transition flex-1 font-medium">
                        Cancelar
                    </button>
                    <button type="button" id="btn-confirmar-excluir-usuario" class="px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg transition flex-1 flex items-center justify-center font-medium">
                        <i class="fas fa-trash-alt mr-2"></i>
                        Excluir
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Verificação de suporte ao localStorage
        function checkLocalStorageSupport() {
            try {
                const test = 'test';
                localStorage.setItem(test, test);
                localStorage.removeItem(test);
                return true;
            } catch (e) {
                console.error("LocalStorage não está disponível:", e);
                return false;
            }
        }
        
        // Simulação de banco de dados usando localStorage
        const DB = {
            // Usuário padrão admin
            defaultAdmin: {
                id: "admin-1",
                name: "Administrador",
                email: "admin@ggomes.com",
                password: "admin123",
                isAdmin: true,
                createdAt: new Date().toISOString()
            },
            
            // Inicializa o banco de dados local
            init() {
                if (!checkLocalStorageSupport()) {
                    mostrarToast("Seu navegador não suporta armazenamento local. O sistema pode não funcionar corretamente.", "error");
                    return;
                }
                
                try {
                    // Verificar se já existe algum dado
                    if (!localStorage.getItem('ggomes_users')) {
                        // Criar usuário admin padrão
                        localStorage.setItem('ggomes_users', JSON.stringify([this.defaultAdmin]));
                    }
                    
                    // Inicializar outras coleções se não existirem
                    if (!localStorage.getItem('ggomes_colhedoras')) {
                        localStorage.setItem('ggomes_colhedoras', JSON.stringify([]));
                    }
                    
                    if (!localStorage.getItem('ggomes_registros')) {
                        localStorage.setItem('ggomes_registros', JSON.stringify([]));
                    }
                    
                    if (!localStorage.getItem('ggomes_caminhoes')) {
                        localStorage.setItem('ggomes_caminhoes', JSON.stringify([]));
                    }
                    
                    // Inicializar configurações
                    if (!localStorage.getItem('ggomes_config')) {
                        localStorage.setItem('ggomes_config', JSON.stringify({
                            registrosPorPagina: 10,
                            formatoData: 'dd/MM/yyyy',
                            temaEscuro: document.documentElement.classList.contains('dark')
                        }));
                    }
                    
                    // Inicializar notificações
                    if (!localStorage.getItem('ggomes_notifications')) {
                        localStorage.setItem('ggomes_notifications', JSON.stringify([]));
                    }
                } catch (error) {
                    console.error("Erro ao inicializar o banco de dados:", error);
                    mostrarToast("Erro ao inicializar o sistema. Verifique o console para mais detalhes.", "error");
                }
            },
            
            // Funções para usuários
            users: {
                getAll() {
                    try {
                        return JSON.parse(localStorage.getItem('ggomes_users') || '[]');
                    } catch (e) {
                        console.error("Erro ao obter usuários:", e);
                        return [];
                    }
                },
                
                get(id) {
                    try {
                        const users = this.getAll();
                        return users.find(user => user.id === id) || null;
                    } catch (e) {
                        console.error("Erro ao obter usuário:", e);
                        return null;
                    }
                },
                
                getByEmail(email) {
                    try {
                        if (!email) return null;
                        const users = this.getAll();
                        return users.find(user => user.email.toLowerCase() === email.toLowerCase()) || null;
                    } catch (e) {
                        console.error("Erro ao obter usuário por email:", e);
                        return null;
                    }
                },
                
                add(user) {
                    try {
                        const users = this.getAll();
                        
                        // Gerar ID único
                        user.id = 'user-' + Date.now();
                        
                        // Adicionar data de criação
                        user.createdAt = new Date().toISOString();
                        
                        users.push(user);
                        localStorage.setItem('ggomes_users', JSON.stringify(users));
                        return user;
                    } catch (e) {
                        console.error("Erro ao adicionar usuário:", e);
                        throw new Error("Não foi possível adicionar o usuário");
                    }
                },
                
                update(user) {
                    try {
                        const users = this.getAll();
                        const index = users.findIndex(u => u.id === user.id);
                        
                        if (index !== -1) {
                            users[index] = { ...users[index], ...user };
                            localStorage.setItem('ggomes_users', JSON.stringify(users));
                            return users[index];
                        }
                        
                        return null;
                    } catch (e) {
                        console.error("Erro ao atualizar usuário:", e);
                        throw new Error("Não foi possível atualizar o usuário");
                    }
                },
                
                remove(id) {
                    try {
                        let users = this.getAll();
                        users = users.filter(user => user.id !== id);
                        localStorage.setItem('ggomes_users', JSON.stringify(users));
                    } catch (e) {
                        console.error("Erro ao remover usuário:", e);
                        throw new Error("Não foi possível remover o usuário");
                    }
                }
            },
            
            // Funções para colhedoras
            colhedoras: {
                getAll() {
                    try {
                        return JSON.parse(localStorage.getItem('ggomes_colhedoras') || '[]');
                    } catch (e) {
                        console.error("Erro ao obter colhedoras:", e);
                        return [];
                    }
                },
                
                get(id) {
                    try {
                        const colhedoras = this.getAll();
                        return colhedoras.find(c => c.id === id) || null;
                    } catch (e) {
                        console.error("Erro ao obter colhedora:", e);
                        return null;
                    }
                },
                
                add(colhedora) {
                    try {
                        const colhedoras = this.getAll();
                        
                        // Verificar se ID já existe
                        if (colhedoras.some(c => c.id === colhedora.id)) {
                            throw new Error("Colhedora com este ID já existe");
                        }
                        
                        colhedoras.push(colhedora);
                        localStorage.setItem('ggomes_colhedoras', JSON.stringify(colhedoras));
                        return colhedora;
                    } catch (e) {
                        console.error("Erro ao adicionar colhedora:", e);
                        throw e;
                    }
                },
                
                update(colhedora) {
                    try {
                        const colhedoras = this.getAll();
                        const index = colhedoras.findIndex(c => c.id === colhedora.id);
                        
                        if (index !== -1) {
                            colhedoras[index] = colhedora;
                            localStorage.setItem('ggomes_colhedoras', JSON.stringify(colhedoras));
                            return colhedora;
                        }
                        
                        return null;
                    } catch (e) {
                        console.error("Erro ao atualizar colhedora:", e);
                        throw new Error("Não foi possível atualizar a colhedora");
                    }
                },
                
                remove(id) {
                    try {
                        let colhedoras = this.getAll();
                        colhedoras = colhedoras.filter(c => c.id !== id);
                        localStorage.setItem('ggomes_colhedoras', JSON.stringify(colhedoras));
                    } catch (e) {
                        console.error("Erro ao remover colhedora:", e);
                        throw new Error("Não foi possível remover a colhedora");
                    }
                }
            },
            
            // Funções para registros
            registros: {
                getAll() {
                    try {
                        return JSON.parse(localStorage.getItem('ggomes_registros') || '[]');
                    } catch (e) {
                        console.error("Erro ao obter registros:", e);
                        return [];
                    }
                },
                
                get(id) {
                    try {
                        const registros = this.getAll();
                        return registros.find(r => r.id === id) || null;
                    } catch (e) {
                        console.error("Erro ao obter registro:", e);
                        return null;
                    }
                },
                
                add(registro) {
                    try {
                        const registros = this.getAll();
                        
                        // Gerar ID único
                        registro.id = 'reg-' + Date.now();
                        
                        // Adicionar data de criação
                        registro.createdAt = new Date().toISOString();
                        
                        registros.push(registro);
                        localStorage.setItem('ggomes_registros', JSON.stringify(registros));
                        
                        // Adicionar notificação para o novo registro
                        const notificacao = {
                            id: 'notif-' + Date.now(),
                            tipo: 'info',
                            titulo: 'Novo Registro de Produção',
                            mensagem: `Registro adicionado: ${registro.colhedoraId} - ${registro.quantidade}T de ${registro.cultura || 'produção'}`,
                            dataHora: new Date().toISOString(),
                            lida: false
                        };
                        DB.notifications.add(notificacao);
                        
                        return registro;
                    } catch (e) {
                        console.error("Erro ao adicionar registro:", e);
                        throw new Error("Não foi possível adicionar o registro");
                    }
                },
                
                update(registro) {
                    try {
                        const registros = this.getAll();
                        const index = registros.findIndex(r => r.id === registro.id);
                        
                        if (index !== -1) {
                            registros[index] = registro;
                            localStorage.setItem('ggomes_registros', JSON.stringify(registros));
                            return registro;
                        }
                        
                        return null;
                    } catch (e) {
                        console.error("Erro ao atualizar registro:", e);
                        throw new Error("Não foi possível atualizar o registro");
                    }
                },
                
                remove(id) {
                    try {
                        let registros = this.getAll();
                        registros = registros.filter(r => r.id !== id);
                        localStorage.setItem('ggomes_registros', JSON.stringify(registros));
                    } catch (e) {
                        console.error("Erro ao remover registro:", e);
                        throw new Error("Não foi possível remover o registro");
                    }
                },
                
                // Novo método: obter registros por período
                getByPeriod(days) {
                    try {
                        const registros = this.getAll();
                        if (!days) return registros;
                        
                        const today = new Date();
                        const startDate = new Date();
                        startDate.setDate(today.getDate() - days);
                        
                        return registros.filter(r => {
                            const regDate = new Date(r.data);
                            return regDate >= startDate && regDate <= today;
                        });
                    } catch (e) {
                        console.error("Erro ao obter registros por período:", e);
                        return [];
                    }
                },
                
                // Novo método: calcular tendências
                getTrends(currentPeriodDays) {
                    try {
                        // Obter registros do período atual
                        const currentRegistros = this.getByPeriod(currentPeriodDays);
                        
                        // Obter registros do período anterior de mesma duração
                        const today = new Date();
                        const previousEndDate = new Date();
                        previousEndDate.setDate(today.getDate() - currentPeriodDays);
                        
                        const previousStartDate = new Date();
                        previousStartDate.setDate(previousEndDate.getDate() - currentPeriodDays);
                        
                        const allRegistros = this.getAll();
                        const previousRegistros = allRegistros.filter(r => {
                            const regDate = new Date(r.data);
                            return regDate >= previousStartDate && regDate <= previousEndDate;
                        });
                        
                        // Calcular totais atuais
                        let currentTotalColhido = 0;
                        let currentAreaTotal = 0;
                        let currentHorasTotal = 0;
                        
                        currentRegistros.forEach(reg => {
                            currentTotalColhido += Number(reg.quantidade) || 0;
                            currentAreaTotal += Number(reg.area) || 0;
                            currentHorasTotal += Number(reg.horas) || 0;
                        });
                        
                        // Calcular totais do período anterior
                        let previousTotalColhido = 0;
                        let previousAreaTotal = 0;
                        let previousHorasTotal = 0;
                        
                        previousRegistros.forEach(reg => {
                            previousTotalColhido += Number(reg.quantidade) || 0;
                            previousAreaTotal += Number(reg.area) || 0;
                            previousHorasTotal += Number(reg.horas) || 0;
                        });
                        
                        // Calcular produtividade e rendimento médios por colhedora
                        const currentColhedoras = new Map();
                        const previousColhedoras = new Map();
                        
                        // Inicializar dados para o cálculo da média de produtividade/rendimento para período atual
                        currentRegistros.forEach(reg => {
                            if (!reg.colhedoraId) return;
                            
                            if (!currentColhedoras.has(reg.colhedoraId)) {
                                currentColhedoras.set(reg.colhedoraId, {
                                    quantidade: 0,
                                    area: 0,
                                    horas: 0
                                });
                            }
                            
                            const stats = currentColhedoras.get(reg.colhedoraId);
                            stats.quantidade += Number(reg.quantidade) || 0;
                            stats.area += Number(reg.area) || 0;
                            stats.horas += Number(reg.horas) || 0;
                        });
                        
                        // Inicializar dados para o cálculo da média de produtividade/rendimento para período anterior
                        previousRegistros.forEach(reg => {
                            if (!reg.colhedoraId) return;
                            
                            if (!previousColhedoras.has(reg.colhedoraId)) {
                                previousColhedoras.set(reg.colhedoraId, {
                                    quantidade: 0,
                                    area: 0,
                                    horas: 0
                                });
                            }
                            
                            const stats = previousColhedoras.get(reg.colhedoraId);
                            stats.quantidade += Number(reg.quantidade) || 0;
                            stats.area += Number(reg.area) || 0;
                            stats.horas += Number(reg.horas) || 0;
                        });
                        
                        // Calcular produtividade para cada colhedora e média total (período atual)
                        let currentProdutividadeTotal = 0;
                        let currentColhedorasComArea = 0;
                        
                        currentColhedoras.forEach(stats => {
                            if (stats.area > 0) {
                                stats.produtividade = stats.quantidade / stats.area;
                                currentProdutividadeTotal += stats.produtividade;
                                currentColhedorasComArea++;
                            }
                        });
                        
                        const currentProdutividade = currentColhedorasComArea > 0 
                            ? currentProdutividadeTotal / currentColhedorasComArea 
                            : 0;
                        
                        // Calcular rendimento para cada colhedora e média total (período atual)
                        let currentRendimentoTotal = 0;
                        let currentColhedorasComHoras = 0;
                        
                        currentColhedoras.forEach(stats => {
                            if (stats.horas > 0) {
                                stats.rendimento = stats.quantidade / stats.horas;
                                currentRendimentoTotal += stats.rendimento;
                                currentColhedorasComHoras++;
                            }
                        });
                        
                        const currentRendimento = currentColhedorasComHoras > 0 
                            ? currentRendimentoTotal / currentColhedorasComHoras 
                            : 0;
                        
                        // Calcular produtividade para cada colhedora e média total (período anterior)
                        let previousProdutividadeTotal = 0;
                        let previousColhedorasComArea = 0;
                        
                        previousColhedoras.forEach(stats => {
                            if (stats.area > 0) {
                                stats.produtividade = stats.quantidade / stats.area;
                                previousProdutividadeTotal += stats.produtividade;
                                previousColhedorasComArea++;
                            }
                        });
                        
                        const previousProdutividade = previousColhedorasComArea > 0 
                            ? previousProdutividadeTotal / previousColhedorasComArea 
                            : 0;
                        
                        // Calcular rendimento para cada colhedora e média total (período anterior)
                        let previousRendimentoTotal = 0;
                        let previousColhedorasComHoras = 0;
                        
                        previousColhedoras.forEach(stats => {
                            if (stats.horas > 0) {
                                stats.rendimento = stats.quantidade / stats.horas;
                                previousRendimentoTotal += stats.rendimento;
                                previousColhedorasComHoras++;
                            }
                        });
                        
                        const previousRendimento = previousColhedorasComHoras > 0 
                            ? previousRendimentoTotal / previousColhedorasComHoras 
                            : 0;
                        
                        // Calcular tendências (variação percentual)
                        const calcPercentChange = (current, previous) => {
                            if (previous === 0) return current > 0 ? 100 : 0;
                            return ((current - previous) / previous) * 100;
                        };
                        
                        return {
                            totalColhido: {
                                current: currentTotalColhido,
                                previous: previousTotalColhido,
                                change: calcPercentChange(currentTotalColhido, previousTotalColhido)
                            },
                            areaTotal: {
                                current: currentAreaTotal,
                                previous: previousAreaTotal,
                                change: calcPercentChange(currentAreaTotal, previousAreaTotal)
                            },
                            produtividade: {
                                current: currentProdutividade,
                                previous: previousProdutividade,
                                change: calcPercentChange(currentProdutividade, previousProdutividade)
                            },
                            rendimento: {
                                current: currentRendimento,
                                previous: previousRendimento,
                                change: calcPercentChange(currentRendimento, previousRendimento)
                            },
                            totalRegistros: {
                                current: currentRegistros.length,
                                previous: previousRegistros.length,
                                change: calcPercentChange(currentRegistros.length, previousRegistros.length)
                            }
                        };
                    } catch (e) {
                        console.error("Erro ao calcular tendências:", e);
                        return null;
                    }
                },
                
                // Obter dados para gráficos temporais
                getTimeSeriesData(days) {
                    try {
                        const registros = this.getByPeriod(days);
                        
                        // Agrupar por data
                        const dataMap = new Map();
                        
                        // Criar datas para todo o período solicitado
                        const today = new Date();
                        for (let i = days; i >= 0; i--) {
                            const date = new Date();
                            date.setDate(today.getDate() - i);
                            const dateString = date.toISOString().split('T')[0];
                            dataMap.set(dateString, {
                                date: dateString,
                                quantidade: 0,
                                area: 0
                            });
                        }
                        
                        // Preencher dados reais
                        registros.forEach(reg => {
                            const dateString = reg.data;
                            if (dataMap.has(dateString)) {
                                const dayData = dataMap.get(dateString);
                                dayData.quantidade += Number(reg.quantidade) || 0;
                                dayData.area += Number(reg.area) || 0;
                            }
                        });
                        
                        // Converter para array ordenado por data
                        return Array.from(dataMap.values()).sort((a, b) => {
                            return new Date(a.date) - new Date(b.date);
                        });
                    } catch (e) {
                        console.error("Erro ao obter dados de série temporal:", e);
                        return [];
                    }
                },
                
                // Obter estatísticas por categoria
                getStatsByCategory(category = 'cultura', period = null) {
                    try {
                        const registros = period ? this.getByPeriod(period) : this.getAll();
                        
                        // Agrupar por categoria (ex: cultura)
                        const categoryMap = new Map();
                        
                        registros.forEach(reg => {
                            const categoryValue = reg[category] || 'Não especificado';
                            
                            if (!categoryMap.has(categoryValue)) {
                                categoryMap.set(categoryValue, {
                                    name: categoryValue,
                                    quantidade: 0,
                                    area: 0,
                                    horas: 0,
                                    registros: 0
                                });
                            }
                            
                            const stats = categoryMap.get(categoryValue);
                            stats.quantidade += Number(reg.quantidade) || 0;
                            stats.area += Number(reg.area) || 0;
                            stats.horas += Number(reg.horas) || 0;
                            stats.registros += 1;
                        });
                        
                        // Calcular produtividade e rendimento
                        categoryMap.forEach(stats => {
                            stats.produtividade = stats.area > 0 ? stats.quantidade / stats.area : 0;
                            stats.rendimento = stats.horas > 0 ? stats.quantidade / stats.horas : 0;
                        });
                        
                        // Converter para array
                        return Array.from(categoryMap.values());
                    } catch (e) {
                        console.error(`Erro ao obter estatísticas por ${category}:`, e);
                        return [];
                    }
                },
                
                // Obter melhores desempenhos
                getBestPerformers(period = null) {
                    try {
                        // Estatísticas por colhedora
                        const colhedoraStats = this.getStatsByCategory('colhedoraId', period);
                        
                        // Estatísticas por cultura
                        const culturaStats = this.getStatsByCategory('cultura', period);
                        
                        // Encontrar os melhores desempenhos
                        const bestProductivityColhedora = colhedoraStats.reduce((best, current) => 
                            (current.produtividade > best.produtividade) ? current : best, 
                            { produtividade: 0 });
                        
                        const bestVolumeColhedora = colhedoraStats.reduce((best, current) => 
                            (current.quantidade > best.quantidade) ? current : best, 
                            { quantidade: 0 });
                            
                        const bestYieldColhedora = colhedoraStats.reduce((best, current) => 
                            (current.rendimento > best.rendimento) ? current : best, 
                            { rendimento: 0 });
                            
                        const bestProductivityCultura = culturaStats.reduce((best, current) => 
                            (current.produtividade > best.produtividade) ? current : best, 
                            { produtividade: 0 });
                        
                        const bestVolumeCultura = culturaStats.reduce((best, current) => 
                            (current.quantidade > best.quantidade) ? current : best, 
                            { quantidade: 0 });
                            
                        const bestAreaCultura = culturaStats.reduce((best, current) => 
                            (current.area > best.area) ? current : best, 
                            { area: 0 });
                        
                        return {
                            colhedoras: {
                                bestProductivity: bestProductivityColhedora,
                                bestVolume: bestVolumeColhedora,
                                bestYield: bestYieldColhedora,
                                all: colhedoraStats
                            },
                            culturas: {
                                bestProductivity: bestProductivityCultura,
                                bestVolume: bestVolumeCultura,
                                bestArea: bestAreaCultura,
                                all: culturaStats
                            }
                        };
                    } catch (e) {
                        console.error("Erro ao obter melhores desempenhos:", e);
                        return null;
                    }
                }
            },
            
            // Funções para caminhões
            caminhoes: {
                getAll() {
                    try {
                        return JSON.parse(localStorage.getItem('ggomes_caminhoes') || '[]');
                    } catch (e) {
                        console.error("Erro ao obter caminhões:", e);
                        return [];
                    }
                },
                
                get(id) {
                    try {
                        const caminhoes = this.getAll();
                        return caminhoes.find(c => c.id === id) || null;
                    } catch (e) {
                        console.error("Erro ao obter caminhão:", e);
                        return null;
                    }
                },
                
                add(caminhao) {
                    try {
                        const caminhoes = this.getAll();
                        
                        // Gerar ID único
                        caminhao.id = 'cam-' + Date.now();
                        
                        // Adicionar data de criação
                        caminhao.createdAt = new Date().toISOString();
                        
                        caminhoes.push(caminhao);
                        localStorage.setItem('ggomes_caminhoes', JSON.stringify(caminhoes));
                        
                        // Adicionar notificação
                        if (Number(caminhao.tempoCampo) > 120 || Number(caminhao.tempoPatio) > 60) {
                            const notificacao = {
                                id: 'notif-' + Date.now(),
                                tipo: 'warning',
                                titulo: 'Tempo de Caminhão Elevado',
                                mensagem: `Caminhão ${caminhao.idCaminhao} registrou tempo acima do esperado`,
                                dataHora: new Date().toISOString(),
                                lida: false
                            };
                            DB.notifications.add(notificacao);
                        }
                        
                        return caminhao;
                    } catch (e) {
                        console.error("Erro ao adicionar caminhão:", e);
                        throw new Error("Não foi possível adicionar o caminhão");
                    }
                },
                
                update(caminhao) {
                    try {
                        const caminhoes = this.getAll();
                        const index = caminhoes.findIndex(c => c.id === caminhao.id);
                        
                        if (index !== -1) {
                            caminhoes[index] = caminhao;
                            localStorage.setItem('ggomes_caminhoes', JSON.stringify(caminhoes));
                            return caminhao;
                        }
                        
                        return null;
                    } catch (e) {
                        console.error("Erro ao atualizar caminhão:", e);
                        throw new Error("Não foi possível atualizar o caminhão");
                    }
                },
                
                remove(id) {
                    try {
                        let caminhoes = this.getAll();
                        caminhoes = caminhoes.filter(c => c.id !== id);
                        localStorage.setItem('ggomes_caminhoes', JSON.stringify(caminhoes));
                    } catch (e) {
                        console.error("Erro ao remover caminhão:", e);
                        throw new Error("Não foi possível remover o caminhão");
                    }
                },
                
                // Novo método: obter caminhões por período
                getByPeriod(days) {
                    try {
                        const caminhoes = this.getAll();
                        if (!days) return caminhoes;
                        
                        const today = new Date();
                        const startDate = new Date();
                        startDate.setDate(today.getDate() - days);
                        
                        return caminhoes.filter(c => {
                            const camDate = new Date(c.data);
                            return camDate >= startDate && camDate <= today;
                        });
                    } catch (e) {
                        console.error("Erro ao obter caminhões por período:", e);
                        return [];
                    }
                },
                
                // Obter tendências dos tempos de caminhões
                getTrends(currentPeriodDays) {
                    try {
                        // Obter caminhões do período atual
                        const currentCaminhoes = this.getByPeriod(currentPeriodDays);
                        
                        // Obter caminhões do período anterior
                        const today = new Date();
                        const previousEndDate = new Date();
                        previousEndDate.setDate(today.getDate() - currentPeriodDays);
                        
                        const previousStartDate = new Date();
                        previousStartDate.setDate(previousEndDate.getDate() - currentPeriodDays);
                        
                        const allCaminhoes = this.getAll();
                        const previousCaminhoes = allCaminhoes.filter(c => {
                            const regDate = new Date(c.data);
                            return regDate >= previousStartDate && regDate <= previousEndDate;
                        });
                        
                        // Calcular médias atuais
                        let currentTotalCampo = 0;
                        let currentTotalPatio = 0;
                        
                        currentCaminhoes.forEach(c => {
                            currentTotalCampo += Number(c.tempoCampo) || 0;
                            currentTotalPatio += Number(c.tempoPatio) || 0;
                        });
                        
                        const currentMediaCampo = currentCaminhoes.length > 0 ? currentTotalCampo / currentCaminhoes.length : 0;
                        const currentMediaPatio = currentCaminhoes.length > 0 ? currentTotalPatio / currentCaminhoes.length : 0;
                        
                        // Calcular médias do período anterior
                        let previousTotalCampo = 0;
                        let previousTotalPatio = 0;
                        
                        previousCaminhoes.forEach(c => {
                            previousTotalCampo += Number(c.tempoCampo) || 0;
                            previousTotalPatio += Number(c.tempoPatio) || 0;
                        });
                        
                        const previousMediaCampo = previousCaminhoes.length > 0 ? previousTotalCampo / previousCaminhoes.length : 0;
                        const previousMediaPatio = previousCaminhoes.length > 0 ? previousTotalPatio / previousCaminhoes.length : 0;
                        
                        // Calcular tendências
                        const calcPercentChange = (current, previous) => {
                            if (previous === 0) return current > 0 ? 100 : 0;
                            return ((current - previous) / previous) * 100;
                        };
                        
                        return {
                            tempoCampo: {
                                current: currentMediaCampo,
                                previous: previousMediaCampo,
                                change: calcPercentChange(currentMediaCampo, previousMediaCampo)
                            },
                            tempoPatio: {
                                current: currentMediaPatio,
                                previous: previousMediaPatio,
                                change: calcPercentChange(currentMediaPatio, previousMediaPatio)
                            },
                            totalCaminhoes: {
                                current: currentCaminhoes.length,
                                previous: previousCaminhoes.length,
                                change: calcPercentChange(currentCaminhoes.length, previousCaminhoes.length)
                            }
                        };
                    } catch (e) {
                        console.error("Erro ao calcular tendências de caminhões:", e);
                        return null;
                    }
                },
                
                // Obter dados para gráfico de tempos
                getTimeSeriesData(days) {
                    try {
                        const caminhoes = this.getByPeriod(days);
                        
                        // Agrupar por data
                        const dataMap = new Map();
                        
                        // Criar datas para todo o período solicitado
                        const today = new Date();
                        for (let i = days; i >= 0; i--) {
                            const date = new Date();
                            date.setDate(today.getDate() - i);
                            const dateString = date.toISOString().split('T')[0];
                            dataMap.set(dateString, {
                                date: dateString,
                                tempoCampo: 0,
                                tempoPatio: 0,
                                count: 0
                            });
                        }
                        
                        // Somar tempos por data
                        caminhoes.forEach(c => {
                            const dateString = c.data;
                            if (dataMap.has(dateString)) {
                                const dayData = dataMap.get(dateString);
                                dayData.tempoCampo += Number(c.tempoCampo) || 0;
                                dayData.tempoPatio += Number(c.tempoPatio) || 0;
                                dayData.count += 1;
                            }
                        });
                        
                        // Calcular médias
                        dataMap.forEach(dayData => {
                            if (dayData.count > 0) {
                                dayData.tempoCampoMedio = dayData.tempoCampo / dayData.count;
                                dayData.tempoPatioMedio = dayData.tempoPatio / dayData.count;
                            } else {
                                dayData.tempoCampoMedio = 0;
                                dayData.tempoPatioMedio = 0;
                            }
                        });
                        
                        // Converter para array ordenado por data
                        return Array.from(dataMap.values()).sort((a, b) => {
                            return new Date(a.date) - new Date(b.date);
                        });
                    } catch (e) {
                        console.error("Erro ao obter dados de série temporal de caminhões:", e);
                        return [];
                    }
                }
            },
            
            // Notificações
            notifications: {
                getAll() {
                    try {
                        return JSON.parse(localStorage.getItem('ggomes_notifications') || '[]');
                    } catch (e) {
                        console.error("Erro ao obter notificações:", e);
                        return [];
                    }
                },
                
                getUnread() {
                    try {
                        const notifications = this.getAll();
                        return notifications.filter(n => !n.lida);
                    } catch (e) {
                        console.error("Erro ao obter notificações não lidas:", e);
                        return [];
                    }
                },
                
                add(notification) {
                    try {
                        const notifications = this.getAll();
                        notifications.push(notification);
                        localStorage.setItem('ggomes_notifications', JSON.stringify(notifications));
                        
                        // Atualizar contador de notificações
                        atualizarContadorNotificacoes();
                        
                        return notification;
                    } catch (e) {
                        console.error("Erro ao adicionar notificação:", e);
                        return null;
                    }
                },
                
                markAsRead(id) {
                    try {
                        const notifications = this.getAll();
                        const index = notifications.findIndex(n => n.id === id);
                        
                        if (index !== -1) {
                            notifications[index].lida = true;
                            localStorage.setItem('ggomes_notifications', JSON.stringify(notifications));
                            
                            // Atualizar contador de notificações
                            atualizarContadorNotificacoes();
                            
                            return true;
                        }
                        
                        return false;
                    } catch (e) {
                        console.error("Erro ao marcar notificação como lida:", e);
                        return false;
                    }
                },
                
                markAllAsRead() {
                    try {
                        const notifications = this.getAll();
                        notifications.forEach(n => n.lida = true);
                        localStorage.setItem('ggomes_notifications', JSON.stringify(notifications));
                        
                        // Atualizar contador de notificações
                        atualizarContadorNotificacoes();
                        
                        return true;
                    } catch (e) {
                        console.error("Erro ao marcar todas notificações como lidas:", e);
                        return false;
                    }
                }
            },
            
            // Configurações do usuário
            config: {
                get() {
                    try {
                        return JSON.parse(localStorage.getItem('ggomes_config') || '{}');
                    } catch (e) {
                        console.error("Erro ao obter configurações:", e);
                        return {
                            registrosPorPagina: 10,
                            formatoData: 'dd/MM/yyyy',
                            temaEscuro: document.documentElement.classList.contains('dark')
                        };
                    }
                },
                
                update(config) {
                    try {
                        localStorage.setItem('ggomes_config', JSON.stringify(config));
                    } catch (e) {
                        console.error("Erro ao atualizar configurações:", e);
                        throw new Error("Não foi possível atualizar as configurações");
                    }
                }
            },
            
            // Exportar todos os dados
            exportData() {
                try {
                    const data = {
                        users: this.users.getAll(),
                        colhedoras: this.colhedoras.getAll(),
                        registros: this.registros.getAll(),
                        caminhoes: this.caminhoes.getAll(),
                        config: this.config.get(),
                        notifications: this.notifications.getAll(),
                        exportDate: new Date().toISOString(),
                        version: '1.1.0'
                    };
                    
                    return JSON.stringify(data, null, 2);
                } catch (e) {
                    console.error("Erro ao exportar dados:", e);
                    throw new Error("Não foi possível exportar os dados");
                }
            },
            
            // Importar dados
            importData(jsonData) {
                try {
                    const data = JSON.parse(jsonData);
                    
                    // Validar que o formato dos dados é válido
                    if (!data.users || !data.colhedoras || !data.registros || !data.caminhoes || !data.config) {
                        throw new Error("Formato de dados inválido para importação");
                    }
                    
                    // Importar dados mantendo pelo menos o usuário admin padrão
                    const adminUser = this.users.getByEmail("admin@ggomes.com");
                    
                    // Preservar usuário admin atual se não estiver nos dados importados
                    const adminInImport = data.users.find(u => u.email === "admin@ggomes.com");
                    if (!adminInImport && adminUser) {
                        data.users.push(adminUser);
                    }
                    
                    // Importar todos os dados
                    localStorage.setItem('ggomes_users', JSON.stringify(data.users));
                    localStorage.setItem('ggomes_colhedoras', JSON.stringify(data.colhedoras));
                    localStorage.setItem('ggomes_registros', JSON.stringify(data.registros));
                    localStorage.setItem('ggomes_caminhoes', JSON.stringify(data.caminhoes));
                    localStorage.setItem('ggomes_config', JSON.stringify(data.config));
                    
                    // Importar notificações se existirem
                    if (data.notifications) {
                        localStorage.setItem('ggomes_notifications', JSON.stringify(data.notifications));
                    }
                    
                    // Adicionar notificação sobre a importação
                    const notificacao = {
                        id: 'notif-' + Date.now(),
                        tipo: 'info',
                        titulo: 'Dados Importados',
                        mensagem: `Importação de dados concluída com sucesso em ${new Date().toLocaleString()}`,
                        dataHora: new Date().toISOString(),
                        lida: false
                    };
                    
                    // Obter notificações existentes
                    let notifications = JSON.parse(localStorage.getItem('ggomes_notifications') || '[]');
                    notifications.push(notificacao);
                    localStorage.setItem('ggomes_notifications', JSON.stringify(notifications));
                    
                    return true;
                } catch (e) {
                    console.error("Erro ao importar dados:", e);
                    throw new Error("Não foi possível importar os dados: " + e.message);
                }
            },
            
            // Limpar todos os dados
            clearAll() {
                try {
                    // Preservar apenas o usuário admin
                    const adminUser = this.users.getByEmail("admin@ggomes.com");
                    
                    localStorage.setItem('ggomes_colhedoras', JSON.stringify([]));
                    localStorage.setItem('ggomes_registros', JSON.stringify([]));
                    localStorage.setItem('ggomes_caminhoes', JSON.stringify([]));
                    localStorage.setItem('ggomes_notifications', JSON.stringify([]));
                    
                    // Preservar usuário admin se existir
                    if (adminUser) {
                        localStorage.setItem('ggomes_users', JSON.stringify([adminUser]));
                    }
                    
                    // Adicionar notificação sobre a limpeza
                    const notificacao = {
                        id: 'notif-' + Date.now(),
                        tipo: 'warning',
                        titulo: 'Dados Limpos',
                        mensagem: 'Todos os dados do sistema foram limpos',
                        dataHora: new Date().toISOString(),
                        lida: false
                    };
                    
                    // Adicionar notificação
                    localStorage.setItem('ggomes_notifications', JSON.stringify([notificacao]));
                } catch (e) {
                    console.error("Erro ao limpar dados:", e);
                    throw new Error("Não foi possível limpar os dados");
                }
            }
        };
        
        // Inicializar o banco de dados
        DB.init();
        
        // Estado da aplicação
        const estado = {
            user: null,
            colhedoras: [],
            registros: [],
            caminhoes: [],
            notifications: [],
            config: {
                registrosPorPagina: 10,
                formatoData: 'dd/MM/yyyy',
                temaEscuro: document.documentElement.classList.contains('dark')
            },
            paginacao: {
                paginaAtual: 1,
                totalPaginas: 1,
                registrosPorPagina: 10
            },
            filtros: {
                colhedora: '',
                cultura: '',
                dataInicio: '',
                dataFim: ''
            },
            culturas: [],
            dashboard: {
                period: 30,
                charts: {},
                trends: null,
                bestPerformers: null
            },
            weather: {
                temp: null,
                condition: null,
                forecast: []
            }
        };
        
        // Autenticação
        const Auth = {
            // Login com email e senha
            login(email, password) {
                try {
                    const user = DB.users.getByEmail(email);
                    
                    if (user && user.password === password) {
                        estado.user = user;
                        
                        // Atualizar interface com base no tipo de usuário
                        this.updateUI();
                        
                        // Adicionar notificação de login
                        const notificacao = {
                            id: 'notif-' + Date.now(),
                            tipo: 'info',
                            titulo: 'Login Realizado',
                            mensagem: `Bem-vindo de volta, ${user.name}!`,
                            dataHora: new Date().toISOString(),
                            lida: false
                        };
                        DB.notifications.add(notificacao);
                        
                        return true;
                    }
                    
                    return false;
                } catch (e) {
                    console.error("Erro ao fazer login:", e);
                    mostrarToast("Erro ao fazer login. Tente novamente.", "error");
                    return false;
                }
            },
            
            // Verificar se usuário está autenticado
            isAuthenticated() {
                return estado.user !== null;
            },
            
            // Verificar se usuário é administrador
            isAdmin() {
                return estado.user && estado.user.isAdmin;
            },
            
            // Logout
            logout() {
                estado.user = null;
                showLoginForm();
            },
            
            // Atualizar interface com base no tipo de usuário
            updateUI() {
                try {
                    // Mostrar/ocultar elementos baseado no tipo de usuário
                    document.querySelectorAll('.admin-only').forEach(element => {
                        if (this.isAdmin()) {
                            element.classList.remove('hidden');
                        } else {
                            element.classList.add('hidden');
                        }
                    });
                    
                    // Atualizar informações do usuário
                    if (estado.user) {
                        document.getElementById('user-name').textContent = estado.user.name;
                        document.getElementById('sidebar-user-name').textContent = estado.user.name;
                        document.getElementById('sidebar-user-role').textContent = estado.user.isAdmin ? 'Administrador' : 'Usuário';
                        
                        // Atualizar badge de função
                        const badge = document.getElementById('user-role-badge');
                        if (estado.user.isAdmin) {
                            badge.textContent = "Administrador";
                            badge.className = "px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";
                        } else {
                            badge.textContent = "Usuário";
                            badge.className = "px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400";
                        }
                    }
                } catch (e) {
                    console.error("Erro ao atualizar interface:", e);
                }
            }
        };
        
        // Mostrar formulário de login
        function showLoginForm() {
            document.getElementById('auth-container').classList.remove('hidden');
            document.getElementById('app-container').classList.add('hidden');
            document.getElementById('login-form').classList.remove('hidden');
            document.getElementById('auth-loader').classList.add('hidden');
            
            // Limpar campos de formulário
            document.getElementById('login-email').value = '';
            document.getElementById('login-password').value = '';
            
            // Esconder painel de notificações se estiver aberto
            document.getElementById('notifications-panel').classList.add('translate-x-full');
        }
        
        // Mostrar aplicação principal
        function showApp() {
            document.getElementById('auth-container').classList.add('hidden');
            document.getElementById('app-container').classList.remove('hidden');
        }
        
        // Mostrar loader de autenticação
        function showAuthLoader() {
            document.getElementById('login-form').classList.add('hidden');
            document.getElementById('auth-loader').classList.remove('hidden');
        }
        
        // Esconder loader de autenticação
        function hideAuthLoader() {
            document.getElementById('auth-loader').classList.add('hidden');
            document.getElementById('login-form').classList.remove('hidden');
        }
        
        // Mostrar notificação toast
        function mostrarToast(mensagem, tipo = 'success') {
            // Remover toasts anteriores
            document.querySelectorAll('.toast').forEach(toast => toast.remove());
            
            const iconMap = {
                'success': 'fa-check-circle',
                'error': 'fa-exclamation-circle',
                'warning': 'fa-exclamation-triangle',
                'info': 'fa-info-circle'
            };
            
            const colorMap = {
                'success': 'bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200',
                'error': 'bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-200',
                'warning': 'bg-yellow-50 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-200',
                'info': 'bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200'
            };
            
            const toast = document.createElement('div');
            toast.className = `toast ${colorMap[tipo]} toast-${tipo} p-4 rounded-lg shadow-lg`;
            toast.innerHTML = `
                <div class="flex items-center">
                    <i class="fas ${iconMap[tipo]} mr-3"></i>
                    <p>${mensagem}</p>
                </div>
            `;
            
            document.getElementById('toast-container').appendChild(toast);
            
            // Remover automaticamente após 3 segundos
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }
        
        // Alternar tema claro/escuro
        function alternarTema() {
            try {
                const isDark = document.documentElement.classList.toggle('dark');
                estado.config.temaEscuro = isDark;
                
                const toggleSwitch = document.getElementById('toggle-theme-switch');
                if (toggleSwitch) {
                    toggleSwitch.checked = isDark;
                }
                
                // Salvar configuração
                DB.config.update(estado.config);
                
                // Adicionar ou remover classes para animação dos dots
                document.querySelectorAll('.dot').forEach(dot => {
                    if (isDark) {
                        dot.classList.add('transform', 'translate-x-6');
                    } else {
                        dot.classList.remove('transform', 'translate-x-6');
                    }
                });
                
                // Atualizar gráficos se estiverem inicializados
                atualizarGraficos();
            } catch (e) {
                console.error("Erro ao alternar tema:", e);
                mostrarToast("Erro ao alternar tema", "error");
            }
        }
        
        // Função para alternar entre páginas do conteúdo - VERSÃO MELHORADA
        function alternarPagina(pagina) {
            try {
                console.log("Alternando para página:", pagina);
                
                // Esconder todos os conteúdos
                document.querySelectorAll('.content').forEach(content => {
                    content.classList.add('hidden');
                });
                
                // Remover classes ativas de todos os links
                document.querySelectorAll('.sidebar-link').forEach(link => {
                    link.classList.remove('active');
                    link.classList.remove('bg-primary-100', 'dark:bg-primary-900', 'text-primary-700', 'dark:text-primary-300');
                    link.classList.add('hover:bg-gray-100', 'dark:hover:bg-gray-700');
                });
                
                // Mostrar o conteúdo da página solicitada
                const contentElement = document.getElementById(`content-${pagina}`);
                if (contentElement) {
                    contentElement.classList.remove('hidden');
                } else {
                    console.log("Content element not found:", `content-${pagina}`);
                    
                    // Se o conteúdo não existe, mostrar dashboard e um aviso
                    if (pagina !== 'dashboard' && pagina !== 'mapa') {
                        mostrarToast("Esta página está em desenvolvimento", "info");
                        document.getElementById('content-dashboard').classList.remove('hidden');
                        
                        // Ative o link do dashboard em vez do clicado
                        const dashboardLink = document.querySelector('a[href="#dashboard"]');
                        if (dashboardLink) {
                            dashboardLink.classList.add('active', 'bg-primary-100', 'dark:bg-primary-900', 'text-primary-700', 'dark:text-primary-300');
                            dashboardLink.classList.remove('hover:bg-gray-100', 'dark:hover:bg-gray-700');
                        }
                        
                        return;
                    }
                }
                
                // Ativar o link correspondente
                const linkElement = document.querySelector(`a[href="#${pagina}"]`);
                if (linkElement) {
                    linkElement.classList.add('active', 'bg-primary-100', 'dark:bg-primary-900', 'text-primary-700', 'dark:text-primary-300');
                    linkElement.classList.remove('hover:bg-gray-100', 'dark:hover:bg-gray-700');
                } else {
                    console.log("Link element not found:", `a[href="#${pagina}"]`);
                }
                
                // Atualizar dados específicos de cada página
                if (pagina === 'usuarios') {
                    carregarUsuarios();
                } else if (pagina === 'dashboard') {
                    atualizarDashboard();
                } else if (pagina === 'colhedoras') {
                    atualizarListaColhedoras();
                } else if (pagina === 'registros') {
                    atualizarListaCulturas();
                    atualizarTabelaRegistros();
                } else if (pagina === 'producao') {
                    atualizarResumoProducao();
                } else if (pagina === 'caminhoes') {
                    atualizarDadosCaminhoes();
                } else if (pagina === 'ajuda') {
                    mostrarAjuda();
                } else if (pagina === 'mapa') {
                    // Aqui seria a inicialização do mapa
                }
            } catch (e) {
                console.error("Erro ao alternar página:", e);
                mostrarToast("Erro ao carregar a página", "error");
            }
        }
        
        // Mostrar ajuda
        function mostrarAjuda() {
            document.getElementById('help-overlay').classList.remove('hidden');
        }
        
        // Fechar ajuda
        function fecharAjuda() {
            document.getElementById('help-overlay').classList.add('hidden');
        }
        
        // Formatar número com separador de milhares e casas decimais
        function formatarNumero(numero, casasDecimais = 0) {
            try {
                return Number(numero).toLocaleString('pt-BR', {
                    minimumFractionDigits: casasDecimais,
                    maximumFractionDigits: casasDecimais
                });
            } catch (e) {
                console.error("Erro ao formatar número:", e);
                return numero;
            }
        }
        
        // Formatar data conforme o formato selecionado nas configurações
        function formatarData(dataString) {
            try {
                const data = new Date(dataString);
                const formato = estado.config.formatoData;
                
                const dia = data.getDate().toString().padStart(2, '0');
                const mes = (data.getMonth() + 1).toString().padStart(2, '0');
                const ano = data.getFullYear();
                
                if (formato === 'dd/MM/yyyy') {
                    return `${dia}/${mes}/${ano}`;
                } else if (formato === 'MM/dd/yyyy') {
                    return `${mes}/${dia}/${ano}`;
                } else { // yyyy-MM-dd
                    return `${ano}-${mes}-${dia}`;
                }
            } catch (e) {
                console.error("Erro ao formatar data:", e);
                return dataString;
            }
        }
        
        // Mostrar seta de tendência
        function renderizarTendencia(elemento, variacao) {
            try {
                if (!elemento) return;
                
                let html = '';
                
                if (variacao > 0) {
                    html = `<i class="fas fa-arrow-up mr-1 text-green-500"></i>
                            <span class="text-green-600 dark:text-green-400">+${formatarNumero(variacao, 1)}% vs. período anterior</span>`;
                } else if (variacao < 0) {
                    html = `<i class="fas fa-arrow-down mr-1 text-red-500"></i>
                            <span class="text-red-600 dark:text-red-400">${formatarNumero(variacao, 1)}% vs. período anterior</span>`;
                } else {
                    html = `<i class="fas fa-minus mr-1 text-gray-500"></i>
                            <span class="text-gray-600 dark:text-gray-400">Sem variação</span>`;
                }
                
                elemento.innerHTML = html;
            } catch (e) {
                console.error("Erro ao renderizar tendência:", e);
            }
        }
        
        // Renderizar gráfico de produção ao longo do tempo
        function renderizarGraficoProducaoTempo() {
            try {
                const ctx = document.getElementById('chart-producao-tempo');
                if (!ctx) return;
                
                // Destruir gráfico anterior se existir
                if (estado.dashboard.charts.producaoTempo) {
                    estado.dashboard.charts.producaoTempo.destroy();
                }
                
                // Obter dados da série temporal
                const period = Number(estado.dashboard.period || 30);
                const timeData = DB.registros.getTimeSeriesData(period);
                
                // Formatação para labels de data
                const labels = timeData.map(d => {
                    const date = new Date(d.date);
                    return date.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit' });
                });
                
                const isDark = document.documentElement.classList.contains('dark');
                const gridColor = isDark ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';
                const textColor = isDark ? '#e5e7eb' : '#1f2937';
                
                Chart.defaults.font.family = "'Inter', sans-serif";
                
                estado.dashboard.charts.producaoTempo = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [
                            {
                                label: 'Produção (T)',
                                data: timeData.map(d => d.quantidade),
                                fill: true,
                                backgroundColor: 'rgba(93, 92, 222, 0.2)',
                                borderColor: 'rgba(93, 92, 222, 1)',
                                borderWidth: 2,
                                tension: 0.3,
                                pointRadius: 3,
                                pointBackgroundColor: 'rgba(93, 92, 222, 1)'
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            intersect: false,
                            mode: 'index'
                        },
                        plugins: {
                            legend: {
                                labels: {
                                    color: textColor,
                                    usePointStyle: true,
                                    padding: 20,
                                    font: {
                                        size: 12
                                    }
                                }
                            },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                                backgroundColor: isDark ? 'rgba(17, 24, 39, 0.9)' : 'rgba(255, 255, 255, 0.9)',
                                titleColor: isDark ? '#e5e7eb' : '#1f2937',
                                bodyColor: isDark ? '#e5e7eb' : '#1f2937',
                                borderColor: isDark ? 'rgba(255, 255, 255, 0.2)' : 'rgba(0, 0, 0, 0.1)',
                                borderWidth: 1,
                                padding: 12,
                                cornerRadius: 8,
                                boxPadding: 6,
                                usePointStyle: true
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: {
                                    color: gridColor,
                                    drawBorder: false
                                },
                                ticks: {
                                    color: textColor,
                                    padding: 10,
                                    font: {
                                        size: 11
                                    }
                                },
                                title: {
                                    display: true,
                                    text: 'Toneladas',
                                    color: textColor,
                                    font: {
                                        size: 12,
                                        weight: 'normal'
                                    },
                                    padding: {top: 0, bottom: 10}
                                }
                            },
                            x: {
                                grid: {
                                    color: gridColor,
                                    display: false
                                },
                                ticks: {
                                    color: textColor,
                                    padding: 10,
                                    font: {
                                        size: 11
                                    }
                                }
                            }
                        }
                    }
                });
            } catch (e) {
                console.error("Erro ao renderizar gráfico de produção:", e);
            }
        }
        
        // Renderizar gráfico de distribuição por cultura
        function renderizarGraficoCulturas() {
            try {
                const ctx = document.getElementById('chart-culturas');
                if (!ctx) return;
                
                // Destruir gráfico anterior se existir
                if (estado.dashboard.charts.culturas) {
                    estado.dashboard.charts.culturas.destroy();
                }
                
                // Obter estatísticas por cultura
                const period = Number(estado.dashboard.period || 30);
                const culturaStats = DB.registros.getStatsByCategory('cultura', period);
                
                // Cores para o gráfico
                const cores = [
                    'rgba(93, 92, 222, 0.8)',   // primary
                    'rgba(52, 211, 153, 0.8)',  // green
                    'rgba(251, 191, 36, 0.8)',  // yellow
                    'rgba(239, 68, 68, 0.8)',   // red
                    'rgba(96, 165, 250, 0.8)',  // blue
                    'rgba(167, 139, 250, 0.8)', // purple
                    'rgba(248, 113, 113, 0.8)', // red-light
                    'rgba(52, 211, 153, 0.8)',  // green-light
                ];
                
                const isDark = document.documentElement.classList.contains('dark');
                const textColor = isDark ? '#e5e7eb' : '#1f2937';
                
                Chart.defaults.font.family = "'Inter', sans-serif";
                
                estado.dashboard.charts.culturas = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: culturaStats.map(c => c.name),
                        datasets: [{
                            data: culturaStats.map(c => c.quantidade),
                            backgroundColor: culturaStats.map((_, index) => cores[index % cores.length]),
                            borderWidth: 2,
                            borderColor: isDark ? '#374151' : '#f9fafb',
                            hoverOffset: 12
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        cutout: '65%',
                        plugins: {
                            legend: {
                                position: 'right',
                                labels: {
                                    color: textColor,
                                    padding: 15,
                                    usePointStyle: true,
                                    pointStyle: 'circle',
                                    font: {
                                        size: 12
                                    }
                                }
                            },
                            tooltip: {
                                backgroundColor: isDark ? 'rgba(17, 24, 39, 0.9)' : 'rgba(255, 255, 255, 0.9)',
                                titleColor: isDark ? '#e5e7eb' : '#1f2937',
                                bodyColor: isDark ? '#e5e7eb' : '#1f2937',
                                borderColor: isDark ? 'rgba(255, 255, 255, 0.2)' : 'rgba(0, 0, 0, 0.1)',
                                borderWidth: 1,
                                padding: 12,
                                cornerRadius: 8,
                                boxPadding: 6,
                                usePointStyle: true,
                                callbacks: {
                                    label: function(context) {
                                        const value = context.raw;
                                        const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                        const percentage = ((value / total) * 100).toFixed(1);
                                        return `${context.label}: ${formatarNumero(value)} T (${percentage}%)`;
                                    }
                                }
                            }
                        }
                    }
                });
            } catch (e) {
                console.error("Erro ao renderizar gráfico de culturas:", e);
            }
        }
        
        // Renderizar gráfico de comparação de colhedoras
        function renderizarGraficoColhedorasComparacao() {
            try {
                const ctx = document.getElementById('chart-colhedoras-comparacao');
                if (!ctx) return;
                
                // Destruir gráfico anterior se existir
                if (estado.dashboard.charts.colhedorasComparacao) {
                    estado.dashboard.charts.colhedorasComparacao.destroy();
                }
                
                const period = Number(estado.dashboard.period || 30);
                const bestPerformers = DB.registros.getBestPerformers(period);
                
                if (!bestPerformers || !bestPerformers.colhedoras || !bestPerformers.colhedoras.all) {
                    ctx.parentElement.innerHTML = '<div class="flex items-center justify-center h-full"><p class="text-gray-500 dark:text-gray-400">Sem dados suficientes</p></div>';
                    return;
                }
                
                // Ordenar por produção total
                const colhedoras = [...bestPerformers.colhedoras.all].sort((a, b) => b.quantidade - a.quantidade).slice(0, 5);
                
                // Se não tiver dados, mostrar mensagem
                if (colhedoras.length === 0) {
                    ctx.parentElement.innerHTML = '<div class="flex items-center justify-center h-full"><p class="text-gray-500 dark:text-gray-400">Sem dados suficientes</p></div>';
                    return;
                }
                
                const isDark = document.documentElement.classList.contains('dark');
                const gridColor = isDark ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';
                const textColor = isDark ? '#e5e7eb' : '#1f2937';
                
                Chart.defaults.font.family = "'Inter', sans-serif";
                
                estado.dashboard.charts.colhedorasComparacao = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: colhedoras.map(c => c.name),
                        datasets: [{
                            label: 'Produção Total (T)',
                            data: colhedoras.map(c => c.quantidade),
                            backgroundColor: 'rgba(93, 92, 222, 0.8)',
                            borderColor: 'rgba(93, 92, 222, 1)',
                            borderWidth: 1,
                            borderRadius: 6,
                            barPercentage: 0.7,
                            categoryPercentage: 0.8
                        }, {
                            label: 'Produtividade (T/ha)',
                            data: colhedoras.map(c => c.produtividade),
                            backgroundColor: 'rgba(52, 211, 153, 0.8)',
                            borderColor: 'rgba(52, 211, 153, 1)',
                            borderWidth: 1,
                            borderRadius: 6,
                            barPercentage: 0.7,
                            categoryPercentage: 0.8
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        indexAxis: 'y',
                        interaction: {
                            mode: 'index',
                            intersect: false
                        },
                        plugins: {
                            legend: {
                                position: 'top',
                                labels: {
                                    color: textColor,
                                    usePointStyle: true,
                                    padding: 20,
                                    font: {
                                        size: 12
                                    }
                                }
                            },
                            tooltip: {
                                backgroundColor: isDark ? 'rgba(17, 24, 39, 0.9)' : 'rgba(255, 255, 255, 0.9)',
                                titleColor: isDark ? '#e5e7eb' : '#1f2937',
                                bodyColor: isDark ? '#e5e7eb' : '#1f2937',
                                borderColor: isDark ? 'rgba(255, 255, 255, 0.2)' : 'rgba(0, 0, 0, 0.1)',
                                borderWidth: 1,
                                padding: 12,
                                cornerRadius: 8,
                                boxPadding: 6,
                                usePointStyle: true,
                                callbacks: {
                                    label: function(context) {
                                        const datasetLabel = context.dataset.label || '';
                                        const value = context.raw;
                                        if (datasetLabel.includes('Produtividade')) {
                                            return `${datasetLabel}: ${formatarNumero(value, 2)} T/ha`;
                                        }
                                        return `${datasetLabel}: ${formatarNumero(value, 0)} T`;
                                    }
                                }
                            }
                        },
                        scales: {
                            x: {
                                beginAtZero: true,
                                grid: {
                                    color: gridColor,
                                    drawBorder: false
                                },
                                ticks: {
                                    color: textColor,
                                    padding: 10,
                                    font: {
                                        size: 11
                                    }
                                }
                            },
                            y: {
                                grid: {
                                    color: gridColor,
                                    display: false
                                },
                                ticks: {
                                    color: textColor,
                                    padding: 10,
                                    font: {
                                        size: 11
                                    }
                                }
                            }
                        }
                    }
                });
            } catch (e) {
                console.error("Erro ao renderizar gráfico de comparação de colhedoras:", e);
            }
        }
        
        // Renderizar gráfico de comparação de culturas
        function renderizarGraficoCulturasComparacao() {
            try {
                const ctx = document.getElementById('chart-culturas-comparacao');
                if (!ctx) return;
                
                // Destruir gráfico anterior se existir
                if (estado.dashboard.charts.culturasComparacao) {
                    estado.dashboard.charts.culturasComparacao.destroy();
                }
                
                const period = Number(estado.dashboard.period || 30);
                const bestPerformers = DB.registros.getBestPerformers(period);
                
                if (!bestPerformers || !bestPerformers.culturas || !bestPerformers.culturas.all) {
                    ctx.parentElement.innerHTML = '<div class="flex items-center justify-center h-full"><p class="text-gray-500 dark:text-gray-400">Sem dados suficientes</p></div>';
                    return;
                }
                
                // Ordenar por produção total
                const culturas = [...bestPerformers.culturas.all].sort((a, b) => b.quantidade - a.quantidade).slice(0, 5);
                
                // Se não tiver dados, mostrar mensagem
                if (culturas.length === 0) {
                    ctx.parentElement.innerHTML = '<div class="flex items-center justify-center h-full"><p class="text-gray-500 dark:text-gray-400">Sem dados suficientes</p></div>';
                    return;
                }
                
                const isDark = document.documentElement.classList.contains('dark');
                const gridColor = isDark ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';
                const textColor = isDark ? '#e5e7eb' : '#1f2937';
                
                Chart.defaults.font.family = "'Inter', sans-serif";
                
                estado.dashboard.charts.culturasComparacao = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: culturas.map(c => c.name),
                        datasets: [{
                            label: 'Produção Total (T)',
                            data: culturas.map(c => c.quantidade),
                            backgroundColor: 'rgba(251, 191, 36, 0.8)',
                            borderColor: 'rgba(251, 191, 36, 1)',
                            borderWidth: 1,
                            borderRadius: 6,
                            barPercentage: 0.7,
                            categoryPercentage: 0.8
                        }, {
                            label: 'Área (ha)',
                            data: culturas.map(c => c.area),
                            backgroundColor: 'rgba(96, 165, 250, 0.8)',
                            borderColor: 'rgba(96, 165, 250, 1)',
                            borderWidth: 1,
                            borderRadius: 6,
                            barPercentage: 0.7,
                            categoryPercentage: 0.8
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        indexAxis: 'y',
                        interaction: {
                            mode: 'index',
                            intersect: false
                        },
                        plugins: {
                            legend: {
                                position: 'top',
                                labels: {
                                    color: textColor,
                                    usePointStyle: true,
                                    padding: 20,
                                    font: {
                                        size: 12
                                    }
                                }
                            },
                            tooltip: {
                                backgroundColor: isDark ? 'rgba(17, 24, 39, 0.9)' : 'rgba(255, 255, 255, 0.9)',
                                titleColor: isDark ? '#e5e7eb' : '#1f2937',
                                bodyColor: isDark ? '#e5e7eb' : '#1f2937',
                                borderColor: isDark ? 'rgba(255, 255, 255, 0.2)' : 'rgba(0, 0, 0, 0.1)',
                                borderWidth: 1,
                                padding: 12,
                                cornerRadius: 8,
                                boxPadding: 6,
                                usePointStyle: true,
                                callbacks: {
                                    label: function(context) {
                                        const datasetLabel = context.dataset.label || '';
                                        const value = context.raw;
                                        if (datasetLabel.includes('Área')) {
                                            return `${datasetLabel}: ${formatarNumero(value, 2)} ha`;
                                        }
                                        return `${datasetLabel}: ${formatarNumero(value, 0)} T`;
                                    }
                                }
                            }
                        },
                        scales: {
                            x: {beginAtZero: true,
                                grid: {
                                    color: gridColor,
                                    drawBorder: false
                                },
                                ticks: {
                                    color: textColor,
                                    padding: 10,
                                    font: {
                                        size: 11
                                    }
                                }
                            },
                            y: {
                                grid: {
                                    color: gridColor,
                                    display: false
                                },
                                ticks: {
                                    color: textColor,
                                    padding: 10,
                                    font: {
                                        size: 11
                                    }
                                }
                            }
                        }
                    }
                });
            } catch (e) {
                console.error("Erro ao renderizar gráfico de comparação de culturas:", e);
            }
        }
        
        // Renderizar gráfico de tempo de caminhões
        function renderizarGraficoCaminhoesTempo() {
            try {
                const ctx = document.getElementById('chart-caminhoes-tempo');
                if (!ctx) return;
                
                // Destruir gráfico anterior se existir
                if (estado.dashboard.charts.caminhoesTempo) {
                    estado.dashboard.charts.caminhoesTempo.destroy();
                }
                
                // Obter dados do período atual
                const period = Number(estado.dashboard.period || 30);
                const timeData = DB.caminhoes.getTimeSeriesData(period);
                
                // Se não tiver dados, mostrar mensagem
                if (timeData.length === 0) {
                    ctx.parentElement.innerHTML = '<div class="flex items-center justify-center h-full"><p class="text-gray-500 dark:text-gray-400">Sem dados de caminhões</p></div>';
                    return;
                }
                
                // Formatação para labels de data
                const labels = timeData.map(d => {
                    const date = new Date(d.date);
                    return date.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit' });
                });
                
                const isDark = document.documentElement.classList.contains('dark');
                const gridColor = isDark ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';
                const textColor = isDark ? '#e5e7eb' : '#1f2937';
                
                Chart.defaults.font.family = "'Inter', sans-serif";
                
                estado.dashboard.charts.caminhoesTempo = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [
                            {
                                label: 'Tempo Médio de Campo (min)',
                                data: timeData.map(d => d.tempoCampoMedio),
                                fill: false,
                                borderColor: 'rgba(52, 211, 153, 1)', // green
                                backgroundColor: 'rgba(52, 211, 153, 0.2)',
                                borderWidth: 2,
                                tension: 0.3,
                                pointRadius: 3,
                                pointBackgroundColor: 'rgba(52, 211, 153, 1)'
                            },
                            {
                                label: 'Tempo Médio de Pátio (min)',
                                data: timeData.map(d => d.tempoPatioMedio),
                                fill: false,
                                borderColor: 'rgba(96, 165, 250, 1)', // blue
                                backgroundColor: 'rgba(96, 165, 250, 0.2)',
                                borderWidth: 2,
                                tension: 0.3,
                                pointRadius: 3,
                                pointBackgroundColor: 'rgba(96, 165, 250, 1)'
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            intersect: false,
                            mode: 'index'
                        },
                        plugins: {
                            legend: {
                                position: 'top',
                                labels: {
                                    color: textColor,
                                    usePointStyle: true,
                                    padding: 20,
                                    font: {
                                        size: 12
                                    }
                                }
                            },
                            tooltip: {
                                backgroundColor: isDark ? 'rgba(17, 24, 39, 0.9)' : 'rgba(255, 255, 255, 0.9)',
                                titleColor: isDark ? '#e5e7eb' : '#1f2937',
                                bodyColor: isDark ? '#e5e7eb' : '#1f2937',
                                borderColor: isDark ? 'rgba(255, 255, 255, 0.2)' : 'rgba(0, 0, 0, 0.1)',
                                borderWidth: 1,
                                padding: 12,
                                cornerRadius: 8,
                                boxPadding: 6,
                                usePointStyle: true
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: {
                                    color: gridColor,
                                    drawBorder: false
                                },
                                ticks: {
                                    color: textColor,
                                    padding: 10,
                                    font: {
                                        size: 11
                                    }
                                },
                                title: {
                                    display: true,
                                    text: 'Minutos',
                                    color: textColor,
                                    font: {
                                        size: 12,
                                        weight: 'normal'
                                    },
                                    padding: {top: 0, bottom: 10}
                                }
                            },
                            x: {
                                grid: {
                                    color: gridColor,
                                    display: false
                                },
                                ticks: {
                                    color: textColor,
                                    padding: 10,
                                    font: {
                                        size: 11
                                    }
                                }
                            }
                        }
                    }
                });
            } catch (e) {
                console.error("Erro ao renderizar gráfico de tempos de caminhões:", e);
            }
        }
        
        // Atualizar todos os gráficos
        function atualizarGraficos() {
            try {
                renderizarGraficoProducaoTempo();
                renderizarGraficoCulturas();
                renderizarGraficoColhedorasComparacao();
                renderizarGraficoCulturasComparacao();
                renderizarGraficoCaminhoesTempo();
            } catch (e) {
                console.error("Erro ao atualizar gráficos:", e);
            }
        }
        
        // Atualizar dashboard com os dados atuais
        function atualizarDashboard() {
            try {
                // Obter o período atual selecionado
                const periodElement = document.getElementById('dashboard-period');
                estado.dashboard.period = Number(periodElement ? periodElement.value : 30);
                
                // Obter tendências
                estado.dashboard.trends = DB.registros.getTrends(estado.dashboard.period);
                
                // Obter melhores performances
                estado.dashboard.bestPerformers = DB.registros.getBestPerformers(estado.dashboard.period);
                
                // Obter tendências de caminhões
                const caminhoesTrends = DB.caminhoes.getTrends(estado.dashboard.period);
                
                // Atualizar Estatísticas Rápidas
                document.getElementById('quick-total-colhido').textContent = formatarNumero(estado.dashboard.trends.totalColhido.current, 0) + " T";
                document.getElementById('quick-area-total').textContent = formatarNumero(estado.dashboard.trends.areaTotal.current, 2) + " ha";
                document.getElementById('quick-colhedoras').textContent = estado.colhedoras.length;
                
                // Atualizar Cards Principais
                document.getElementById('dash-total-colhido').textContent = formatarNumero(estado.dashboard.trends.totalColhido.current, 0) + " T";
                document.getElementById('dash-area-total').textContent = formatarNumero(estado.dashboard.trends.areaTotal.current, 2) + " ha";
                document.getElementById('dash-produtividade').textContent = formatarNumero(estado.dashboard.trends.produtividade.current, 2) + " T/ha";
                document.getElementById('dash-rendimento').textContent = formatarNumero(estado.dashboard.trends.rendimento.current, 2) + " T/h";
                
                // Atualizar tendências
                renderizarTendencia(document.getElementById('dash-total-trend'), estado.dashboard.trends.totalColhido.change);
                renderizarTendencia(document.getElementById('dash-area-trend'), estado.dashboard.trends.areaTotal.change);
                renderizarTendencia(document.getElementById('dash-produtividade-trend'), estado.dashboard.trends.produtividade.change);
                renderizarTendencia(document.getElementById('dash-rendimento-trend'), estado.dashboard.trends.rendimento.change);
                
                // Atualizar barras de progresso
                const setProgress = (elementId, value, max = 100) => {
                    const progressBar = document.getElementById(elementId);
                    if (progressBar) {
                        const percentage = Math.min(Math.max((value / max) * 100, 0), 100);
                        progressBar.style.width = `${percentage}%`;
                    }
                };
                
                setProgress('dash-total-progress', estado.dashboard.trends.totalColhido.change, 100);
                setProgress('dash-area-progress', estado.dashboard.trends.areaTotal.change, 100);
                setProgress('dash-produtividade-progress', estado.dashboard.trends.produtividade.change, 100);
                setProgress('dash-rendimento-progress', estado.dashboard.trends.rendimento.change, 100);
                
                // Atualizar melhores desempenhos
                const bestPerformers = estado.dashboard.bestPerformers;
                
                if (bestPerformers && bestPerformers.colhedoras) {
                    // Colhedoras
                    document.getElementById('best-productivity-colhedora').textContent = bestPerformers.colhedoras.bestProductivity.name || "-";
                    document.getElementById('best-productivity-value').textContent = formatarNumero(bestPerformers.colhedoras.bestProductivity.produtividade, 2) + " T/ha";
                    
                    document.getElementById('best-volume-colhedora').textContent = bestPerformers.colhedoras.bestVolume.name || "-";
                    document.getElementById('best-volume-value').textContent = formatarNumero(bestPerformers.colhedoras.bestVolume.quantidade, 0) + " T";
                    
                    document.getElementById('best-yield-colhedora').textContent = bestPerformers.colhedoras.bestYield.name || "-";
                    document.getElementById('best-yield-value').textContent = formatarNumero(bestPerformers.colhedoras.bestYield.rendimento, 2) + " T/h";
                    
                    // Culturas
                    document.getElementById('best-productivity-cultura').textContent = bestPerformers.culturas.bestProductivity.name || "-";
                    document.getElementById('best-productivity-cultura-value').textContent = formatarNumero(bestPerformers.culturas.bestProductivity.produtividade, 2) + " T/ha";
                    
                    document.getElementById('best-volume-cultura').textContent = bestPerformers.culturas.bestVolume.name || "-";
                    document.getElementById('best-volume-cultura-value').textContent = formatarNumero(bestPerformers.culturas.bestVolume.quantidade, 0) + " T";
                    
                    document.getElementById('best-area-cultura').textContent = bestPerformers.culturas.bestArea.name || "-";
                    document.getElementById('best-area-cultura-value').textContent = formatarNumero(bestPerformers.culturas.bestArea.area, 2) + " ha";
                }
                
                // Atualizar estatísticas de caminhões
                if (caminhoesTrends) {
                    document.getElementById('dash-tempo-campo').textContent = formatarNumero(caminhoesTrends.tempoCampo.current, 0) + " min";
                    document.getElementById('dash-tempo-patio').textContent = formatarNumero(caminhoesTrends.tempoPatio.current, 0) + " min";
                    document.getElementById('dash-total-caminhoes').textContent = caminhoesTrends.totalCaminhoes.current;
                    
                    renderizarTendencia(document.getElementById('dash-caminhoes-trend'), caminhoesTrends.totalCaminhoes.change);
                    
                    setProgress('dash-tempo-campo-progress', caminhoesTrends.tempoCampo.current, 120);
                    setProgress('dash-tempo-patio-progress', caminhoesTrends.tempoPatio.current, 60);
                }
                
                // Atualizar resumo
                document.getElementById('qtd-colhedoras').textContent = estado.colhedoras.length;
                document.getElementById('qtd-registros').textContent = estado.registros.length;
                document.getElementById('qtd-usuarios').textContent = DB.users.getAll().length;
                
                // Atualizar gráficos
                atualizarGraficos();
            } catch (e) {
                console.error("Erro ao atualizar dashboard:", e);
                mostrarToast("Erro ao atualizar dashboard", "error");
            }
        }
        
        // Atualizar data atual
        function atualizarDataAtual() {
            try {
                const dataElement = document.getElementById('current-date');
                if (dataElement) {
                    const hoje = new Date();
                    dataElement.textContent = hoje.toLocaleDateString('pt-BR', {
                        weekday: 'long',
                        day: 'numeric',
                        month: 'short',
                        year: 'numeric'
                    });
                }
            } catch (e) {
                console.error("Erro ao atualizar data atual:", e);
            }
        }
        
        // Atualizar contador de notificações
        function atualizarContadorNotificacoes() {
            try {
                const badge = document.getElementById('notification-badge');
                if (badge) {
                    const notificacoesNaoLidas = DB.notifications.getUnread();
                    badge.textContent = notificacoesNaoLidas.length;
                    
                    if (notificacoesNaoLidas.length > 0) {
                        badge.classList.remove('hidden');
                    } else {
                        badge.classList.add('hidden');
                    }
                }
            } catch (e) {
                console.error("Erro ao atualizar contador de notificações:", e);
            }
        }
        
        // Função para carregar notificações no painel lateral
        function carregarNotificacoes() {
            try {
                const notifications = DB.notifications.getAll();
                const hoje = new Date();
                hoje.setHours(0, 0, 0, 0);
                
                // Separar entre as de hoje e as anteriores
                const notificacoesHoje = [];
                const notificacoesAnteriores = [];
                
                notifications.forEach(notif => {
                    const dataNotif = new Date(notif.dataHora);
                    if (dataNotif >= hoje) {
                        notificacoesHoje.push(notif);
                    } else {
                        notificacoesAnteriores.push(notif);
                    }
                });
                
                // Ordenar por data (mais recentes primeiro)
                notificacoesHoje.sort((a, b) => new Date(b.dataHora) - new Date(a.dataHora));
                notificacoesAnteriores.sort((a, b) => new Date(b.dataHora) - new Date(a.dataHora));
                
                // Renderizar notificações de hoje
                const containerHoje = document.querySelector('.notificacoes-hoje');
                containerHoje.innerHTML = '';
                
                if (notificacoesHoje.length === 0) {
                    containerHoje.innerHTML = '<p class="text-sm text-gray-500 dark:text-gray-400 p-3">Nenhuma notificação hoje</p>';
                } else {
                    notificacoesHoje.forEach(notif => {
                        containerHoje.appendChild(criarElementoNotificacao(notif));
                    });
                }
                
                // Renderizar notificações anteriores
                const containerAnteriores = document.querySelector('.notificacoes-anteriores');
                containerAnteriores.innerHTML = '';
                
                if (notificacoesAnteriores.length === 0) {
                    containerAnteriores.innerHTML = '<p class="text-sm text-gray-500 dark:text-gray-400 p-3">Nenhuma notificação anterior</p>';
                } else {
                    notificacoesAnteriores.forEach(notif => {
                        containerAnteriores.appendChild(criarElementoNotificacao(notif));
                    });
                }
            } catch (e) {
                console.error("Erro ao carregar notificações:", e);
            }
        }
        
        // Função para criar elemento de notificação
        function criarElementoNotificacao(notif) {
            try {
                const element = document.createElement('div');
                
                // Definir classes de cores com base no tipo da notificação
                let bgColorClass = 'bg-blue-50 dark:bg-blue-900/20';
                let iconColorClass = 'text-blue-600 dark:text-blue-400';
                let iconClass = 'fa-info-circle';
                let bgIconClass = 'bg-blue-100 dark:bg-blue-800';
                
                if (notif.tipo === 'success') {
                    bgColorClass = 'bg-green-50 dark:bg-green-900/20';
                    iconColorClass = 'text-green-600 dark:text-green-400';
                    iconClass = 'fa-check-circle';
                    bgIconClass = 'bg-green-100 dark:bg-green-800';
                } else if (notif.tipo === 'warning') {
                    bgColorClass = 'bg-yellow-50 dark:bg-yellow-900/20';
                    iconColorClass = 'text-yellow-600 dark:text-yellow-400';
                    iconClass = 'fa-exclamation-triangle';
                    bgIconClass = 'bg-yellow-100 dark:bg-yellow-800';
                } else if (notif.tipo === 'error') {
                    bgColorClass = 'bg-red-50 dark:bg-red-900/20';
                    iconColorClass = 'text-red-600 dark:text-red-400';
                    iconClass = 'fa-exclamation-circle';
                    bgIconClass = 'bg-red-100 dark:bg-red-800';
                }
                
                // Adicionar classe de notificação não lida
                if (!notif.lida) {
                    element.classList.add('border-l-2', 'border-primary-500');
                }
                
                element.className = `${bgColorClass} p-3 rounded-lg ${!notif.lida ? 'border-l-2 border-primary-500' : ''}`;
                element.setAttribute('data-id', notif.id);
                
                // Formatar o tempo relativo
                const tempoRelativo = formatarTempoRelativo(notif.dataHora);
                
                element.innerHTML = `
                    <div class="flex">
                        <div class="flex-shrink-0 mr-3">
                            <div class="h-9 w-9 rounded-full ${bgIconClass} flex items-center justify-center">
                                <i class="fas ${iconClass} ${iconColorClass}"></i>
                            </div>
                        </div>
                        <div>
                            <p class="text-sm font-medium text-gray-800 dark:text-gray-200">${notif.titulo}</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400">${notif.mensagem}</p>
                            <p class="text-xs text-gray-400 dark:text-gray-500 mt-1">${tempoRelativo}</p>
                        </div>
                    </div>
                `;
                
                // Adicionar evento de clique para marcar como lida
                element.addEventListener('click', function() {
                    DB.notifications.markAsRead(notif.id);
                    element.classList.remove('border-l-2', 'border-primary-500');
                    atualizarContadorNotificacoes();
                });
                
                return element;
            } catch (e) {
                console.error("Erro ao criar elemento de notificação:", e);
                return document.createElement('div');
            }
        }
        
        // Formatar tempo relativo
        function formatarTempoRelativo(dataHoraString) {
            try {
                const dataHora = new Date(dataHoraString);
                const agora = new Date();
                const diffMs = agora - dataHora;
                const diffSec = Math.floor(diffMs / 1000);
                const diffMin = Math.floor(diffSec / 60);
                const diffHour = Math.floor(diffMin / 60);
                const diffDay = Math.floor(diffHour / 24);
                
                if (diffSec < 60) {
                    return 'Agora';
                } else if (diffMin < 60) {
                    return `${diffMin} ${diffMin === 1 ? 'minuto' : 'minutos'} atrás`;
                } else if (diffHour < 24) {
                    return `${diffHour} ${diffHour === 1 ? 'hora' : 'horas'} atrás`;
                } else if (diffDay < 7) {
                    return `${diffDay} ${diffDay === 1 ? 'dia' : 'dias'} atrás`;
                } else {
                    return dataHora.toLocaleDateString('pt-BR');
                }
            } catch (e) {
                console.error("Erro ao formatar tempo relativo:", e);
                return "";
            }
        }
        
        // Atualizar lista de culturas
        function atualizarListaCulturas() {
            try {
                // Obter registros
                const registros = DB.registros.getAll();
                
                // Extrair culturas únicas
                const uniqueCulturas = new Set();
                registros.forEach(reg => {
                    if (reg.cultura) uniqueCulturas.add(reg.cultura);
                });
                
                // Converter para array e ordenar alfabeticamente
                estado.culturas = Array.from(uniqueCulturas).sort();
                
                // Atualizar datalist
                const datalist = document.getElementById('lista-culturas');
                if (datalist) {
                    datalist.innerHTML = '';
                    estado.culturas.forEach(cultura => {
                        const option = document.createElement('option');
                        option.value = cultura;
                        datalist.appendChild(option);
                    });
                }
                
                // Atualizar select de filtro
                const selectFiltro = document.getElementById('filtro-cultura');
                if (selectFiltro) {
                    // Preservar valor atual
                    const valorAtual = selectFiltro.value;
                    
                    selectFiltro.innerHTML = '<option value="">Todas</option>';
                    estado.culturas.forEach(cultura => {
                        const option = document.createElement('option');
                        option.value = cultura;
                        option.textContent = cultura;
                        selectFiltro.appendChild(option);
                    });
                    
                    // Restaurar valor
                    selectFiltro.value = valorAtual;
                }
            } catch (e) {
                console.error("Erro ao atualizar lista de culturas:", e);
            }
        }
        
        // Atualizar selects de colhedoras
        function atualizarSelectsColhedoras() {
            try {
                // Atualizar select de registro
                const selectRegistro = document.getElementById('registro-colhedora');
                if (selectRegistro) {
                    // Preservar valor atual
                    const valorAtual = selectRegistro.value;
                    
                    selectRegistro.innerHTML = '<option value="">Selecione uma colhedora</option>';
                    estado.colhedoras.forEach(colhedora => {
                        const option = document.createElement('option');
                        option.value = colhedora.id;
                        option.textContent = `${colhedora.id} - ${colhedora.modelo}`;
                        selectRegistro.appendChild(option);
                    });
                    
                    // Restaurar valor
                    selectRegistro.value = valorAtual;
                }
                
                // Atualizar select de filtro
                const selectFiltro = document.getElementById('filtro-colhedora');
                if (selectFiltro) {
                    // Preservar valor atual
                    const valorAtual = selectFiltro.value;
                    
                    selectFiltro.innerHTML = '<option value="">Todas</option>';
                    estado.colhedoras.forEach(colhedora => {
                        const option = document.createElement('option');
                        option.value = colhedora.id;
                        option.textContent = `${colhedora.id} - ${colhedora.modelo}`;
                        selectFiltro.appendChild(option);
                    });
                    
                    // Restaurar valor
                    selectFiltro.value = valorAtual;
                }
            } catch (e) {
                console.error("Erro ao atualizar selects de colhedoras:", e);
            }
        }
        
        // Função para atualizar tabela de registros
        function atualizarTabelaRegistros() {
            try {
                // Obter registros filtrados
                const registros = filtrarRegistros();
                
                // Atualizar contador de registros
                const contagem = document.getElementById('registros-contagem');
                if (contagem) {
                    contagem.textContent = registros.length;
                }
                
                // Configurar paginação
                const totalRegistros = registros.length;
                estado.paginacao.totalPaginas = Math.ceil(totalRegistros / estado.paginacao.registrosPorPagina);
                
                // Ajustar página atual se necessário
                if (estado.paginacao.paginaAtual > estado.paginacao.totalPaginas) {
                    estado.paginacao.paginaAtual = Math.max(1, estado.paginacao.totalPaginas);
                }
                
                // Atualizar informações de paginação
                const paginacaoInfo = document.getElementById('paginacao-info');
                if (paginacaoInfo) {
                    paginacaoInfo.textContent = `Página ${estado.paginacao.paginaAtual} de ${estado.paginacao.totalPaginas}`;
                }
                
                // Habilitar/desabilitar botões de paginação
                const btnAnterior = document.getElementById('btn-pagina-anterior');
                const btnProxima = document.getElementById('btn-proxima-pagina');
                
                if (btnAnterior) {
                    btnAnterior.disabled = estado.paginacao.paginaAtual <= 1;
                    btnAnterior.classList.toggle('opacity-50', estado.paginacao.paginaAtual <= 1);
                }
                
                if (btnProxima) {
                    btnProxima.disabled = estado.paginacao.paginaAtual >= estado.paginacao.totalPaginas;
                    btnProxima.classList.toggle('opacity-50', estado.paginacao.paginaAtual >= estado.paginacao.totalPaginas);
                }
                
                // Calcular índices de início e fim para a página atual
                const inicio = (estado.paginacao.paginaAtual - 1) * estado.paginacao.registrosPorPagina;
                const fim = Math.min(inicio + estado.paginacao.registrosPorPagina, totalRegistros);
                
                // Obter registros da página atual
                const registrosPagina = registros.slice(inicio, fim);
                
                // Renderizar registros na tabela
                const tbody = document.getElementById('tabela-registros');
                if (tbody) {
                    tbody.innerHTML = '';
                    
                    if (registrosPagina.length === 0) {
                        const tr = document.createElement('tr');
                        tr.innerHTML = `
                            <td colspan="9" class="px-4 py-4 text-center text-gray-500 dark:text-gray-400">
                                Nenhum registro encontrado
                            </td>
                        `;
                        tbody.appendChild(tr);
                    } else {
                        registrosPagina.forEach(registro => {
                            const tr = document.createElement('tr');
                            
                            // Calcular produtividade e rendimento
                            const produtividade = registro.area > 0 ? registro.quantidade / registro.area : 0;
                            const rendimento = registro.horas > 0 ? registro.quantidade / registro.horas : 0;
                            
                            // Obter informações da colhedora
                            const colhedora = estado.colhedoras.find(c => c.id === registro.colhedoraId) || { modelo: '' };
                            
                            tr.innerHTML = `
                                <td class="px-4 py-3 whitespace-nowrap">
                                    <span class="font-medium text-gray-700 dark:text-gray-300">${formatarData(registro.data)}</span>
                                </td>
                                <td class="px-4 py-3">
                                    <span class="font-medium text-gray-700 dark:text-gray-300">${registro.colhedoraId}</span>
                                    <span class="text-gray-500 dark:text-gray-400 text-xs block">${colhedora.modelo}</span>
                                </td>
                                <td class="px-4 py-3">
                                    <span class="text-gray-700 dark:text-gray-300">${registro.cultura || '-'}</span>
                                </td>
                                <td class="px-4 py-3 text-right">
                                    <span class="text-gray-700 dark:text-gray-300 font-medium">${formatarNumero(registro.quantidade, 2)}</span>
                                </td>
                                <td class="px-4 py-3 text-right">
                                    <span class="text-gray-700 dark:text-gray-300">${formatarNumero(registro.area, 2)}</span>
                                </td>
                                <td class="px-4 py-3 text-right">
                                    <span class="text-gray-700 dark:text-gray-300">${formatarNumero(registro.horas, 1)}</span>
                                </td>
                                <td class="px-4 py-3 text-right">
                                    <span class="text-gray-700 dark:text-gray-300">${formatarNumero(produtividade, 1)}</span>
                                </td>
                                <td class="px-4 py-3 text-right">
                                    <span class="text-gray-700 dark:text-gray-300">${formatarNumero(rendimento, 1)}</span>
                                </td>
                                <td class="px-4 py-3 text-center">
                                    <div class="flex justify-center space-x-2">
                                        <button class="text-blue-500 hover:text-blue-700" onclick="editarRegistro('${registro.id}')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="text-red-500 hover:text-red-700" onclick="excluirRegistro('${registro.id}')">
                                            <i class="fas fa-trash-alt"></i>
                                        </button>
                                    </div>
                                </td>
                            `;
                            
                            tbody.appendChild(tr);
                        });
                    }
                }
            } catch (e) {
                console.error("Erro ao atualizar tabela de registros:", e);
                mostrarToast("Erro ao carregar registros", "error");
            }
        }
        
        // Função para filtrar registros
        function filtrarRegistros() {
            try {
                let registros = estado.registros;
                
                // Filtrar por colhedora
                if (estado.filtros.colhedora) {
                    registros = registros.filter(r => r.colhedoraId === estado.filtros.colhedora);
                }
                
                // Filtrar por cultura
                if (estado.filtros.cultura) {
                    registros = registros.filter(r => r.cultura === estado.filtros.cultura);
                }
                
                // Filtrar por data de início
                if (estado.filtros.dataInicio) {
                    const dataInicio = new Date(estado.filtros.dataInicio);
                    registros = registros.filter(r => {
                        const dataRegistro = new Date(r.data);
                        return dataRegistro >= dataInicio;
                    });
                }
                
                // Filtrar por data de fim
                if (estado.filtros.dataFim) {
                    const dataFim = new Date(estado.filtros.dataFim);
                    dataFim.setHours(23, 59, 59); // Fim do dia
                    registros = registros.filter(r => {
                        const dataRegistro = new Date(r.data);
                        return dataRegistro <= dataFim;
                    });
                }
                
                // Ordenar por data (mais recentes primeiro)
                registros.sort((a, b) => new Date(b.data) - new Date(a.data));
                
                return registros;
            } catch (e) {
                console.error("Erro ao filtrar registros:", e);
                return estado.registros;
            }
        }
        
        // Calcular estatísticas de produção
        function calcularEstatisticasProducao() {
            try {
                // Inicializar variáveis
                let totalColhido = 0;
                let areaTotal = 0;
                let horasTotal = 0;
                
                // Somar valores
                estado.registros.forEach(reg => {
                    totalColhido += Number(reg.quantidade) || 0;
                    areaTotal += Number(reg.area) || 0;
                    horasTotal += Number(reg.horas) || 0;
                });
                
                // Calcular produtividade e rendimento
                const produtividade = areaTotal > 0 ? totalColhido / areaTotal : 0;
                const rendimento = horasTotal > 0 ? totalColhido / horasTotal : 0;
                
                return {
                    totalColhido,
                    areaTotal,
                    produtividade,
                    rendimento
                };
            } catch (e) {
                console.error("Erro ao calcular estatísticas de produção:", e);
                return {
                    totalColhido: 0,
                    areaTotal: 0,
                    produtividade: 0,
                    rendimento: 0
                };
            }
        }
        
        // Atualizar resumo de produção
        function atualizarResumoProducao() {
            try {
                // Calcular estatísticas
                const stats = calcularEstatisticasProducao();
                
                // Atualizar elementos
                document.getElementById('total-colhido').textContent = formatarNumero(stats.totalColhido, 0) + " T";
                document.getElementById('area-total').textContent = formatarNumero(stats.areaTotal, 2) + " ha";
                document.getElementById('produtividade-media').textContent = formatarNumero(stats.produtividade, 2) + " T/ha";
                document.getElementById('rendimento-medio').textContent = formatarNumero(stats.rendimento, 2) + " T/h";
                
                // Atualizar tabela de estatísticas por colhedora
                const tabela = document.getElementById('tabela-colhedoras');
                if (tabela) {
                    tabela.innerHTML = '';
                    
                    // Obter estatísticas por colhedora
                    const colhedoraStats = DB.registros.getStatsByCategory('colhedoraId');
                    
                    if (colhedoraStats.length === 0) {
                        tabela.innerHTML = `
                            <tr>
                                <td colspan="4" class="px-4 py-4 text-center text-gray-500 dark:text-gray-400">
                                    Nenhum registro encontrado
                                </td>
                            </tr>
                        `;
                    } else {
                        // Ordenar por quantidade (maior primeiro)
                        colhedoraStats.sort((a, b) => b.quantidade - a.quantidade);
                        
                        colhedoraStats.forEach(stat => {
                            const colhedora = estado.colhedoras.find(c => c.id === stat.name) || {};
                            
                            const tr = document.createElement('tr');
                            tr.innerHTML = `
                                <td class="px-4 py-3">
                                    <span class="font-medium text-gray-700 dark:text-gray-300">${stat.name}</span>
                                    <span class="text-gray-500 dark:text-gray-400 text-xs block">${colhedora.modelo || ''}</span>
                                </td>
                                <td class="px-4 py-3 text-right">
                                    <span class="text-gray-700 dark:text-gray-300 font-medium">${formatarNumero(stat.quantidade, 0)}</span>
                                </td>
                                <td class="px-4 py-3 text-right">
                                    <span class="text-gray-700 dark:text-gray-300">${formatarNumero(stat.area, 2)}</span>
                                </td>
                                <td class="px-4 py-3 text-right">
                                    <span class="text-gray-700 dark:text-gray-300">${formatarNumero(stat.produtividade, 1)}</span>
                                </td>
                            `;
                            
                            tabela.appendChild(tr);
                        });
                    }
                }
                
                // Atualizar lista de culturas
                atualizarListaCulturas();
                
                // Atualizar selects de colhedoras
                atualizarSelectsColhedoras();
                
                // Preencher a data atual para o formulário
                const inputData = document.getElementById('registro-data');
                if (inputData && !inputData.value) {
                    const today = new Date().toISOString().split('T')[0];
                    inputData.value = today;
                }
            } catch (e) {
                console.error("Erro ao atualizar resumo de produção:", e);
            }
        }
        
        // Atualizar dados de caminhões
        function atualizarDadosCaminhoes() {
            try {
                // Obter caminhões do dia atual
                const today = new Date().toISOString().split('T')[0];
                const caminhoesDia = estado.caminhoes.filter(c => c.data === today);
                
                // Calcular médias
                let totalTempoCampo = 0;
                let totalTempoPatio = 0;
                
                estado.caminhoes.forEach(c => {
                    totalTempoCampo += Number(c.tempoCampo) || 0;
                    totalTempoPatio += Number(c.tempoPatio) || 0;
                });
                
                const mediaCampo = estado.caminhoes.length > 0 ? totalTempoCampo / estado.caminhoes.length : 0;
                const mediaPatio = estado.caminhoes.length > 0 ? totalTempoPatio / estado.caminhoes.length : 0;
                const mediaTotal = mediaCampo + mediaPatio;
                
                // Atualizar elementos
                document.getElementById('media-campo').textContent = formatarNumero(mediaCampo, 0) + " min";
                document.getElementById('media-patio').textContent = formatarNumero(mediaPatio, 0) + " min";
                document.getElementById('total-registros-caminhoes').textContent = estado.caminhoes.length;
                document.getElementById('tempo-total-medio').textContent = formatarNumero(mediaTotal, 0) + " min";
                
                // Estatísticas por caminhão
                const statsPorCaminhao = new Map();
                
                estado.caminhoes.forEach(c => {
                    if (!statsPorCaminhao.has(c.idCaminhao)) {
                        statsPorCaminhao.set(c.idCaminhao, {
                            id: c.idCaminhao,
                            totalCampo: 0,
                            totalPatio: 0,
                            count: 0
                        });
                    }
                    
                    const stats = statsPorCaminhao.get(c.idCaminhao);
                    stats.totalCampo += Number(c.tempoCampo) || 0;
                    stats.totalPatio += Number(c.tempoPatio) || 0;
                    stats.count += 1;
                });
                
                // Calcular médias
                statsPorCaminhao.forEach(stats => {
                    stats.mediaCampo = stats.count > 0 ? stats.totalCampo / stats.count : 0;
                    stats.mediaPatio = stats.count > 0 ? stats.totalPatio / stats.count : 0;
                    stats.mediaTotal = stats.mediaCampo + stats.mediaPatio;
                });
                
                // Ordenar por ID
                const statsArray = Array.from(statsPorCaminhao.values());
                statsArray.sort((a, b) => a.id.localeCompare(b.id));
                
                // Atualizar tabela
                const tabelaMedias = document.getElementById('tabela-medias-caminhoes');
                if (tabelaMedias) {
                    tabelaMedias.innerHTML = '';
                    
                    if (statsArray.length === 0) {
                        tabelaMedias.innerHTML = `
                            <tr>
                                <td colspan="4" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                    Nenhum registro encontrado
                                </td>
                            </tr>
                        `;
                    } else {
                        statsArray.forEach(stat => {
                            const tr = document.createElement('tr');
                            tr.innerHTML = `
                                <td class="px-4 py-2">
                                    <span class="font-medium text-gray-700 dark:text-gray-300">${stat.id}</span>
                                    <span class="text-gray-500 dark:text-gray-400 text-xs">(${stat.count} reg.)</span>
                                </td>
                                <td class="px-4 py-2 text-right">
                                    <span class="text-gray-700 dark:text-gray-300">${formatarNumero(stat.mediaCampo, 0)}</span>
                                </td>
                                <td class="px-4 py-2 text-right">
                                    <span class="text-gray-700 dark:text-gray-300">${formatarNumero(stat.mediaPatio, 0)}</span>
                                </td>
                                <td class="px-4 py-2 text-right">
                                    <span class="text-gray-700 dark:text-gray-300 font-medium">${formatarNumero(stat.mediaTotal, 0)}</span>
                                </td>
                            `;
                            
                            tabelaMedias.appendChild(tr);
                        });
                    }
                }
                
                // Atualizar histórico de caminhões
                const tabelaHistorico = document.getElementById('tabela-historico-caminhoes');
                if (tabelaHistorico) {
                    tabelaHistorico.innerHTML = '';
                    
                    // Ordenar por data (mais recentes primeiro)
                    const caminhoes = [...estado.caminhoes].sort((a, b) => new Date(b.data) - new Date(a.data));
                    
                    if (caminhoes.length === 0) {
                        tabelaHistorico.innerHTML = `
                            <tr>
                                <td colspan="6" class="px-4 py-4 text-center text-gray-500 dark:text-gray-400">
                                    Nenhum registro encontrado
                                </td>
                            </tr>
                        `;
                    } else {
                        // Limitar a 10 registros mais recentes
                        const recentCaminhoes = caminhoes.slice(0, 10);
                        
                        recentCaminhoes.forEach(c => {
                            const tempoTotal = Number(c.tempoCampo || 0) + Number(c.tempoPatio || 0);
                            
                            const tr = document.createElement('tr');
                            tr.innerHTML = `
                                <td class="px-4 py-3 whitespace-nowrap">
                                    <span class="font-medium text-gray-700 dark:text-gray-300">${formatarData(c.data)}</span>
                                </td>
                                <td class="px-4 py-3">
                                    <span class="text-gray-700 dark:text-gray-300">${c.idCaminhao}</span>
                                </td>
                                <td class="px-4 py-3 text-right">
                                    <span class="text-gray-700 dark:text-gray-300">${formatarNumero(c.tempoCampo, 0)}</span>
                                </td>
                                <td class="px-4 py-3 text-right">
                                    <span class="text-gray-700 dark:text-gray-300">${formatarNumero(c.tempoPatio, 0)}</span>
                                </td>
                                <td class="px-4 py-3 text-right">
                                    <span class="font-medium text-gray-700 dark:text-gray-300">${formatarNumero(tempoTotal, 0)}</span>
                                </td>
                                <td class="px-4 py-3 text-center">
                                    <div class="flex justify-center space-x-2">
                                        <button class="text-blue-500 hover:text-blue-700" onclick="editarCaminhao('${c.id}')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="text-red-500 hover:text-red-700" onclick="excluirCaminhao('${c.id}')">
                                            <i class="fas fa-trash-alt"></i>
                                        </button>
                                    </div>
                                </td>
                            `;
                            
                            tabelaHistorico.appendChild(tr);
                        });
                    }
                }
                
                // Preencher a data atual para o formulário
                const inputData = document.getElementById('caminhao-data');
                if (inputData && !inputData.value) {
                    inputData.value = today;
                }
            } catch (e) {
                console.error("Erro ao atualizar dados de caminhões:", e);
            }
        }
        
        // Atualizar tabela de colhedoras
        function atualizarTabelaListaColhedoras() {
            try {
                const tabela = document.getElementById('tabela-colhedoras-lista');
                if (!tabela) return;
                
                tabela.innerHTML = '';
                
                if (estado.colhedoras.length === 0) {
                    tabela.innerHTML = `
                        <tr>
                            <td colspan="4" class="px-4 py-4 text-center text-gray-500 dark:text-gray-400">
                                Nenhuma colhedora encontrada
                            </td>
                        </tr>
                    `;
                } else {
                    estado.colhedoras.forEach(colhedora => {
                        const tr = document.createElement('tr');
                        tr.innerHTML = `
                            <td class="px-4 py-3">
                                <div class="flex items-center">
                                    <div class="flex-shrink-0 h-10 w-10 flex items-center justify-center rounded-full bg-primary-100 dark:bg-primary-900 text-primary-600 dark:text-primary-400">
                                        <i class="fas fa-tractor"></i>
                                    </div>
                                    <div class="ml-4">
                                        <div class="text-sm font-medium text-gray-900 dark:text-gray-100">${colhedora.id}</div>
                                        <div class="text-sm text-gray-500 dark:text-gray-400">${colhedora.modelo}</div>
                                    </div>
                                </div>
                            </td>
                            <td class="px-4 py-3">
                                <div class="text-sm text-gray-700 dark:text-gray-300">${colhedora.marca || '-'}</div>
                            </td>
                            <td class="px-4 py-3">
                                <div class="text-sm text-gray-700 dark:text-gray-300">${colhedora.ano || '-'}</div>
                            </td>
                            <td class="px-4 py-3 text-center">
                                <div class="flex justify-center space-x-3">
                                    <button class="text-blue-500 hover:text-blue-700" onclick="editarColhedora('${colhedora.id}')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="text-red-500 hover:text-red-700" onclick="excluirColhedora('${colhedora.id}')">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </div>
                            </td>
                        `;
                        
                        tabela.appendChild(tr);
                    });
                }
            } catch (e) {
                console.error("Erro ao atualizar tabela de colhedoras:", e);
            }
        }
        
        // Event Handlers and Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Login form submit handler
            document.getElementById('btn-login').addEventListener('click', function() {
                const email = document.getElementById('login-email').value;
                const password = document.getElementById('login-password').value;
                
                if (!email || !password) {
                    mostrarToast("Por favor, preencha todos os campos", "warning");
                    return;
                }
                
                showAuthLoader();
                
                // Simular um pequeno delay para mostrar o loader
                setTimeout(() => {
                    const success = Auth.login(email, password);
                    
                    if (success) {
                        showApp();
                        
                        // Carregar dados iniciais
                        estado.colhedoras = DB.colhedoras.getAll();
                        estado.registros = DB.registros.getAll();
                        estado.caminhoes = DB.caminhoes.getAll();
                        
                        // Carregar configurações
                        estado.config = DB.config.get();
                        estado.paginacao.registrosPorPagina = estado.config.registrosPorPagina;
                        
                        // Atualizar tema
                        if (estado.config.temaEscuro) {
                            document.documentElement.classList.add('dark');
                        } else {
                            document.documentElement.classList.remove('dark');
                        }
                        
                        // Inicializar dashboard
                        alternarPagina('dashboard');
                        
                        // Atualizar data atual
                        atualizarDataAtual();
                        
                        // Atualizar contador de notificações
                        atualizarContadorNotificacoes();
                        
                        // Exibir mensagem de boas-vindas
                        mostrarToast(`Bem-vindo, ${estado.user.name}!`, "success");
                    } else {
                        hideAuthLoader();
                        mostrarToast("Email ou senha incorretos", "error");
                    }
                }, 500);
            });
            
            // Show/hide password toggle
            document.getElementById('toggle-password').addEventListener('click', function() {
                const passwordInput = document.getElementById('login-password');
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    this.innerHTML = '<i class="fas fa-eye-slash"></i>';
                } else {
                    passwordInput.type = 'password';
                    this.innerHTML = '<i class="fas fa-eye"></i>';
                }
            });
            
            // Logout button
            document.getElementById('btn-logout').addEventListener('click', function() {
                Auth.logout();
                mostrarToast("Sessão encerrada com sucesso", "info");
            });
            
            // Theme toggle
            document.getElementById('toggle-theme').addEventListener('click', alternarTema);
            
            // Navigation links
            document.querySelectorAll('.sidebar-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const pagina = this.getAttribute('href').substr(1);
                    alternarPagina(pagina);
                });
            });
            
            // Dashboard period change
            document.getElementById('dashboard-period').addEventListener('change', function() {
                atualizarDashboard();
            });
            
            // Dashboard refresh button
            document.getElementById('refresh-dashboard').addEventListener('click', function() {
                atualizarDashboard();
            });
            
            // Dashboard tabs
            document.querySelectorAll('.dashboard-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    
                    // Remove active class from all tabs
                    document.querySelectorAll('.dashboard-tab').forEach(t => {
                        t.classList.remove('tab-active');
                    });
                    
                    // Add active class to selected tab
                    this.classList.add('tab-active');
                    
                    // Show selected tab content
                    document.querySelectorAll('.dashboard-tab-content').forEach(content => {
                        content.classList.add('hidden');
                    });
                    document.getElementById(`tab-${tabName}`).classList.remove('hidden');
                });
            });
            
            // Notifications panel
            document.getElementById('btn-notifications').addEventListener('click', function() {
                const panel = document.getElementById('notifications-panel');
                if (panel.classList.contains('translate-x-full')) {
                    panel.classList.remove('translate-x-full');
                    carregarNotificacoes();
                } else {
                    panel.classList.add('translate-x-full');
                }
            });
            
            document.getElementById('close-notifications').addEventListener('click', function() {
                document.getElementById('notifications-panel').classList.add('translate-x-full');
            });
            
            // Modal fechar ajuda
            document.getElementById('close-help').addEventListener('click', fecharAjuda);
            
            // Botão de ajuda
            document.querySelectorAll('#btn-help-tutorial, #start-tutorial').forEach(btn => {
                btn.addEventListener('click', function() {
                    fecharAjuda();
                    mostrarToast("Tutorial interativo será implementado em uma versão futura", "info");
                });
            });
            
            // Formulários
            document.getElementById('form-colhedora').addEventListener('submit', submitColhedora);
            document.getElementById('form-registro').addEventListener('submit', submitRegistro);
            document.getElementById('form-caminhao').addEventListener('submit', submitCaminhao);
            document.getElementById('form-usuario').addEventListener('submit', adicionarUsuario);
            
            // Eventos de paginação
            document.getElementById('btn-pagina-anterior').addEventListener('click', function() {
                if (estado.paginacao.paginaAtual > 1) {
                    estado.paginacao.paginaAtual--;
                    atualizarTabelaRegistros();
                }
            });
            
            document.getElementById('btn-proxima-pagina').addEventListener('click', function() {
                if (estado.paginacao.paginaAtual < estado.paginacao.totalPaginas) {
                    estado.paginacao.paginaAtual++;
                    atualizarTabelaRegistros();
                }
            });
            
            // Eventos de filtro
            document.getElementById('btn-aplicar-filtros').addEventListener('click', function() {
                estado.filtros.colhedora = document.getElementById('filtro-colhedora').value;
                estado.filtros.cultura = document.getElementById('filtro-cultura').value;
                estado.filtros.dataInicio = document.getElementById('filtro-data-inicio').value;
                estado.filtros.dataFim = document.getElementById('filtro-data-fim').value;
                estado.paginacao.paginaAtual = 1;
                atualizarTabelaRegistros();
            });
            
            document.getElementById('btn-limpar-filtros').addEventListener('click', function() {
                document.getElementById('filtro-colhedora').value = '';
                document.getElementById('filtro-cultura').value = '';
                document.getElementById('filtro-data-inicio').value = '';
                document.getElementById('filtro-data-fim').value = '';
                
                estado.filtros.colhedora = '';
                estado.filtros.cultura = '';
                estado.filtros.dataInicio = '';
                estado.filtros.dataFim = '';
                estado.paginacao.paginaAtual = 1;
                
                atualizarTabelaRegistros();
            });
            
            // Eventos de configuração
            document.getElementById('form-config-geral').addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Obter valores do formulário
                const temaEscuro = document.getElementById('config-tema-escuro').checked;
                const registrosPorPagina = Number(document.getElementById('config-registros-pagina').value);
                const formatoData = document.getElementById('config-formato-data').value;
                
                // Atualizar estado
                estado.config.temaEscuro = temaEscuro;
                estado.config.registrosPorPagina = registrosPorPagina;
                estado.config.formatoData = formatoData;
                
                // Atualizar paginação
                estado.paginacao.registrosPorPagina = registrosPorPagina;
                
                // Aplicar tema
                if (temaEscuro) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
                
                // Salvar configurações
                DB.config.update(estado.config);
                
                // Atualizar interface
                atualizarTabelaRegistros();
                
                mostrarToast("Configurações salvas com sucesso", "success");
            });
            
            // Exportar dados
            document.getElementById('btn-exportar-json').addEventListener('click', function() {
                try {
                    // Obter dados
                    const data = DB.exportData();
                    
                    // Criar blob
                    const blob = new Blob([data], { type: 'application/json' });
                    const url = URL.createObjectURL(blob);
                    
                    // Criar link para download
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `ggomes_log_backup_${new Date().toISOString().slice(0,10)}.json`;
                    document.body.appendChild(a);
                    a.click();
                    
                    // Liberar URL
                    setTimeout(() => {
                        document.body.removeChild(a);
                        URL.revokeObjectURL(url);
                    }, 0);
                    
                    mostrarToast("Exportação concluída com sucesso", "success");
                } catch (e) {
                    console.error("Erro ao exportar dados:", e);
                    mostrarToast("Erro ao exportar dados", "error");
                }
            });
            
            // Exportar PDF
            document.getElementById('btn-exportar-pdf').addEventListener('click', function() {
                try {
                    // Verificar se jsPDF está disponível
                    if (typeof jspdf === 'undefined') {
                        mostrarToast("Biblioteca jsPDF não carregada", "error");
                        return;
                    }
                    
                    // Criar PDF
                    const { jsPDF } = window.jspdf;
                    const doc = new jsPDF();
                    
                    // Adicionar cabeçalho
                    doc.setFontSize(18);
                    doc.text("GGOMES-LOG - Relatório de Produção", 15, 15);
                    
                    doc.setFontSize(12);
                    doc.text(`Data: ${new Date().toLocaleDateString('pt-BR')}`, 15, 25);
                    
                    // Estatísticas gerais
                    doc.setFontSize(14);
                    doc.text("Estatísticas Gerais", 15, 35);
                    
                    const stats = calcularEstatisticasProducao();
                    
                    doc.setFontSize(10);
                    doc.text(`Total Colhido: ${formatarNumero(stats.totalColhido, 0)} T`, 20, 45);
                    doc.text(`Área Total: ${formatarNumero(stats.areaTotal, 2)} ha`, 20, 50);
                    doc.text(`Produtividade Média: ${formatarNumero(stats.produtividade, 2)} T/ha`, 20, 55);
                    doc.text(`Rendimento Médio: ${formatarNumero(stats.rendimento, 2)} T/h`, 20, 60);
                    
                    // Estatísticas por colhedora
                    doc.setFontSize(14);
                    doc.text("Estatísticas por Colhedora", 15, 75);
                    
                    const colhedoraStats = DB.registros.getStatsByCategory('colhedoraId');
                    if (colhedoraStats.length > 0) {
                        const colhedoraData = [];
                        
                        colhedoraStats.forEach(stat => {
                            const colhedora = estado.colhedoras.find(c => c.id === stat.name) || {};
                            const modelo = colhedora.modelo || '';
                            
                            colhedoraData.push([
                                stat.name,
                                modelo,
                                formatarNumero(stat.quantidade, 0) + " T",
                                formatarNumero(stat.area, 2) + " ha",
                                formatarNumero(stat.produtividade, 2) + " T/ha"
                            ]);
                        });
                        
                        doc.autoTable({
                            startY: 80,
                            head: [['ID', 'Modelo', 'Produção', 'Área', 'Produtividade']],
                            body: colhedoraData
                        });
                    } else {
                        doc.setFontSize(10);
                        doc.text("Nenhum dado disponível", 20, 85);
                    }
                    
                    // Estatísticas por cultura
                    const tableEndY = doc.lastAutoTable ? doc.lastAutoTable.finalY + 15 : 85;
                    
                    doc.setFontSize(14);
                    doc.text("Estatísticas por Cultura", 15, tableEndY);
                    
                    const culturaStats = DB.registros.getStatsByCategory('cultura');
                    if (culturaStats.length > 0) {
                        const culturaData = [];
                        
                        culturaStats.forEach(stat => {
                            culturaData.push([
                                stat.name,
                                formatarNumero(stat.quantidade, 0) + " T",
                                formatarNumero(stat.area, 2) + " ha",
                                formatarNumero(stat.produtividade, 2) + " T/ha"
                            ]);
                        });
                        
                        doc.autoTable({
                            startY: tableEndY + 5,
                            head: [['Cultura', 'Produção', 'Área', 'Produtividade']],
                            body: culturaData
                        });
                    } else {
                        doc.setFontSize(10);
                        doc.text("Nenhum dado disponível", 20, tableEndY + 5);
                    }
                    
                    // Rodapé
                    const finalY = doc.lastAutoTable ? doc.lastAutoTable.finalY + 20 : tableEndY + 20;
                    doc.setFontSize(8);
                    doc.text("Gerado por GGOMES-LOG - Sistema de Acompanhamento de Produção", 15, finalY);
                    
                    // Salvar PDF
                    doc.save(`relatorio_ggomes_log_${new Date().toISOString().slice(0,10)}.pdf`);
                    
                    mostrarToast("Relatório PDF gerado com sucesso", "success");
                } catch (e) {
                    console.error("Erro ao gerar PDF:", e);
                    mostrarToast("Erro ao gerar PDF", "error");
                }
            });
            
            // Importar dados
            document.getElementById('btn-selecionar-arquivo').addEventListener('click', function() {
                document.getElementById('input-importar-json').click();
            });
            
            document.getElementById('input-importar-json').addEventListener('change', function() {
                const file = this.files[0];
                if (file) {
                    document.getElementById('arquivo-selecionado').textContent = file.name;
                    document.getElementById('btn-importar-json').disabled = false;
                } else {
                    document.getElementById('arquivo-selecionado').textContent = "Nenhum arquivo selecionado";
                    document.getElementById('btn-importar-json').disabled = true;
                }
            });
            
            document.getElementById('btn-importar-json').addEventListener('click', function() {
                const fileInput = document.getElementById('input-importar-json');
                const file = fileInput.files[0];
                
                if (file) {
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        try {
                            const data = e.target.result;
                            
                            // Tentar importar dados
                            DB.importData(data);
                            
                            // Atualizar estado
                            estado.colhedoras = DB.colhedoras.getAll();
                            estado.registros = DB.registros.getAll();
                            estado.caminhoes = DB.caminhoes.getAll();
                            
                            // Atualizar interface
                            alternarPagina('dashboard');
                            
                            // Resetar formulário
                            fileInput.value = '';
                            document.getElementById('arquivo-selecionado').textContent = "Nenhum arquivo selecionado";
                            document.getElementById('btn-importar-json').disabled = true;
                            
                            mostrarToast("Dados importados com sucesso", "success");
                        } catch (e) {
                            console.error("Erro ao importar dados:", e);
                            mostrarToast(`Erro ao importar dados: ${e.message}`, "error");
                        }
                    };
                    
                    reader.readAsText(file);
                }
            });
            
            // Limpar dados
            document.getElementById('btn-limpar-dados').addEventListener('click', function() {
                document.getElementById('modal-limpar-dados').classList.remove('hidden');
            });
            
            document.getElementById('confirmacao-texto').addEventListener('input', function() {
                const botaoConfirmar = document.getElementById('btn-confirmar-limpar');
                
                if (this.value === "CONFIRMAR") {
                    botaoConfirmar.disabled = false;
                    botaoConfirmar.classList.remove('opacity-50', 'cursor-not-allowed');
                } else {
                    botaoConfirmar.disabled = true;
                    botaoConfirmar.classList.add('opacity-50', 'cursor-not-allowed');
                }
            });
            
            document.getElementById('btn-cancelar-limpar').addEventListener('click', function() {
                document.getElementById('modal-limpar-dados').classList.add('hidden');
                document.getElementById('confirmacao-texto').value = '';
            });
            
            document.getElementById('btn-confirmar-limpar').addEventListener('click', function() {
                if (document.getElementById('confirmacao-texto').value === "CONFIRMAR") {
                    try {
                        // Limpar dados
                        DB.clearAll();
                        
                        // Atualizar estado
                        estado.colhedoras = [];
                        estado.registros = [];
                        estado.caminhoes = [];
                        
                        // Fechar modal
                        document.getElementById('modal-limpar-dados').classList.add('hidden');
                        document.getElementById('confirmacao-texto').value = '';
                        
                        // Atualizar interface
                        alternarPagina('dashboard');
                        
                        mostrarToast("Todos os dados foram limpos com sucesso", "success");
                    } catch (e) {
                        console.error("Erro ao limpar dados:", e);
                        mostrarToast("Erro ao limpar dados", "error");
                    }
                }
            });
            
            // Excluir usuário
            document.getElementById('btn-cancelar-excluir-usuario').addEventListener('click', function() {
                document.getElementById('modal-excluir-usuario').classList.add('hidden');
            });
            
            document.getElementById('btn-confirmar-excluir-usuario').addEventListener('click', function() {
                const userId = document.getElementById('usuario-excluir-id').value;
                
                if (userId) {
                    try {
                        // Não permitir excluir o próprio usuário
                        if (userId === estado.user.id) {
                            mostrarToast("Não é possível excluir seu próprio usuário", "error");
                            document.getElementById('modal-excluir-usuario').classList.add('hidden');
                            return;
                        }
                        
                        // Excluir usuário
                        DB.users.remove(userId);
                        
                        // Fechar modal
                        document.getElementById('modal-excluir-usuario').classList.add('hidden');
                        
                        // Atualizar lista de usuários
                        carregarUsuarios();
                        
                        mostrarToast("Usuário excluído com sucesso", "success");
                    } catch (e) {
                        console.error("Erro ao excluir usuário:", e);
                        mostrarToast("Erro ao excluir usuário", "error");
                    }
                }
            });
        });
        
        // Cadastrar ou atualizar colhedora
        function submitColhedora(event) {
            try {
                event.preventDefault();
                
                // Obter dados do formulário
                const id = document.getElementById('colhedora-id').value.trim();
                const modelo = document.getElementById('colhedora-modelo').value.trim();
                const marca = document.getElementById('colhedora-marca').value.trim();
                const ano = document.getElementById('colhedora-ano').value.trim();
                const observacoes = document.getElementById('colhedora-observacoes').value.trim();
                
                // Validar dados
                if (!id || !modelo) {
                    mostrarToast("Preencha os campos obrigatórios (ID e Modelo)", "warning");
                    return;
                }
                
                // Verificar se está atualizando ou criando nova colhedora
                const isEdit = estado.colhedoras.some(c => c.id === id);
                
                // Criar objeto colhedora
                const colhedora = {
                    id,
                    modelo,
                    marca,
                    ano,
                    observacoes
                };
                
                // Salvar no banco de dados
                if (isEdit) {
                    DB.colhedoras.update(colhedora);
                    mostrarToast(`Colhedora ${id} atualizada com sucesso`, "success");
                } else {
                    try {
                        DB.colhedoras.add(colhedora);
                        mostrarToast(`Colhedora ${id} cadastrada com sucesso`, "success");
                    } catch (e) {
                        mostrarToast(e.message, "error");
                        return;
                    }
                }
                
                // Atualizar lista de colhedoras
                estado.colhedoras = DB.colhedoras.getAll();
                
                // Atualizar interface
                atualizarTabelaListaColhedoras();
                atualizarSelectsColhedoras();
                
                // Limpar formulário
                document.getElementById('form-colhedora').reset();
                
                // Habilitar campo ID (pode ter sido desabilitado em edição)
                document.getElementById('colhedora-id').readOnly = false;
            } catch (e) {
                console.error("Erro ao salvar colhedora:", e);
                mostrarToast("Erro ao salvar colhedora", "error");
            }
        }
        
        // Editar colhedora
        function editarColhedora(id) {
            try {
                const colhedora = DB.colhedoras.get(id);
                if (!colhedora) {
                    mostrarToast("Colhedora não encontrada", "error");
                    return;
                }
                
                // Preencher formulário com dados existentes
                document.getElementById('colhedora-id').value = colhedora.id;
                document.getElementById('colhedora-modelo').value = colhedora.modelo || '';
                document.getElementById('colhedora-marca').value = colhedora.marca || '';
                document.getElementById('colhedora-ano').value = colhedora.ano || '';
                document.getElementById('colhedora-observacoes').value = colhedora.observacoes || '';
                
                // Desabilitar campo ID (não deve ser alterado)
                document.getElementById('colhedora-id').readOnly = true;
                
                // Scrollar até o formulário
                document.getElementById('form-colhedora').scrollIntoView({ behavior: 'smooth' });
            } catch (e) {
                console.error("Erro ao editar colhedora:", e);
                mostrarToast("Erro ao carregar dados da colhedora", "error");
            }
        }
        
        // Excluir colhedora
        function excluirColhedora(id) {
            try {
                if (!confirm(`Tem certeza que deseja excluir a colhedora ${id}?`)) {
                    return;
                }
                
                // Verificar se existem registros associados
                const registrosAssociados = estado.registros.some(r => r.colhedoraId === id);
                if (registrosAssociados) {
                    mostrarToast("Não é possível excluir. Existem registros associados a esta colhedora.", "error");
                    return;
                }
                
                // Excluir colhedora
                DB.colhedoras.remove(id);
                
                // Atualizar lista
                estado.colhedoras = DB.colhedoras.getAll();
                
                // Atualizar interface
                atualizarTabelaListaColhedoras();
                atualizarSelectsColhedoras();
                
                mostrarToast(`Colhedora ${id} excluída com sucesso`, "success");
            } catch (e) {
                console.error("Erro ao excluir colhedora:", e);
                mostrarToast("Erro ao excluir colhedora", "error");
            }
        }
        
        // Cadastrar ou atualizar registro de produção
        function submitRegistro(event) {
            try {
                event.preventDefault();
                
                // Obter dados do formulário
                const data = document.getElementById('registro-data').value;
                const colhedoraId = document.getElementById('registro-colhedora').value;
                const cultura = document.getElementById('registro-cultura').value.trim();
                const quantidade = Number(document.getElementById('registro-quantidade').value);
                const area = Number(document.getElementById('registro-area').value);
                const horas = Number(document.getElementById('registro-horas').value || 0);
                const combustivel = Number(document.getElementById('registro-combustivel').value || 0);
                const observacoes = document.getElementById('registro-observacoes').value.trim();
                
                // Validar dados
                if (!data || !colhedoraId || !cultura || isNaN(quantidade) || isNaN(area) || quantidade <= 0 || area <= 0) {
                    mostrarToast("Preencha todos os campos obrigatórios corretamente", "warning");
                    return;
                }
                
                // Criar objeto de registro
                const registro = {
                    data,
                    colhedoraId,
                    cultura,
                    quantidade,
                    area,
                    horas,
                    combustivel,
                    observacoes
                };
                
                // ID oculto para edição
                const registroId = document.getElementById('registro-id') ? document.getElementById('registro-id').value : null;
                
                // Salvar no banco de dados
                if (registroId) {
                    registro.id = registroId;
                    DB.registros.update(registro);
                    mostrarToast("Registro atualizado com sucesso", "success");
                } else {
                    DB.registros.add(registro);
                    mostrarToast("Registro adicionado com sucesso", "success");
                }
                
                // Atualizar lista de registros
                estado.registros = DB.registros.getAll();
                
                // Atualizar resumo
                atualizarResumoProducao();
                
                // Limpar formulário
                document.getElementById('form-registro').reset();
                
                // Remover ID oculto se existir
                if (document.getElementById('registro-id')) {
                    document.getElementById('registro-id').remove();
                }
                
                // Preencher data atual novamente
                document.getElementById('registro-data').value = new Date().toISOString().split('T')[0];
            } catch (e) {
                console.error("Erro ao salvar registro:", e);
                mostrarToast("Erro ao salvar registro", "error");
            }
        }
        
        // Editar registro
        function editarRegistro(id) {
            try {
                const registro = DB.registros.get(id);
                if (!registro) {
                    mostrarToast("Registro não encontrado", "error");
                    return;
                }
                
                // Mudar para a página de produção
                alternarPagina('producao');
                
                // Preencher formulário com dados existentes
                document.getElementById('registro-data').value = registro.data;
                document.getElementById('registro-colhedora').value = registro.colhedoraId;
                document.getElementById('registro-cultura').value = registro.cultura || '';
                document.getElementById('registro-quantidade').value = registro.quantidade || '';
                document.getElementById('registro-area').value = registro.area || '';
                document.getElementById('registro-horas').value = registro.horas || '';
                document.getElementById('registro-combustivel').value = registro.combustivel || '';
                document.getElementById('registro-observacoes').value = registro.observacoes || '';
                
                // Adicionar ID oculto para controlar a edição
                if (!document.getElementById('registro-id')) {
                    const hiddenInput = document.createElement('input');
                    hiddenInput.type = 'hidden';
                    hiddenInput.id = 'registro-id';
                    hiddenInput.value = id;
                    document.getElementById('form-registro').appendChild(hiddenInput);
                } else {
                    document.getElementById('registro-id').value = id;
                }
                
                // Scrollar até o formulário
                document.getElementById('form-registro').scrollIntoView({ behavior: 'smooth' });
            } catch (e) {
                console.error("Erro ao editar registro:", e);
                mostrarToast("Erro ao carregar dados do registro", "error");
            }
        }
        
        // Excluir registro
        function excluirRegistro(id) {
            try {
                if (!confirm("Tem certeza que deseja excluir este registro?")) {
                    return;
                }
                
                // Excluir registro
                DB.registros.remove(id);
                
                // Atualizar lista
                estado.registros = DB.registros.getAll();
                
                // Atualizar interface
                atualizarTabelaRegistros();
                atualizarResumoProducao();
                atualizarDashboard();
                
                mostrarToast("Registro excluído com sucesso", "success");
            } catch (e) {
                console.error("Erro ao excluir registro:", e);
                mostrarToast("Erro ao excluir registro", "error");
            }
        }
        
        // Cadastrar registro de caminhão
        function submitCaminhao(event) {
            try {
                event.preventDefault();
                
                // Obter dados do formulário
                const data = document.getElementById('caminhao-data').value;
                const idCaminhao = document.getElementById('caminhao-id').value.trim();
                const tempoCampo = Number(document.getElementById('caminhao-tempo-campo').value);
                const tempoPatio = Number(document.getElementById('caminhao-tempo-patio').value);
                const observacoes = document.getElementById('caminhao-observacoes').value.trim();
                
                // Validar dados
                if (!data || !idCaminhao || isNaN(tempoCampo) || isNaN(tempoPatio) || tempoCampo < 0 || tempoPatio < 0) {
                    mostrarToast("Preencha todos os campos obrigatórios corretamente", "warning");
                    return;
                }
                
                // Criar objeto de caminhão
                const caminhao = {
                    data,
                    idCaminhao,
                    tempoCampo,
                    tempoPatio,
                    observacoes
                };
                
                // ID oculto para edição
                const caminhaoId = document.getElementById('caminhao-id-edit') ? document.getElementById('caminhao-id-edit').value : null;
                
                // Salvar no banco de dados
                if (caminhaoId) {
                    caminhao.id = caminhaoId;
                    DB.caminhoes.update(caminhao);
                    mostrarToast("Registro de caminhão atualizado com sucesso", "success");
                } else {
                    DB.caminhoes.add(caminhao);
                    mostrarToast("Registro de caminhão adicionado com sucesso", "success");
                }
                
                // Atualizar lista de caminhões
                estado.caminhoes = DB.caminhoes.getAll();
                
                // Atualizar dados de caminhões
                atualizarDadosCaminhoes();
                
                // Limpar formulário
                document.getElementById('form-caminhao').reset();
                
                // Remover ID oculto se existir
                if (document.getElementById('caminhao-id-edit')) {
                    document.getElementById('caminhao-id-edit').remove();
                }
                
                // Preencher data atual novamente
                document.getElementById('caminhao-data').value = new Date().toISOString().split('T')[0];
            } catch (e) {
                console.error("Erro ao salvar registro de caminhão:", e);
                mostrarToast("Erro ao salvar registro de caminhão", "error");
            }
        }
        
        // Editar caminhão
        function editarCaminhao(id) {
            try {
                const caminhao = DB.caminhoes.get(id);
                if (!caminhao) {
                    mostrarToast("Registro de caminhão não encontrado", "error");
                    return;
                }
                
                // Preencher formulário com dados existentes
                document.getElementById('caminhao-data').value = caminhao.data;
                document.getElementById('caminhao-id').value = caminhao.idCaminhao;
                document.getElementById('caminhao-tempo-campo').value = caminhao.tempoCampo;
                document.getElementById('caminhao-tempo-patio').value = caminhao.tempoPatio;
                document.getElementById('caminhao-observacoes').value = caminhao.observacoes || '';
                
                // Adicionar ID oculto para controlar a edição
                if (!document.getElementById('caminhao-id-edit')) {
                    const hiddenInput = document.createElement('input');
                    hiddenInput.type = 'hidden';
                    hiddenInput.id = 'caminhao-id-edit';
                    hiddenInput.value = id;
                    document.getElementById('form-caminhao').appendChild(hiddenInput);
                } else {
                    document.getElementById('caminhao-id-edit').value = id;
                }
                
                // Scrollar até o formulário
                document.getElementById('form-caminhao').scrollIntoView({ behavior: 'smooth' });
            } catch (e) {
                console.error("Erro ao editar caminhão:", e);
                mostrarToast("Erro ao carregar dados do caminhão", "error");
            }
        }
        
        // Excluir caminhão
        function excluirCaminhao(id) {
            try {
                if (!confirm("Tem certeza que deseja excluir este registro de caminhão?")) {
                    return;
                }
                
                // Excluir caminhão
                DB.caminhoes.remove(id);
                
                // Atualizar lista
                estado.caminhoes = DB.caminhoes.getAll();
                
                // Atualizar interface
                atualizarDadosCaminhoes();
                
                mostrarToast("Registro de caminhão excluído com sucesso", "success");
            } catch (e) {
                console.error("Erro ao excluir caminhão:", e);
                mostrarToast("Erro ao excluir registro de caminhão", "error");
            }
        }
        
        // Carregar lista de usuários
        function carregarUsuarios() {
            try {
                if (!Auth.isAdmin()) {
                    mostrarToast("Você não tem permissão para acessar essa página", "error");
                    alternarPagina('dashboard');
                    return;
                }
                
                const usuarios = DB.users.getAll();
                const tabela = document.getElementById('tabela-usuarios');
                
                if (!tabela) return;
                
                tabela.innerHTML = '';
                
                if (usuarios.length === 0) {
                    tabela.innerHTML = `
                        <tr>
                            <td colspan="4" class="px-4 py-4 text-center text-gray-500 dark:text-gray-400">
                                Nenhum usuário encontrado
                            </td>
                        </tr>
                    `;
                } else {
                    usuarios.forEach(user => {
                        const tr = document.createElement('tr');
                        tr.innerHTML = `
                            <td class="px-4 py-3">
                                <div class="flex items-center">
                                    <div class="flex-shrink-0 h-10 w-10 flex items-center justify-center rounded-full bg-primary-100 dark:bg-primary-900 text-primary-600 dark:text-primary-400">
                                        <i class="fas fa-user"></i>
                                    </div>
                                    <div class="ml-4">
                                        <div class="text-sm font-medium text-gray-900 dark:text-gray-100">${user.name}</div>
                                    </div>
                                </div>
                            </td>
                            <td class="px-4 py-3">
                                <div class="text-sm text-gray-700 dark:text-gray-300">${user.email}</div>
                            </td>
                            <td class="px-4 py-3 text-center">
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${user.isAdmin ? 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400' : 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400'}">
                                    ${user.isAdmin ? 'Administrador' : 'Usuário'}
                                </span>
                            </td>
                            <td class="px-4 py-3 text-center">
                                <div class="flex justify-center space-x-3">
                                    <button class="text-red-500 hover:text-red-700" onclick="mostrarModalExcluirUsuario('${user.id}')">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </div>
                            </td>
                        `;
                        
                        tabela.appendChild(tr);
                    });
                }
            } catch (e) {
                console.error("Erro ao carregar usuários:", e);
                mostrarToast("Erro ao carregar lista de usuários", "error");
            }
        }
        
        // Mostrar modal de exclusão de usuário
        function mostrarModalExcluirUsuario(userId) {
            try {
                document.getElementById('usuario-excluir-id').value = userId;
                document.getElementById('modal-excluir-usuario').classList.remove('hidden');
            } catch (e) {
                console.error("Erro ao mostrar modal de exclusão:", e);
            }
        }
        
        // Adicionar novo usuário
        function adicionarUsuario(event) {
            try {
                event.preventDefault();
                
                // Verificar permissão
                if (!Auth.isAdmin()) {
                    mostrarToast("Você não tem permissão para adicionar usuários", "error");
                    return;
                }
                
                // Obter dados do formulário
                const nome = document.getElementById('nome-usuario').value.trim();
                const email = document.getElementById('email-usuario').value.trim();
                const senha = document.getElementById('senha-usuario').value;
                const isAdmin = document.querySelector('input[name="tipo-usuario"]:checked').value === 'admin';
                
                // Validar dados
                if (!nome || !email || !senha) {
                    mostrarToast("Preencha todos os campos obrigatórios", "warning");
                    return false;
                }
                
                // Verificar se email já existe
                const existingUser = DB.users.getByEmail(email);
                if (existingUser) {
                    mostrarToast("Email já cadastrado", "error");
                    return;
                }
                
                // Criar novo usuário
                const newUser = {
                    name: nome,
                    email: email,
                    password: senha,
                    isAdmin: isAdmin
                };
                
                try {
                    DB.users.add(newUser);
                    
                    // Limpar formulário
                    document.getElementById('form-usuario').reset();
                    
                    // Atualizar lista
                    carregarUsuarios();
                    
                    mostrarToast('Usuário adicionado com sucesso!', 'success');
                } catch (error) {
                    mostrarToast(error.message || 'Erro ao adicionar usuário', 'error');
                }
                
                return false;
            } catch (e) {
                console.error("Erro ao adicionar usuário:", e);
                mostrarToast("Erro ao adicionar usuário", "error");
                return false;
            }
        }
        
        // Inicializar aplicação
        // Mostrar formulário de login inicialmente
        showLoginForm();
    </script>
</body>
</html>
